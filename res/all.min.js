/* all.min.js - Projector skin scripts */
var VER='4.0',DEBUG=false,LOCALE='en-US';
;Texts = {and:'and',from:'From {0}',databaseMissingOrBroken:'The current folder´s database file is missing or broken!',checkProcessSubdirectories:'Check if you´ve allowed jAlbum to process the subdirectories and "Make album" again!',uploadAlbumAgain:'If you´re the owner try to "Upload" the album again!',localAccessBlocked:'Local access to the album´s database file is blocked by your browser. This does not affect the uploaded album! Use jAlbum´s Preview (F12) for testing!',cantLoadDataForFolder:'Can´t load data for folder "{0}"!',closeWindow:'Close window',okButton:'OK',warning:'Warning',error:'Error',restrictedLinkTitle:'Restricted material',restrictedLinkQuestion:'Please verify your age to proceed!',restrictedLinkYes:'I´m over 18',restrictedLinkNo:'I´m below 18',today:'today',yesterday:'yesterday',daysAgo:'{0} days ago',monthsAgo:'{0} months ago',yearsAgo:'{0} years ago',share:'Share',shareOn:'Share on',checkThisOut:'Found this page',localWarning:'Can´t share local albums. Please upload your album first!',email:'Email',copy:'Copy',copied:'Copied',slideshow:'Slideshow',searchPlaceholder:'Search...',foundNTimes:'{0} image(s)',notFound:'not found',search:'Search',newImages:'New images',results:'Results',reset:'Reset',label:'Label',selectedItems:'Selected items',addCart:'Add to Cart',return:'return',select:'Select',sortBy:'Sort by',sortedBy:'Sorted by',ascending:'ascending',descending:'descending',multipleSelectHint:'Use SHIFT to select range, CTRL for multiple entries',noRating:'No rating',and:'and',newItem:'NEW',today:'today',inThePast24Hours:'in the past 24 hours',inThePast48Hours:'in the past 48 hours',inTheLastDay:'in the last day',inThePastNDays:'in the past {0} days',inThePastNMonths:'in the past {0} months',inThePastNYears:'in the past {0} years',sinceMyLastVisit:'since my last visit',betweenDays:'between {0} and {1}',onDay:'on {0}',beforeDay:'before {0}',afterDay:'after {0}',imagesAdded:'Images added',imagesModified:'Images modified',imagesTaken:'Images taken',startSlideshow:'Start slideshow',startSlideshowShort:'Play',atFirstPage:'At first page',atLastPage:'At last page',atLastPageQuestion:'Where to go next?',startOver:'Start over',backToHome:'Back to home',nextIndex:'Next index page',stop:'Stop',pause:'Pause',pauseShort:'Pause',upOneLevel:'Up one level',upOneLevelShort:'Exit',backToCover:'Back to cover page',previousPicture:'Previous picture',previousPictureShort:'Prev',nextPicture:'Next picture',nextPictureShort:'Next',previousFolder:'Previous folder',nextFolder:'Next folder',oneToOneSize:'1:1 size',oneToOneSizeShort:'1:1',fitToScreen:'Fit to screen',fitToScreenShort:'Fit',showInfo:'Show caption / info',showInfoShort:'Info',hideInfo:'Hide caption / info',hideInfoShort:'Hide info',showThumbs:'Show thumbnails',showThumbsShort:'Thumbnails',hideThumbs:'Hide thumbnails',hideThumbsShort:'Hide thumbs',clickToOpen:'Click to open this document with the associated viewer',play:'Play',audioClipLabel:'Play / pause the attached audio clip',metaBtn:'Photo data',metaLabel:'Display photographic (Exif/Iptc) data',mapBtn:'Map',mapLabel:'Show the photo location on map',shareBtn:'Share',shareLabel:'Share this photo over social sites',download:'Download',print:'Print',printLabel:'Print out this photo on your printer',fotomotoBtn:'Buy / Share',fotomotoTooltip:'Buy prints or digital files, share, send free eCards',regionsBtn:'People',regionsLabel:'Show tagged people',scrollTopTooltip:'Top',new:'New',more:'more',less:'less',locationWarning:'Works only when uploaded',cookiePolicyText:'This album is using cookies to remember your preferences. It does not track you, nor does it store personal data.',cookiePolicyAgree:'Got it',cookiePolicyLearnMore:'Learn more',gdprComplianceText:'This site is using the following external services that might track your visits anonymously. Disabling tracking will stop their functionality.',allowAll:'Allow all',denyAll:'Deny all',allowSelected:'Allow selected',image:'image',images:'images',audio:'audio',audios:'audios',video:'video',videos:'videos',other:'other',others:'others'};
/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-backgroundsize-bgsizecover-cssanimations-cssgradients-csstransforms-csstransforms3d-csstransitions-cssvhunit-fullscreen-history-preserve3d-requestanimationframe-svg-touchevents-setclasses !*/
!function(e,t,n){function r(e,t){return typeof e===t}function s(){var e,t,n,s,o,i,a;for(var l in x)if(x.hasOwnProperty(l)){if(e=[],t=x[l],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(s=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)i=e[o],a=i.split("."),1===a.length?Modernizr[a[0]]=s:(!Modernizr[a[0]]||Modernizr[a[0]]instanceof Boolean||(Modernizr[a[0]]=new Boolean(Modernizr[a[0]])),Modernizr[a[0]][a[1]]=s),C.push((s?"":"no-")+a.join("-"))}}function o(e){var t=b.className,n=Modernizr._config.classPrefix||"";if(z&&(t=t.baseVal),Modernizr._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}Modernizr._config.enableClasses&&(t+=" "+n+e.join(" "+n),z?b.className.baseVal=t:b.className=t)}function i(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):z?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(t,n,r){var s;if("getComputedStyle"in e){s=getComputedStyle.call(e,t,n);var o=e.console;if(null!==s)r&&(s=s.getPropertyValue(r));else if(o){var i=o.error?"error":"log";o[i].call(o,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else s=!n&&t.currentStyle&&t.currentStyle[r];return s}function l(e,t){return e-1===t||e===t||e+1===t}function u(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function f(){var e=t.body;return e||(e=i(z?"svg":"body"),e.fake=!0),e}function d(e,n,r,s){var o,a,l,u,d="modernizr",c=i("div"),p=f();if(parseInt(r,10))for(;r--;)l=i("div"),l.id=s?s[r]:d+(r+1),c.appendChild(l);return o=i("style"),o.type="text/css",o.id="s"+d,(p.fake?p:c).appendChild(o),p.appendChild(c),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),c.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",u=b.style.overflow,b.style.overflow="hidden",b.appendChild(p)),a=n(c,e),p.fake?(p.parentNode.removeChild(p),b.style.overflow=u,b.offsetHeight):c.parentNode.removeChild(c),!!a}function c(e,t){return!!~(""+e).indexOf(t)}function p(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var s;for(var o in e)if(e[o]in t)return n===!1?e[o]:(s=t[e[o]],r(s,"function")?p(s,n||t):s);return!1}function g(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(t,r){var s=t.length;if("CSS"in e&&"supports"in e.CSS){for(;s--;)if(e.CSS.supports(g(t[s]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];s--;)o.push("("+g(t[s])+":"+r+")");return o=o.join(" or "),d("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==a(e,null,"position")})}return n}function v(e,t,s,o){function a(){f&&(delete R.style,delete R.modElem)}if(o=r(o,"undefined")?!1:o,!r(s,"undefined")){var l=h(e,s);if(!r(l,"undefined"))return l}for(var f,d,p,m,g,v=["modernizr","tspan","samp"];!R.style&&v.length;)f=!0,R.modElem=i(v.shift()),R.style=R.modElem.style;for(p=e.length,d=0;p>d;d++)if(m=e[d],g=R.style[m],c(m,"-")&&(m=u(m)),R.style[m]!==n){if(o||r(s,"undefined"))return a(),"pfx"==t?m:!0;try{R.style[m]=s}catch(y){}if(R.style[m]!=g)return a(),"pfx"==t?m:!0}return a(),!1}function y(e,t,n,s,o){var i=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+O.join(i+" ")+i).split(" ");return r(t,"string")||r(t,"undefined")?v(a,t,s,o):(a=(e+" "+N.join(i+" ")+i).split(" "),m(a,t,n))}function S(e,t,r){return y(e,n,n,t,r)}var C=[],x=[],w={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){x.push({name:e,fn:t,options:n})},addAsyncTest:function(e){x.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=w,Modernizr=new Modernizr,Modernizr.addTest("history",function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol?e.history&&"pushState"in e.history:!1}),Modernizr.addTest("svg",!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var b=t.documentElement,T="CSS"in e&&"supports"in e.CSS,_="supportsCSS"in e;Modernizr.addTest("supports",T||_);var z="svg"===b.nodeName.toLowerCase(),k=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];w._prefixes=k,Modernizr.addTest("cssgradients",function(){for(var e,t="background-image:",n="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",s=0,o=k.length-1;o>s;s++)e=0===s?"to ":"",r+=t+k[s]+"linear-gradient("+e+"left top, #9f9, white);";Modernizr._config.usePrefixes&&(r+=t+"-webkit-"+n);var a=i("a"),l=a.style;return l.cssText=r,(""+l.backgroundImage).indexOf("gradient")>-1}),Modernizr.addTest("preserve3d",function(){var t,n,r=e.CSS,s=!1;return r&&r.supports&&r.supports("(transform-style: preserve-3d)")?!0:(t=i("a"),n=i("a"),t.style.cssText="display: block; transform-style: preserve-3d; transform-origin: right; transform: rotateY(40deg);",n.style.cssText="display: block; width: 9px; height: 1px; background: #000; transform-origin: right; transform: rotateY(40deg);",t.appendChild(n),b.appendChild(t),s=n.getBoundingClientRect(),b.removeChild(t),s=s.width&&s.width<4)});var P=w.testStyles=d;P("#modernizr { height: 50vh; }",function(t){var n=parseInt(e.innerHeight/2,10),r=parseInt(a(t,null,"height"),10);Modernizr.addTest("cssvhunit",l(r,n))});var E="Moz O ms Webkit",O=w._config.usePrefixes?E.split(" "):[];w._cssomPrefixes=O;var A=function(t){var r,s=k.length,o=e.CSSRule;if("undefined"==typeof o)return n;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var i=0;s>i;i++){var a=k[i],l=a.toUpperCase()+"_"+r;if(l in o)return"@-"+a.toLowerCase()+"-"+t}return!1};w.atRule=A;var N=w._config.usePrefixes?E.toLowerCase().split(" "):[];w._domPrefixes=N;var j={elem:i("modernizr")};Modernizr._q.push(function(){delete j.elem});var R={style:j.elem.style};Modernizr._q.unshift(function(){delete R.style}),w.testAllProps=y;var q=w.prefixed=function(e,t,n){return 0===e.indexOf("@")?A(e):(-1!=e.indexOf("-")&&(e=u(e)),t?y(e,t,n):y(e,"pfx"))};Modernizr.addTest("fullscreen",!(!q("exitFullscreen",t,!1)&&!q("cancelFullScreen",t,!1))),Modernizr.addTest("requestanimationframe",!!q("requestAnimationFrame",e),{aliases:["raf"]}),w.testAllProps=S,Modernizr.addTest("cssanimations",S("animationName","a",!0)),Modernizr.addTest("backgroundsize",S("backgroundSize","100%",!0)),Modernizr.addTest("bgsizecover",S("backgroundSize","cover")),Modernizr.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&S("transform","scale(1)",!0)}),Modernizr.addTest("csstransforms3d",function(){return!!S("perspective","1px",!0)}),Modernizr.addTest("csstransitions",S("transition","all",!0)),Modernizr.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",k.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");P(r,function(e){n=9===e.offsetTop})}return n}),s(),o(C),delete w.addTest,delete w.addAsyncTest;for(var L=0;L<Modernizr._q.length;L++)Modernizr._q[L]();e.Modernizr=Modernizr}(window,document);
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("whatInput",[],t):"object"==typeof exports?exports.whatInput=t():e.whatInput=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";e.exports=function(){if("undefined"==typeof document||"undefined"==typeof window)return{ask:function(){return"initial"},element:function(){return null},ignoreKeys:function(){},specificKeys:function(){},registerOnChange:function(){},unRegisterOnChange:function(){}};var e=document.documentElement,t=null,n="initial",o=n,i=Date.now();try{window.sessionStorage.getItem("what-input")&&(n=window.sessionStorage.getItem("what-input")),window.sessionStorage.getItem("what-intent")&&(o=window.sessionStorage.getItem("what-intent"))}catch(e){}var r=["button","input","select","textarea"],s=[],a=[16,17,18,91,93],u=[],d={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch",touchend:"touch"},c=!1,w={x:null,y:null},p={2:"touch",3:"touch",4:"mouse"},f=!1;try{var l=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("test",null,l)}catch(e){}var h=function(){var e=!!f&&{passive:!0};window.PointerEvent?(window.addEventListener("pointerdown",m),window.addEventListener("pointermove",y)):window.MSPointerEvent?(window.addEventListener("MSPointerDown",m),window.addEventListener("MSPointerMove",y)):(window.addEventListener("mousedown",m),window.addEventListener("mousemove",y),"ontouchstart"in window&&(window.addEventListener("touchstart",m,e),window.addEventListener("touchend",m))),window.addEventListener(b(),y,e),window.addEventListener("keydown",m),window.addEventListener("keyup",m),window.addEventListener("focusin",g),window.addEventListener("focusout",E)},m=function(e){var t=e.which,i=d[e.type];"pointer"===i&&(i=L(e));var s=!u.length&&-1===a.indexOf(t),c=u.length&&-1!==u.indexOf(t),w="keyboard"===i&&t&&(s||c)||"mouse"===i||"touch"===i;if(x(i)&&(w=!1),w&&n!==i){n=i;try{window.sessionStorage.setItem("what-input",n)}catch(e){}v("input")}if(w&&o!==i){var p=document.activeElement;if(p&&p.nodeName&&-1===r.indexOf(p.nodeName.toLowerCase())||"button"===p.nodeName.toLowerCase()&&!k(p,"form")){o=i;try{window.sessionStorage.setItem("what-intent",o)}catch(e){}v("intent")}}},v=function(t){e.setAttribute("data-what"+t,"input"===t?n:o),S(t)},y=function(e){var t=d[e.type];if("pointer"===t&&(t=L(e)),M(e),!c&&!x(t)&&o!==t){o=t;try{window.sessionStorage.setItem("what-intent",o)}catch(e){}v("intent")}},g=function(n){n.target.nodeName?(t=n.target.nodeName.toLowerCase(),e.setAttribute("data-whatelement",t),n.target.classList&&n.target.classList.length&&e.setAttribute("data-whatclasses",n.target.classList.toString().replace(" ",","))):E()},E=function(){t=null,e.removeAttribute("data-whatelement"),e.removeAttribute("data-whatclasses")},L=function(e){return"number"==typeof e.pointerType?p[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType},x=function(e){var t=Date.now(),o="mouse"===e&&"touch"===n&&t-i<200;return i=t,o},b=function(){return"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"},S=function(e){for(var t=0,i=s.length;t<i;t++)s[t].type===e&&s[t].fn.call(void 0,"input"===e?n:o)},M=function(e){w.x!==e.screenX||w.y!==e.screenY?(c=!1,w.x=e.screenX,w.y=e.screenY):c=!0},k=function(e,t){var n=window.Element.prototype;if(n.matches||(n.matches=n.msMatchesSelector||n.webkitMatchesSelector),n.closest)return e.closest(t);do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null};return"addEventListener"in window&&Array.prototype.indexOf&&(d[b()]="mouse",h(),v("input"),v("intent")),{ask:function(e){return"intent"===e?o:n},element:function(){return t},ignoreKeys:function(e){a=e},specificKeys:function(e){u=e},registerOnChange:function(e,t){s.push({fn:e,type:t||"input"})},unRegisterOnChange:function(e){var t=function(e){for(var t=0,n=s.length;t<n;t++)if(s[t].fn===e)return t}(e);(t||0===t)&&s.splice(t,1)}}}()}])});
window.console=window.console||{log:function(e){}};var log=function(){},UNDEF="undefined",OBJECT="object",FUNCTION="function",STRING="string",NUMBER="number",BOOLEAN="boolean",NOLINK="javascript:void(0)",LOCAL="file:"===document.location.protocol,ONEDAY_S=86400,ONEDAY_MS=864e5,STARS='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="80" height="16" viewBox="0 0 80 16" xml:space="preserve"><path d="M12,10.094l0.938,5.5L8,13l-4.938,2.594L4,10.094L0,6.219l5.531-0.813l2.469-5l2.469,5L16,6.219L12,10.094z"/><path d="M28,10.094l0.938,5.5L24,13l-4.938,2.594l0.938-5.5l-4-3.875l5.531-0.813l2.469-5l2.469,5L32,6.219L28,10.094z"/><path d="M44,10.094l0.938,5.5L40,13l-4.938,2.594l0.938-5.5l-4-3.875l5.531-0.813l2.469-5l2.469,5L48,6.219L44,10.094z"/><path d="M60,10.094l0.938,5.5L56,13l-4.938,2.594l0.938-5.5l-4-3.875l5.531-0.813l2.469-5l2.469,5L64,6.219L60,10.094z"/><path d="M76,10.094l0.938,5.5L72,13l-4.938,2.594l0.938-5.5l-4-3.875l5.531-0.813l2.469-5l2.469,5L80,6.219L76,10.094z"/></svg>';if(DIR_PATH=function(){let e=window.location.pathname,t=document.getElementsByTagName("html")[0].getAttribute("data-level")||0;do{e=e.substring(0,e.lastIndexOf("/"))}while(t--);return e+"/"}(),LOCALSTORAGE=function(){try{return localStorage.setItem("_t",UNDEF),localStorage.removeItem("_t"),!0}catch(e){return!1}}(),HISTORY=function(){let e=navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),VEND=function(){let e=navigator.userAgent;return e.indexOf("Trident")>0||e.indexOf("Edge")>0?"ms":e.indexOf("AppleWebKit")>0?"webkit":e.indexOf("Gecko")>0?"moz":e.indexOf("Presto")>0?"o":e.indexOf("Blink")>0?"webkit":""}(),JAVAFXBROWSER=navigator.userAgent.indexOf("JavaFX/14")>0,BACKFACEBUG=navigator.userAgent.indexOf("Edge")>0&&parseInt(navigator.userAgent.match(/Edge\/(\d+\.\d+)/)[1])<=16,TOUCH=/Trident|Edge/.test(navigator.userAgent)?window.navigator.pointerEnabled?{START:"pointerdown",MOVE:"pointermove",END:"pointerup",CANCEL:"pointercancel"}:{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerUp",CANCEL:"MSPointerCancel"}:{START:"touchstart",MOVE:"touchmove",END:"touchend",CANCEL:"touchcancel"},TOUCHENABLED=/Trident/.test(navigator.userAgent)?typeof navigator.maxTouchPoints!==UNDEF&&navigator.maxTouchPoints:/Edge/.test(navigator.userAgent)?0==scrollbarWidth():/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent)||"ontouchstart"in window:"ontouchstart"in window,ISIOSDEVICE=/^iP/.test(navigator.platform)||/^Mac/.test(navigator.platform)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>4,SMALLSCREEN=window.innerWidth<=480||window.innerHeight<=480||window.innerWidth<=640&&window.innerHeight<=640,PIXELRATIO=window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1,ZOOM=window.hasOwnProperty("visualViewport")?window.visualViewport.scale:1,HIDPI=PIXELRATIO>1.9,HASPDFVIEWER=navigator.mimeTypes["application/pdf"]||function(){var e=function(e){try{return new ActiveXObject(e)}catch(e){}};return e("AcroPDF.PDF")||e("PDF.PdfCtrl")}()||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,LANGUAGE=navigator.hasOwnProperty("languages")?navigator.languages[0]:navigator.language,WEBP_LOSSY=!1,WEBP_LOSSLESS=!1,checkWebpSupport=function(e,t){let n=new Image;n.onload=function(){let e=n.width>0&&n.height>0;t(e)},n.onerror=function(){t(!1)},n.src="data:image/webp;base64,"+e},checkWebpSupport("UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",function(e){WEBP_LOSSY=e}),checkWebpSupport("UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",function(e){WEBP_LOSSLESS=e}),typeof DEBUG===UNDEF)var DEBUG=!1;if(typeof REL_PATH===UNDEF)var REL_PATH="";if(typeof PAGE_NAME===UNDEF)var PAGE_NAME="index.html";if(typeof THUMBS_DIR===UNDEF)var THUMBS_DIR="thumbs";if(typeof SLIDES_DIR===UNDEF)var SLIDES_DIR="slides";String.prototype.hasOwnProperty("trim")||(String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var e=this+"",t=e.length;if(t){var n=String.wsp,r=0;for(--t;t>=0&&n[e.charCodeAt(t)];)--t;for(++t;r<t&&n[e.charCodeAt(r)];)++r;e=e.substring(r,t)}return e}),String.prototype.hasOwnProperty("trunc")||(String.prototype.trunc=function(e){var t=this+"";if(t.length<=e)return t.toString();var n=t.substring(0,e-1),r=n.lastIndexOf(" ");return(r>6&&n.length-r<20?n.substring(0,r):n)+"..."}),String.prototype.hasOwnProperty("startsWith")||(String.prototype.startsWith=function(e){return(this+"").substring(0,e.length)===e}),String.prototype.hasOwnProperty("endsWith")||(String.prototype.endsWith=function(e){return(this+"").substring(this.length-e.length)===e}),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},String.prototype.getExt=function(){var e=this+"",t=e.lastIndexOf(".");return t<=0||t>=e.length-1?"":e.substring(t+1)},String.prototype.stripExt=function(){var e=this+"",t=e.lastIndexOf(".");return t<=0||t>e.length-1?e:e.substring(0,t)},String.prototype.hasExt=function(e){var t=this+"",n=t.lastIndexOf(".");return n>=0&&(t=t.substring(n+1).toLowerCase(),(e+",").indexOf(t+",")>=0)},String.prototype.replaceExt=function(e){var t=this+"",n=t.lastIndexOf(".");return n<=0?t:t.substring(0,n+1)+e},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var e=(this+"").split("#")[0];return e.substring(0,e.lastIndexOf("/")+1)},String.prototype.getFile=function(){var e=(this+"").split("#")[0];return e.substring(e.lastIndexOf("/")+1)},String.prototype.getRelpath=function(e){var t=this+"",n=t.lastIndexOf("#");for(-1===n?n=t.length-1:n--;n>=0&&("/"!==t[n]||0!=e--);n--);return t.substring(n+1)},String.prototype.fixUrl=function(){for(var e,t,n=this+"";(e=n.indexOf("../"))>0;){if(1===e||-1===(t=n.lastIndexOf("/",e-2)))return n.substring(e+3);n=n.substring(0,t)+n.substring(e+2)}return n},String.prototype.fullUrl=function(){var e=this+"";return e.match(/^(http|ftp|file)/)||(e=window.location.href.getDir()+e),e.fixUrl()},String.prototype.cleanupHTML=function(){for(var e=[[/<(b|h)r\/?>/gi,"\n"],[/\&amp;/g,"&"],[/\&nbsp;/g," "],[/\&lt;/g,"<"],[/\&gt;/g,">"],[/\&(m|n)dash;/g,"-"],[/\&apos;/g,"'"],[/\&quot;/g,'"']],t=this+"",n=e.length-1;n>=0;n--)t=t.replace(e[n][0],e[n][1]);return t.replace},String.prototype.stripHTML=function(e){var t=this+"";return e&&(t=t.cleanupHTML()),t.replace(/<\/?[^>]+>/g," ")},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(e,t){return(this.length?this+(t||" &middot; "):"")+e},String.prototype.rgb2hex=function(){var e=this+"";if("#"===e.charAt(0)||"transparent"===e)return e;var t,n=e.match(/\d+/g),r="";if(n){for(var o=0;o<n.length&&o<3;++o)r+=((t=parseInt(n[o],10).toString(16)).length<2?"0":"")+t;return"#"+r}return"transparent"},String.prototype.template=function(e){if(typeof e===UNDEF||!this)return this;!isNaN(parseFloat(e))&&isFinite(e)&&(e+="");var t=this+"";if(e.constructor===Array)for(var n=0;n<e.length;++n)t=t.replace(new RegExp("\\{"+n+"\\}","gi"),e[n]);else t=t.replace(/\{0\}/gi,e);return t},String.prototype.getSearchTerms=function(){var e=this+"";if(-1===e.indexOf('"'))return e.split(" ");var t,n=[];do{if((t=e.indexOf('"'))>0&&n.push.apply(n,e.substring(0,t).split(" ")),e=e.substring(t+1),(t=e.indexOf('"'))<0){n.push(e);break}n.push(e.substring(0,t)),e=e.substring(t+1)}while(e.length);return n},String.prototype.objectify=function(){if(!this||!this.length)return this;var e=this+"";"?"!==e.charAt(0)&&"#"!==e.charAt(0)||(e=e.substring(1));for(var t,n={},r=e.split("&"),o=0,i=r.length;o<i;++o)(t=r[o].split("=")).length>1?"img"===t[0]?n.img=t[1]:n[t[0]]=decodeURIComponent(t[1]):n[t[0]]=null;return n},String.prototype.testIn=function(e){return"string"!=typeof e&&(e+=""),new RegExp(this,"i").test(e)},String.prototype.testExactMatch=function(e){if(e.constructor!==Array)return this==e+"";for(var t=0,n=e.length;t<n;++t)if(this==e[t])return!0;return!1},String.prototype.fixjAlbumPaths=function(e,t,n){var r=(this+"").replace(/\%24/g,"$");return e&&(r=r.replace(/\${resPath}/g,e)),t&&(r=r.replace(/\${rootPath}/g,t)),n&&(r=r.replace(/\${relPath}/g,n)),r},String.prototype.testMatch=function(e){if(typeof e===UNDEF)return!1;var t=this.toLowerCase();if(e.constructor!==Array)return t===(e+"").toLowerCase();for(var n=0,r=e.length;n<r;++n)if(t===e[n].toLowerCase())return!0;return!1},String.prototype.searchTerm=function(e,t,n,r){if(typeof e===UNDEF||!this.length)return!1;var o=typeof r!==UNDEF&&r,i=this+"",t=typeof t!==UNDEF&&t,n=typeof n!==UNDEF&&n,a=function(e,n){return t?o?e===n:e===n.toLowerCase():-1!==(" "+e).indexOf(" "+(o?n:n.toLowerCase()))};if(e.constructor===Array&&1===e.length&&(e=e[0]),o||(i=i.toLowerCase()),Array.isArray(e)){var s,l=e.length,c=0;for(s=0;s<l;s++)if(a(i,e[s])){if(!n)return!0;c++}else if(n)return!1;return c===l}return a(i,e)},String.prototype.hashCode=function(){for(var e=0,t=0,n=this.length;t<n;++t)e=(e<<5)-e+this.charCodeAt(t),e&=e;return e},Math.minMax=function(e,t,n){return(t=isNaN(t)?parseFloat(t):t)<e?e:t>n?n:t},Math.getRange=function(e,t){if(t.constructor!==Array)return e>=t?1:0;if(1===t.length)return e>=t[0]?1:0;if(e<t[0])return 0;for(var n=1;n<t.length&&!(e>=t[n-1]&&e<t[n]);n++);return n};var encodeJ=[];encodeJ[33]="%21",encodeJ[35]="%23",encodeJ[36]="%24",encodeJ[38]="%26",encodeJ[39]="%27",encodeJ[40]="%28",encodeJ[41]="%29",encodeJ[43]="%2B",encodeJ[44]="%2C",encodeJ[59]="%3B",encodeJ[60]="%3C",encodeJ[61]="%3D",encodeJ[62]="%3E",encodeJ[63]="%3F",encodeJ[64]="%40",encodeJ[123]="%7B",encodeJ[124]="%7C",encodeJ[125]="%7D",transCodeJ=[],transCodeJ[33]="%21",transCodeJ[39]="%27",transCodeJ[40]="%28",transCodeJ[41]="%29";var isEmpty=function(e){return null==e||0===Object.getOwnPropertyNames(e).length},paramize=function(e){if("number"==typeof e)return""+e;if("string"==typeof e)return e;if("object"==typeof e){for(var t="",n=Object.getOwnPropertyNames(e),r=n.length,o=0;o<r;o++)null!==e[n[o]]&&("img"===n[o]?t+="&img="+e[n[o]]:t+="&"+n[o]+"="+encodeURIComponent(e[n[o]]));if(t.length)return t.substring(1)}return""},allTrue=function(e){if(e&&e.constructor===Array){for(var t=0;t<e.length;++t)if(!e[t])return!1;return!0}return!0===e},removeEmpty=function(e){if(e&&e.constructor===Array){var t,n=new Array;for(t=0;t<e.length;t++)"string"==typeof e[t]&&e[t].length&&n.push(e[t]);return n}return e},getCoords=function(e){return e.touches?1==e.touches.length?{x:e.touches[0].clientX,y:e.touches[0].clientY}:e.changedTouches&&1==e.changedTouches.length?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:null:{x:e.clientX,y:e.clientY}},translate=function(e,t){if(e=e.trim(),typeof Texts!==UNDEF&&Texts.hasOwnProperty(e))return Texts[e];if(typeof t!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+e+"="+t),t;DEBUG&&console&&console.log("Missing translation: "+e);var n=e.replace(/([A-Z])/g," $1").toLowerCase();return n[0]=n.charAt(0).toUpperCase(),n},getKeys=function(e,t){var n,r={},o=e.split(","),i=o.length;for(n=0;n<i;n++)r[o[n]]=translate(o[n],t[o]);return r},getTranslations=function(e){var t,n={};for(t in e)"object"==typeof e[t]?n[t]=getTranslations(e[t]):n[t]=translate(t,e[t]);return n},readData=function(e,t){var n={};if(e&&e.length&&t){t=t.split(",");for(var r,o=0;o<t.length;o++)null!=(r=e.data(t[o]))&&(n[t[o]]=r)}return n},niceByte=function(e){var t=parseFloat(e),n=Math.abs(t),r=function(e){return e<10?e.toFixed(1):Math.round(e)};return n<1e-4?"0":n<.1?t.toFixed(3):n<1?t.toFixed(2):n<1e3?r(t):n<1e6?r(t/1e3)+"k":n<1e9?r(t/1e6)+"M":n<1e12?r(t/1e9)+"G":t.toExponential()},niceTime=function(e){var t=parseFloat(e),n=Math.abs(t),r=function(e){return e<10?e.toFixed(1):Math.round(e)};return n<1e-6?"0s":n<.001?r(1e6*t)+"&#181;s":n<1?r(1e3*t)+"ms":n<60?r(t)+"s":Math.floor(n/60)+"m"+Math.round(n%60)+"s"},toCurrency=function(e,t){return parseFloat(e).toLocaleString(LANGUAGE,{style:"currency",currency:t||"EUR"})},getRelativeDate=function(e){if(!e)return translate("today");if(1===e)return translate("yesterday");var t,n;return e>=730?(t=translate("yearsAgo"),n=Math.round(e/365)):e>=60?(t=translate("monthsAgo"),n=Math.round(e/30.5)):(t=translate("daysAgo"),n=e),t.replace("{0}",n)},getTimespan=function(e){if(!e)return translate("inThePast24Hours");if(e<2)return translate("inThePast48Hours");var t,n;return e>=730?(t=translate("inThePastNYears"),n=Math.round(e/365)):e>=60?(t=translate("inThePastNMonths"),n=Math.round(e/30.42)):(t=translate("inThePastNDays"),n=e),t.replace("{0}",n)},getFractionValue=function(e){var t=e.match(/^([\d\.]+)\/([\d\.]+)/);return t&&t.length>1&&0!==t[2]?t[1]/t[2]:e},getExposure=function(e){return e=e.includes("/")?getFractionValue(e):parseFloat(e)},getRelativePath=function(e,t){if(typeof t===UNDEF||typeof e===UNDEF)return"";if("./"===e&&(e=REL_PATH),"./"===t&&(t=REL_PATH),t.endsWith("/")||(t+="/"),e.endsWith("/")||(e+="/"),e===t)return"";if("/"===e)return t;var n=e.split("/").filter(Boolean);if("/"===t)return getParentFolderLink(n.length);for(var r=t.split("/").filter(Boolean);n.length&&r.length&&n[0]===r[0];)n.shift(),r.shift();return getParentFolderLink(n.length)+(r.length?r.join("/")+"/":"")},getParentFolderLink=function(e){return e>0?"../../../../../../../../../../../../../../../../../../../../".substring(0,3*e):""},encodeAsJava=function(e){var t="";for(e=/^(https?:|file:)?\/\//i.test(e)?encodeURI(e):encodeURIComponent(e),i=0;i<e.length;i++)t+=encodeJ[e.charCodeAt(i)]||e.charAt(i);return t},transcodeJavaURIComponent=function(e){var t="";for(i=0;i<e.length;i++)t+=transCodeJ[e.charCodeAt(i)]||e.charAt(i);return t},extend=function(){if(arguments.length<2)return arguments[0]||{};for(var e=arguments[0],t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},passDefaults=function(e,t,n){if(e&&t)if(typeof n!==UNDEF){n=n.split(",");for(var r=0;r<n.length;r++)e.hasOwnProperty(n[r])&&(t[n[r]]=e[n[r]])}else for(var o in e)t[o]=e[o]},readUserPrefs=function(e,t){if(typeof t!==UNDEF&&e){t=t.split(",");for(var n,r=0;r<t.length;r++)null!==(n=$.cookie(t[r]))&&(e[t[r]]=n)}},savePrefs=function(e,t,n){var r,o,i={};for(r in t)o=t[r],e.hasOwnProperty(o)&&(i[o]=e[o]);i&&$.cookie(typeof n===UNDEF?"lb_pref":n,i)},loadPrefs=function(e,t,n){var r,o,i=$.cookie(typeof n===UNDEF?"lb_pref":n);if(i)for(r in t)o=t[r],i.hasOwnProperty(o)&&(e[o]="true"===i[o]||"false"===i[o]?!!i[o]:i[o])},addParam=function(e,t,n){if(HISTORY){var r=window.location.hash;r&&(history.state?(history.state.hasOwnProperty("img")&&(history.state.img=encodeURIComponent(history.state.img)),t=extend(history.state,t)):("#"===r.charAt(0)&&(r=r.substring(1)),t=extend(r.objectify(),t))),(r="#"+paramize(t))!==window.location.hash&&history.pushState(t,typeof n===UNDEF?"":n,r.length>1?r:e||"index.html")}},setParam=function(e,t,n){if(HISTORY){var r="#"+paramize(t);r!==window.location.hash&&history.pushState(t,typeof n===UNDEF?"":n,r.length>1?r:e||"index.html")}},removeParam=function(e,t,n){if(HISTORY){var r,o=window.location.hash;o&&(typeof t===UNDEF?(o="",history.pushState("","",e||"index.html")):("#"===o.charAt(0)&&(o=o.substring(1)),(r=o.objectify()).hasOwnProperty(t)&&(delete r[t],o="#"+paramize(r)),history.pushState(r,typeof n===UNDEF?"":n,o.length>1?o:e||"index.html")))}},removeSearch=function(e){HISTORY&&history.replaceState(history.state,typeof e===UNDEF?"":e,window.location.href.replace(window.location.search,""))},restoreScrollPosition=function(){if(LOCALSTORAGE){var e=$.cookie("last-touch"),t=(new Date).valueOf(),n=$.cookie(REL_PATH+PAGE_NAME+":scroll-pos"),r=function(e,t){$("html").height()>=e?$("html").scrollTop(e):t&&setTimeout(r,1e3,e,t-1)};e&&t-e<2e3&&n&&r(n,6)}},saveScrollPosition=function(){if(LOCALSTORAGE){var e=$("html").scrollTop();$.cookie(REL_PATH+PAGE_NAME+":scroll-pos",e||null,300),$.cookie("last-touch",(new Date).valueOf(),300)}},readParam=function(){if(HISTORY){if(history.state)return history.state.hasOwnProperty("img")&&(history.state.img=encodeURIComponent(history.state.img)),history.state;var e=window.location.hash;return"#"===e.charAt(0)&&(e=e.substring(1)),e.objectify()}return null},pushAll=function(e,t){if(e instanceof Array)if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)e.push(t[n]);else e.push(t)},pushNew=function(e,t){if(e instanceof Array)if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)e.includes(t[n])||e.push(t[n]);else e.includes(t)||e.push(t)},videoDurationMs=function(e){var t=e.match(/(\d{2})\:(\d{2})\:(\d{2})\.(\d+)/);return t?parseInt(t[4])+1e3*parseInt(t[3])+6e4*parseInt(t[2])+36e5*parseInt(t[1]):null},guessDimensions=function(e){var t,n,r;return e?(t=e.match(/<\w+\s[^>]*\swidth="([\d\.]+)"/i)||e.match(/<\w+\s[^>]*\sstyle=".*width:\s?([\d\.]+)(r?em|px)"/i),n=e.match(/<\w+\s[^>]*\sheight="([\d\.]+)"/i)||e.match(/<\w+\s[^>]*\sstyle=".*height:\s?([\d\.]+)(r?em|px)"/i),t?(r[0]=parseFloat(t[1]),t.length>2&&"px"!==t[2]&&(r[0]*=16),n?(r[1]=parseFloat(n[1]),n.length>2&&"px"!==n[2]&&(r[1]*=16)):r[1]=.75*r[0],r):null):null},currencyToHtml={USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",HUF:"Ft",CAD:"CAN$",AUD:"AU$",RUB:"&#8381;"},codeToCurrency=function(e){return currencyToHtml.hasOwnProperty(e)?currencyToHtml[e]:e},currencyToHtmlShort={USD:"$",EUR:"&euro;",GBP:"&pound;",JPY:"&yen;",HUF:"Ft",CAD:"$",AUD:"$",RUB:"&#8381;"},codeToShortCurrency=function(e){return currencyToHtmlShort.hasOwnProperty(e)?currencyToHtmlShort[e]:e},printImage=function(e,t,n){if(e){var r=window.open("about:blank","print","location=no,status=no,titlebar=no");r.document.open(),r.document.write('<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>'+(t||"Print")+'</title>\n<script>printOut=function(){window.print();window.close();}<\/script>\n<style>body{margin:0;padding:0;text-align:center;overflow:hidden;}\nimg{display:block;width:100%;height:auto;vertical-align:top;}</style>\n</head>\n<body onLoad="setTimeout(printOut,100)"><img src="'+e+'">'+(n||"")+"</body>\n</html>"),r.document.close()}},getFileSize=function(e,t,n){var r=new XMLHttpRequest;r.open("HEAD",e,!0),r.onreadystatechange=function(){this.readyState==this.DONE&&200===this.status&&typeof t===FUNCTION&&(typeof n!==UNDEF?t.call(this,[this.getResponseHeader("content-length")],n):t.call(this,[this.getResponseHeader("content-length")]))},r.send()},moveInView=function(e){var t=$(e);if(t.length&&t.is(":visible")){var n=t.offset().top,r=navigator.userAgent.match(/(iPod|iPhone|iPad)/)?$("body"):$("html"),o=r.scrollTop();(n<o||n>o+window.outerHeight-80)&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)?window.scrollTo(0,n):r.animate({scrollTop:n},500,function(){r.clearQueue()}))}},xDecrypt=function(e){if("string"!=typeof e)return"";var t,n,r,o=[147,163,87,254,153,4,198,23],i=e.length,a=5*Math.ceil(i/8),s=new Array(a),l="",c=0;for(t=0;t<a;t++)s[t]=0;for(t=0;t<i;t++)(r=e.charCodeAt(t)-48)>9&&(r-=7),r<<=11-c%8,(n=c>>3)<a&&(s[n]|=r>>8,++n<a&&(s[n]|=255&r)),c+=5;for(t=0;t<a;t++)s[t]^=o[t%8];for(a=s[0]|s[1]<<8,r=0,t=4;t<a;t++)l+=String.fromCharCode(s[t]),r+=s[t];return r!=(255&s[2]|s[3]<<8)&&(l=""),l},getStyle=function(t,n){if(t instanceof Element){if(document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(t,"").getPropertyValue(n.unCamelCase());if(t.currentStyle)return e.currentStyle[n]}return null},scrollbarWidth=function(){var e=document.createElement("div"),t=0;return e.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body&&(document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},pageZoomed=function(){return!!window.hasOwnProperty("visualViewport")&&window.visualViewport.scale>ZOOM},playVideo=function(e,t){if(e&&"VIDEO"===e.nodeName)if(e.paused){let n=e.play();typeof n!==UNDEF&&n.then(()=>{addClass(e,"playing"),typeof t===FUNCTION&&t.call(null)}).catch(n=>{"NotAllowedError"===n.name?(e.muted=!0,e.play().then(()=>{console.log("Falling back to muted autoplay! Unmute the video manually!"),addClass(e,"playing"),typeof t===FUNCTION&&t.call(null)}).catch(e=>{console.log("Autoplay rejected. Try starting the video manually!")})):console.log("Video format not supported!")})}else typeof t===FUNCTION&&t.call(null)},fullscreenChanged=0,fullscreenChangedSince=function(){return new Date-fullscreenChanged},hasFullscreen=function(){return!ISIOSDEVICE&&Modernizr.fullscreen},isFullscreen=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullscreen=function(e,t){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)typeof e===FUNCTION&&e.call();else{let n=document.documentElement;n.requestFullscreen?n.requestFullscreen().then(e||(()=>{})).catch(e=>{typeof t===FUNCTION?t.call():console.log("Full-screen error: "+e.message+" ("+e.name+")")}):n.mozRequestFullscreen?(n.mozRequestFullscreen(),e.call()):n.webkitRequestFullscreen?(n.webkitRequestFullscreen(),e.call()):n.msRequestFullscreen&&(n.msRequestFullscreen(),e.call()),fullscreenChanged=new Date}}},exitFullscreen=function(e,t){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement){if(typeof e!==FUNCTION);if(typeof t!==FUNCTION);document.exitFullscreen?document.exitFullscreen().then(e).catch(t):document.mozExitFullscreen?document.mozExitFullscreen().then(e).catch(t):document.webkitExitFullscreen?(document.webkitExitFullscreen(),e.call()):document.msExitFullscreen&&document.msExitFullscreen().then(e).catch(t),fullscreenChanged=new Date}else typeof e===FUNCTION&&e.call()}},orientationChanged=function(e,t){"change"===e.type?e.target.type.startsWith("landscape")&&!isFullscreen()&&requestFullscreen(t):"orientationchange"===e.type&&e.target.innerWidth>e.target.innerHeight&&!isFullscreen()&&requestFullscreen(t)},goFullscreenOnLandscapeChange=function(e){(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled)&&(typeof screen!==UNDEF&&screen.hasOwnProperty("orientation")?screen.orientation.addEventListener("change",orientationChanged,e):window.addEventListener("orientationchange",orientationChanged,e))},wakeLock=null,requestWakeLock=async(e,t)=>{if("wakeLock"in navigator&&"request"in navigator.wakeLock){wakeLock=null;try{wakeLock=await navigator.wakeLock.request("screen"),typeof e===FUNCTION&&e.call()}catch(e){typeof t===FUNCTION&&t.call(err)}}},releaseWakeLock=(e,t)=>{wakeLock&&wakeLock.release().then(()=>{wakeLock=null,typeof e===FUNCTION&&e.call()})},loadExternal=function(e,t){return $.getJSON(e+"data1.json").done(function(e){typeof t===FUNCTION&&t.call(e)}).fail(function(t,n,r){DEBUG&&console.log('Not an album, or cannot load album database for: "'+e+'".')})},loadGoogleAnalytics=function(e,t,n){if(!LOCAL){var r=xDecrypt(e);if("classic"===t){var o=o||[];o.push(["_setAccount",r]),o.push(["_trackPageview"]),function(e){var t=e.createElement("script");t.async=!0,t.src=("https:"===e.location.protocol?"https://ssl":"http://www")+(n?".stats.g.doubleclick.net/dc.js":".google-analytics.com/ga.js");var r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}(document)}else"universal"===t?(!function(e,t,n,r,o,i,a){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",a.parentNode.insertBefore(i,a)}(window,document,"script",0,"ga"),ga("create",r,"auto"),n&&ga("require","displayfeatures"),ga("send","pageview")):gtag("config",r,{send_page_view:!0})}},loadGoogleAPI=function(e,t){if(!LOCAL){!function(e,t,n,r,o,i,a){(i=t.createElement(n)).appendChild(t.createTextNode("{parsetags:'explicit',lang:'${lang}'}")),a=t.getElementsByTagName(n)[0],i.async=1,i.src=r,a.parentNode.insertBefore(i,a)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//apis.google.com/js/platform.js");var n=30,r=function(){typeof gapi===UNDEF?n--?setTimeout(r,200):"console"in window&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi[t].go()},200)};e&&r()}},loadFacebookAPI=function(e,t){LOCAL||(window.fbAsyncInit=function(){typeof jQuery!==UNDEF&&jQuery(".social-links").trigger("updateLinks")},function(n,r,o){var i,a=n.getElementsByTagName(r)[0];n.getElementById(o)||((i=n.createElement(r)).id=o,i.src="https://connect.facebook.net/"+(t||"en_US")+"/sdk.js#xfbml=1&version=v3.0&appId="+xDecrypt(e),a.parentNode.insertBefore(i,a))}(document,"script","facebook-jssdk"))},loadDisqusAPI=function(e){LOCAL||function(t,n){(n=t.createElement(n)).async=1,n.src="https://"+xDecrypt(e)+".disqus.com/embed.js",n.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(n)}(document,"script")},loadPinterestAPI=function(){LOCAL||function(e,t){(t=e.createElement(t)).async=1,t.src="https://assets.pinterest.com/js/pinit.js",(e.head||e.body).appendChild(t)}(document,"script")},loadAPIs=function(e,t){if(e&&!isEmpty(e))for(var n in e)if(typeof t===UNDEF||t[n])switch(n){case"googleAnalytics":loadGoogleAnalytics(e[n][0],e[n][1],e[n][2]);break;case"googlePlus":loadGoogleAPI(e[n][0],e[n][1]);break;case"facebook":loadFacebookAPI(e[n][0]);break;case"disqus":loadDisqusAPI(e[n][0]);break;case"pinterest":loadPinterestAPI()}},askTrackingConsent=function(e,t){if((t&&!isEmpty(t)||e.cookiePolicy)&&!LOCAL){e=$.extend({},{stay:15},e),t=t||{};var n=getTranslations({cookiePolicyText:"This album is using cookies to remember your preferences. It does not track you, neither it stores personal data.",cookiePolicyLearnMore:"Learn more",cookiePolicyAgree:"Got it",gdprComplianceText:"This site is using the following external services that might track your visits anonymously. Disabling tracking will stop their functionality.",allowAll:"Allow all",denyAll:"Deny all",allowSelected:"Allow selected"}),r=$.cookie("trackingConsent"),o=!1,i=!1,a="icon-checkmark",s=function(e){var t=$(e.target),n=t.hasClass(a);t.toggleClass(a,!n),l()},l=function(){var e=$("#trackingConsent span."+a).length>0;$("#allow,#deny").toggle(!e),$("#allowsel").toggle(e)},c=function(e){var n,r=$("#trackingConsent span");return n=$.extend({},$.cookie("trackingConsent"),{cookie:1}),"allow"===this.id?r.each(function(){$(this).addClass(a),n[$(this).attr("id")]=1}):"deny"===this.id?r.each(function(){$(this).removeClass(a),n[$(this).attr("id")]=0}):"allowsel"===this.id&&r.each(function(e){n[$(this).attr("id")]=$(this).hasClass(a)}),$.cookie("trackingConsent",n,31622400),u(),loadAPIs(t,n),!1},u=function(){$("#cookiepolicy").fadeOut(500,function(){$(this).remove()})};if(r?(o=!function(){for(var e in t)if(!r.hasOwnProperty(e))return!1;return!0}(),i=e.cookiePolicy&&!r.hasOwnProperty("cookie")):(o=!isEmpty(t),i=e.hasOwnProperty("cookiePolicy")),o||i){var d,p=$("<div>",{id:"cookiepolicy"}).appendTo($("body"));if(p.append($("<a>",{class:"close",html:"&times;"}).on("click",u)),i&&(d=$("<p>",{id:"cookiePolicy",html:n.cookiePolicyText}).appendTo(p),o||d.append($("<a>",{id:"agree",class:"btn icon-ok",text:" "+n.cookiePolicyAgree}).on("click",c))),o){d=$("<p>",{id:"trackingConsent",html:n.gdprComplianceText}).appendTo(p);for(var f in t)d.append($("<span>",{id:f,class:"checkbox"+(r&&r[f]?" "+a:""),html:"&nbsp;"+f.capitalize()}).on("click",s));d.append($("<a>",{id:"allow",class:"btn icon-ok",text:" "+n.allowAll}).on("click",c)),d.append($("<a>",{id:"deny",class:"btn icon-close",text:" "+n.denyAll}).on("click",c)),d.append($("<a>",{id:"allowsel",class:"btn icon-ok",text:" "+n.allowSelected}).on("click",c)),l()}e.cookiePolicyUrl&&d.append(" ").append($("<a>",{text:n.cookiePolicyLearnMore,target:"_blank",href:e.cookiePolicyUrl})),p.fadeIn(500),setTimeout(function(){$("#cookiepolicy").fadeOut(500,function(){$(this).remove()})},1e3*e.stay)}else loadAPIs(t,r)}};addClass(document.getElementsByTagName("html")[0],(TOUCHENABLED?"":"no-")+"touch"),addClass(document.getElementsByTagName("html")[0],(HIDPI?"":"no-")+"hidpi"),function(e,t){"use strict";var n,r,o=!1,i=1;log=function(t){var a=function(e){if(Array.isArray(e)){for(var t="",n=0;n<e.length;n++)t+=a(e[n])+", ";return"[ "+t.substring(0,t.length-2)+" ]"}if("object"==typeof e){t="";for(var n in e)t+=n+": "+a(e[n])+",<br>";return"{ "+t+" }"}return isNaN(e)?e:parseInt(e)===e?e:e.toFixed(4)};DEBUG&&!o&&(n||(n=e('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:0.75em;z-index:999999"></div>').hover(function(){o=!0},function(){o=!1}).appendTo("body")),t===r?n.children().first().empty().html(r+" <sup>("+ ++i+")</sup>"):(e('<div style="height:3em;overflow:auto;">'+a(t)+"</div>").prependTo(n),r=t,i=1))},e.fn.logEvents=function(t){if(DEBUG){var n=t||"mousedown mouseup mouseover mouseout mousewheel wheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){e(this).on(n,function(e){return typeof e===UNDEF?log("Undefined event"):e.target?"log"!==e.target.id&&log(e.type+' <span style="padding:0 4px;font-size:0.75em;background-color:#000;border-radius:4px;"><b>'+(e.target.nodeName?e.target.nodeName.toLowerCase():"???")+"</b>"+(e.target.id?":"+e.target.id:"")+"</span>"+(e.relatedTarget?' <span style="padding:0 4px;font-size:0.6em;background-color:#800;border-radius:4px;"><b>'+e.relatedTarget.nodeName.toLowerCase()+"</b>"+(e.relatedTarget.id?":"+e.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},e.fn.logCss=function(t,n,r){if(DEBUG){r=r||20,n=n||2e3;var o=new Date;return this.each(function(){var i=e(this),a=function(e){var t=new Date-o;log(t+"&nbsp;::&nbsp;"+e+" = "+i.css(e)),t>n&&clearInterval(s)},s=setInterval(function(){if(Array.isArray(t))for(var e=0;e<t.length;e++)a(t[e]);else a(t)},r)})}},e.fn.setFocus=function(e){this.length&&(typeof e!==UNDEF?this[0].focus(e):this[0].focus())},void 0===e.fn.deserialize&&(e.fn.deserialize=function(t){if(!t)return this;var n=e(this),r=t.replace(/\+/g,"%20").split("&");return e.each(r,function(e,t){var r=t.split("="),o=decodeURIComponent(r[0]),i=null!==r[1]?decodeURIComponent(r[1]):"",a=n.find("[name="+o+"]");if(!a.length)return!0;if("radio"===a[0].type||"checkbox"===a[0].type){var s=a.filter('[value="'+i+'"]'),l=s.length;l||"on"!==i?s.prop("checked",l):a.eq(0).prop("checked",!0)}else a.val(i)}),this}),void 0===e.when.all&&(e.when.all=function(t){var n=new e.Deferred;return e.when.apply(e,t).then(function(){n.resolve(Array.prototype.slice.call(arguments))},function(){n.fail(Array.prototype.slice.call(arguments))}),n}),e.fn.getRotate=function(e){if(e&&e.length){var t,n=window.getComputedStyle(e[0],null),r=n.getPropertyValue("transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-webkit-transform");if(r&&(t=r.match(/matrix3d\(([^\)]+)\)/)))return t=t.split(/\s*,/),Math.round(Math.atan2(parseFloat(t[1]),parseFloat(t[0]))*(180/Math.PI))}return 0},e.fn.getMatrix=function(e){if(e&&e.length){var t,n=window.getComputedStyle(e[0],null),r=n.getPropertyValue("transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-webkit-transform"),o=[];r&&(t=r.match(/matrix3d\(([^\)]+)\)/))&&t&&t.length>1&&(t=t[1].split(/\s*,/)).forEach(function(e){o.push(parseFloat(e))})}return o},e.fn.waitAllImg=function(t,n,r){if(this.length){var o=e(this),i=[];return function(t){return t.filter("img[src]").not('[src=""]').each(function(){i.push(function(t){var n=new e.Deferred,r=new Image;return r.onload=function(){n.resolve(t)},r.onerror=function(){n.reject(new Error("Image not found: "+t.src))},r.src=t.src,n}(this))}),t.filter("video[src]").not('[src=""]').each(function(){i.push(function(t){var n=new e.Deferred,r=document.createElement("VIDEO");return r.addEventListener("loadedmetadata",function(){n.resolve(t)}),r.addEventListener("error",function(){n.reject(new Error("Video not found: "+t.src))}),r.src=t.src,n}(this))}),e.when.all(i)}(o).then(function(e){typeof n===FUNCTION&&n!==t&&n.call(e)},function(e){typeof r===FUNCTION&&r.call(e)}).then(function(){typeof t===FUNCTION&&t.call(o)}),this}t.call(o)},e.fn.askPermission=function(t){var n=getTranslations({restrictedLinkTitle:"Restricted material",restrictedLinkQuestion:"Please verify your age to proceed!",restrictedLinkYes:"I´m over 18",restrictedLinkNo:"I´m below 18"});return e(this).filter("[href]").each(function(){e(this).data("href",e(this).attr("href")),e(this).attr("href",null),e(this).on("click._lap_",function(t){var r=e.extend({},n,function(e){var t={},n=e.data("ask-permission");return n&&null!==(n=n.split("::"))[0]&&(t.restrictedLinkTitle=n[0],null!==n[1]&&(t.restrictedLinkQuestion=n[1],null!==n[2]&&(t.restrictedLinkYes=n[2],null!==n[3]&&(t.restrictedLinkNo=n[3])))),t}(e(this)));return t.preventDefault(),r.link=e(this).data("href"),e("body").modal(e('<div class="text-center">'+r.restrictedLinkQuestion+"</div>"),[{t:r.restrictedLinkYes,c:"icon-checkmark",h:function(){window.location.href=r.link}},{t:r.restrictedLinkNo,c:"icon-close alert",h:function(){return!0}}],{class:"small warning",title:r.restrictedLinkTitle}),!1})})}}(jQuery);
const J={ALBUM:"album",FOLDERS:"folders",NAME:"name",PATH:"path",THUMB:"thumb",IMAGE:"image",WIDTH:"width",HEIGHT:"height",RENDITIONS:"renditions",ORIGINAL:"original",OBJECTS:"objects",FILEDATE:"fileDate",COMMENT:"comment",TITLE:"title",KEYWORDS:"keywords",COUNTERS:"counters",DEEPCOUNTERS:"deepCounters",FILESIZE:"fileSize",CATEGORY:"category",RATING:"rating",CAMERA:"camera",VIDEO:"video",DURATION:"duration",FPS:"fps",HIDDEN:"hidden",LEVEL:"level",PATHREF:"pathRef",PARENTREF:"parentRef",RELPATH:"relPath",FOLDERCAPTION:"folderCaption",IMAGECAPTION:"imageCaption",THUMBCAPTION:"thumbCaption",PHOTODATA:"photodata",LOCATION:"location",REGIONS:"regions",SHOP:"shop",EXTERNAL:"external",PROJECTIONTYPE:"projectionType",ORIGINALFILE:"originalFile",DATES:"dates",ADDED:"added",DATETAKEN:"dateTaken",FILEMODIFIED:"fileModified",DATERANGE:"dateRange",MOSTPHOTOS:"mostphotos",HIDEFOTOMOTO:"hideFotomoto",FOTOMOTOCOLLECTION:"fotomotoCollection",AUDIOCLIP:"audioClip",PANORAMA:"panorama",FILTERS:"filters",SORT:"sort",VISITORRATING:"visitorRating",OBJ:"obj",LOADCOUNTER:"loadcounter",TOTAL:"total",FOLDERINDEX:"folderindex",READY:"ready",ONREADY:"onReady",DEEP:"deep",SIZE:"size",CONT:"cont",TYPE:"type"},JCAMERAFIELDS=["aperture","exposureTime","originalDate","cameraModel","location","focusDistance","focalLength35mm","cameraMake","resolution","isoEquivalent","flash","focalLength"];var Album=function(e,t){let r,n,o,a=null,l={treeFile:"tree.json",dataFile:"data1.json",deepDataFile:"deep-data.json",indexName:"index.html",folderImageFile:"folderimage.jpg",folderImageDims:[1200,800],folderThumbFile:"folderthumb.jpg",folderThumbDims:[1024,768],thumbDims:[240,180],thumbsDir:"thumbs",slidesDir:"slides",hiresDir:"hi-res",hiDpiThumbs:!1,hiDpiImages:!1,thumbsFillFrame:!0,audioPoster:"audio.poster.png",defaultAudioPosterSize:[628,360],videoPoster:"video.poster.png",defaultVideoPosterSize:[628,360],rootPath:"",relPath:"",loadDeep:!1,lazy:!0,fatalError:(e,t)=>D("Error: "+(typeof t===UNDEF?translate(e):translate(e).replace(/\{0\}/g,t))),possibleTypes:["folder","webPage","webLocation","image","video","audio","other"]},E=getTranslations({and:"and",from:"From {0}"}),s=null,i="",O=[],h=[],f=[],p=!1,T=!1,u=()=>n&&n.hasOwnProperty(J.DEEP)&&n[J.DEEP],D=e=>{console&&typeof e!==UNDEF&&(e.match(/^Error\:/i)&&console.error("jalbum-album.js "+e),typeof DEBUG!==UNDEF&&DEBUG&&(e.match(/^Warning\:/i)?console.warn("jalbum-album.js "+e):e.match(/^Info\:/i)?console.info("jalbum-album.js "+e):console.log("jalbum-album.js "+e)))},A=e=>decodeURIComponent(e.slice(e.lastIndexOf("/")+1)),I=e=>{var t=G(e).match(/\.(\w+)$/);return t?t[1]:""},c=e=>e.hasOwnProperty(J.CATEGORY)&&-1!=="image.video.audio.other".indexOf(e[J.CATEGORY]),y=function(){if(arguments.length){let e=[];for(let t,r=0;r<arguments.length;r++)(t=arguments[r]).length&&("/"===t?e=[]:("/"===t[0]&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t.length&&e.push(t)));return e.join("/")}return""},P=e=>e&&e.hasOwnProperty(J.PATHREF)&&e[J.PATHREF]?O[e[J.PATHREF]-1]:"",N=e=>typeof e!==UNDEF?null!==s?y(s,P(e)):(e=>e&&e.hasOwnProperty(J.RELPATH)&&e[J.RELPATH]?h[e[J.RELPATH]-1]:"")(e):s||"",R=e=>typeof e!==UNDEF?P(e):"",F=e=>{if(typeof e!==UNDEF){let t=N(e),r=e[J.CATEGORY]||"folder";return"folder"===r?t:"video"===r?y(t,e[J.VIDEO][J.PATH]):"audio"===r||"other"===r||e.hasOwnProperty(J.ORIGINAL)?y(t,e[J.ORIGINAL][J.PATH]):"image"===r?y(t,e[J.IMAGE][J.PATH]):"webPage"===r?y(t,e[J.PATH]):e[J.PATH]}return null},g=e=>typeof e!==UNDEF?P(e)+("folder"!==e[J.CATEGORY]?e[J.PATH]:""):null,m=e=>{if(typeof e!==UNDEF){if("video"===e[J.CATEGORY])return[e[J.VIDEO][J.WIDTH],e[J.VIDEO][J.HEIGHT]];if(e.hasOwnProperty(J.ORIGINAL))return[e[J.ORIGINAL][J.WIDTH],e[J.ORIGINAL][J.HEIGHT]]}return null},L=e=>typeof e!==NUMBER||e<=0?n:--e>O.length?(D("Error: out of bounds path reference ("+e+")!"),null):C(O[e]),C=e=>{if(typeof e===UNDEF)return null;if(!e.length)return n;e.endsWith("/")&&(e=e.slice(0,-1));let t,r=n,o=e.split("/");for(t=0;t<o.length;t++){if(u()){if(r.hasOwnProperty(J.OBJECTS)&&(r=r[J.OBJECTS].find(e=>"folder"===e[J.CATEGORY]&&e[J.PATH]===o[t])))continue}else if(r.hasOwnProperty(J.FOLDERS)&&(r=r[J.FOLDERS].find(e=>e[J.PATH]===o[t])))continue;return null}return t===o.length?r:null},S=e=>{if(typeof e===UNDEF&&(e=o),e===n)return null;let t=L(e.hasOwnProperty(J.PARENTREF)?e[J.PARENTREF]:e[J.PATHREF]);return t===e?null:t},H=function(e,t,r){if(typeof t!==FUNCTION)return;let o=function(e,t,n){if(e.hasOwnProperty(J.OBJECTS)){let o=e[J.OBJECTS].find(function(e){return e.hasOwnProperty(J.ORIGINAL)&&e[J.ORIGINAL][J.PATH]===t||e[J.PATH]===t});typeof o===UNDEF&&(o=null),typeof r!==UNDEF?n.call(o,r):n.call(o)}};if(e)if(e.endsWith("/"))typeof r!==UNDEF?t.call(C(e),r):t.call(C(e));else{let r=e.lastIndexOf("/"),a=-1===r?n:C(e.substring(0,r)),l=e.substring(r+1);a&&(T||a.hasOwnProperty(J.READY)&&a.ready?o(a,l,t):_(a,function(e){o(e[0],e[1],e[2])},[l,t]))}else typeof r!==UNDEF?t.call(n,r):t.call(n);return null},G=e=>"video"===e[J.CATEGORY]?A(e[J.VIDEO][J.PATH]):e.hasOwnProperty(J.ORIGINAL)?A(e[J.ORIGINAL][J.PATH]):e[J.NAME],U=e=>(e=e||o).hasOwnProperty(J.LEVEL)?e[J.LEVEL]:U(S(e)),M=e=>(e||o)[J.TITLE]||"",B=e=>((e||o)[J.NAME]||"").replace(/\.\w+$/,"").replace(/_/g," "),x=(e,t,r)=>{if(WEBP_LOSSY||(e=e.filter(e=>!e.name.endsWith(".webp"))),e.length>1){let n=t[0]*PIXELRATIO,o=t[1]*PIXELRATIO;e.forEach(e=>{let t=r?Math.max(n/e.width,o/e.height):Math.min(n/e.width,o/e.height);e.match=t>1?3*(1-1/t):1-t}),e.sort((e,t)=>e.match-t.match)}return e[0]},b=e=>{let t=0,r=typeof e===UNDEF?o:e;return r.hasOwnProperty(J.DEEPCOUNTERS)&&r[J.DEEPCOUNTERS].hasOwnProperty(J.FOLDERS)?r[J.DEEPCOUNTERS][J.FOLDERS]+1:(u()?r.hasOwnProperty(J.OBJECTS)&&r[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||(t+=b(e))}):r.hasOwnProperty(J.FOLDERS)&&r[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||(t+=b(e))}),r.hasOwnProperty(J.DEEPCOUNTERS)||(r[J.DEEPCOUNTERS]={}),r[J.DEEPCOUNTERS][J.FOLDERS]=t,t+1)},Y=e=>n.hasOwnProperty(e)?n[e]:null,v=(t,r)=>{let n={};do{t.hasOwnProperty(r)&&(n=e.extend(!0,{},t[r],n))}while(t=S(t));return Object.getOwnPropertyNames(n).length?n:null},W=(t,r)=>{if(r.indexOf(".")>=0){if("album"===(r=r.split("."))[0])return Y(r[1]);do{if(t.hasOwnProperty(r[0]))return e.extend(!0,{},t[r[0]][r[1]])}while(t=S(t));return null}do{if(t.hasOwnProperty(r))return e.extend(!0,{},t[r])}while(t=S(t));return null},V=(e,t)=>{let r=t[J.PATH],n=-1;return u()?e.hasOwnProperty(J.OBJECTS)&&(n=e[J.OBJECTS].findIndex(e=>"folder"===e[J.CATEGORY]&&e[J.PATH]===r)):e.hasOwnProperty(J.FOLDERS)&&(n=e[J.FOLDERS].findIndex(e=>e[J.PATH]===r)),n},j=function(t,r,n){if(!Array.isArray(t))return null;Array.isArray(r)||(n=r||{},r=null);let o=e.extend({sortBy:"original",reference:J.DATETAKEN,reverse:!1,foldersFirst:!0},n);switch(o.sortBy){case"random":t.sort(()=>.5-Math.random()),r&&r.sort(()=>.5-Math.random());break;case"date":let e=o.reference;o.reverse?(t.sort((t,r)=>(t.hasOwnProperty(J.DATES)?t[J.DATES][e]:t[J.FILEDATE])-r.hasOwnProperty(J.DATES)?r[J.DATES][e]:r[J.FILEDATE]),r&&r.sort((e,t)=>e[J.FILEDATE]-t[J.FILEDATE])):(t.sort((t,r)=>(r.hasOwnProperty(J.DATES)?r[J.DATES][e]:r[J.FILEDATE])-t.hasOwnProperty(J.DATES)?t[J.DATES][e]:t[J.FILEDATE]),r&&r.sort((e,t)=>t[J.FILEDATE]-e[J.FILEDATE]));break;case J.NAME:o.reverse?(t.sort((e,t)=>(""+e[J.NAME]).localeCompare(""+t[J.NAME])),r&&r.sort((e,t)=>(""+e[J.NAME]).localeCompare(""+t[J.NAME]))):(t.sort((e,t)=>(""+t[J.NAME]).localeCompare(""+e[J.NAME])),r&&r.sort((e,t)=>(""+t[J.NAME]).localeCompare(""+e[J.NAME])));break;case J.FILESIZE:o.reverse?t.sort((e,t)=>e[J.FILESIZE]-t[J.FILESIZE]):t.sort((e,t)=>t[J.FILESIZE]-e[J.FILESIZE]);break;default:o.reverse&&(t.reverse(),r&&r.reverse())}return r?o.foldersFirst?r.concat(t):t.concat(r):t},k="../../../../../../../../../../../../../../../../../../../../",X=function(){let e=function(t,r,n,o){let a=r?y(n,t[J.PATH]):"",E=r?(e=>{if(typeof e===UNDEF||!e)return 0;"/"!==e.slice(-1)&&(e+="/");let t=O.indexOf(e);return t>=0?t+1:O.push(e)})(a):0,i=null===s?(e=>{if(typeof e===UNDEF||!e)return 0;"/"!==e.slice(-1)&&(e+="/");let t=h.indexOf(e);return t>=0?t+1:h.push(e)})(function(e,t){if(typeof e===UNDEF||!e.length||"/"===e)return t||"";if(typeof t===UNDEF||!t.length||"/"===t)return k.slice(0,3*e.split("/").length);if(e===t)return"";for(e=e.split("/"),t=t.split("/");e.length&&t.length&&e[0]===t[0];)e.shift(),t.shift();return k.slice(0,3*e.length)+t.join("/")}(l.relPath,a)):-1;if(t[J.LEVEL]=r,t[J.PATHREF]=E,null===s&&(t[J.RELPATH]=i),t.hasOwnProperty(J.CATEGORY)||(t[J.CATEGORY]="folder"),r&&(t[J.PARENTREF]=o),t[J.THUMB][J.PATH].startsWith(t[J.PATH]+"/"+l.thumbsDir)&&(t[J.THUMB][J.PATH]=t[J.THUMB][J.PATH].slice(t[J.PATH].length+1)),l.loadDeep){t[J.OBJECTS].filter(e=>"folder"!==e[J.CATEGORY]).forEach(e=>{e[J.PATHREF]=E,null===s&&(e[J.RELPATH]=i)});t[J.OBJECTS].filter(e=>"folder"===e[J.CATEGORY]).forEach((n,o)=>{t[J.FOLDERS]=[],t[J.FOLDERS].push(o++),e(n,r+1,a,E)})}else t.hasOwnProperty(J.FOLDERS)&&t[J.FOLDERS].forEach(t=>e(t,r+1,a,E))};e(n,0,"",0)},_=function(e,t,r){e&&typeof t!==UNDEF&&(T||e.hasOwnProperty(J.READY)&&e[J.READY]?typeof r!==UNDEF?t(e,r):t(e):(e.hasOwnProperty(J.ONREADY)||(e[J.ONREADY]=[]),typeof r!==UNDEF?e[J.ONREADY].push([t,r]):e[J.ONREADY].push([t])))},z=function(t,r){if(t.hasOwnProperty(J.OBJECTS))typeof doneFn===FUNCTION&&doneFn.call(this,t);else{let o=y(N(t),l.dataFile)+i;f||(f=[]),f.push(e.getJSON(o).done(function(e){!function(e,t){let r,o=0;e[J.OBJECTS]=[],t[J.OBJECTS].forEach(t=>{if(n[J.LOADCOUNTER][t[J.CATEGORY]]++,n[J.LOADCOUNTER][J.TOTAL]++,"folder"===t[J.CATEGORY])if(o<e[J.FOLDERS].length){r=e[J.FOLDERS][o];for(let e in t)e===J.OBJECTS||e===J.ALBUM||r.hasOwnProperty(e)||(r[e]=t[e]);(t={})[J.FOLDERINDEX]=o++}else D('Database error: Folder count inconsistency in folder "'+e[J.NAME]+'". tree.json <> data1.json');else t[J.PATHREF]=e[J.PATHREF],t[J.RELPATH]=e[J.RELPATH];e[J.OBJECTS].push(t)}),e[J.READY]=!0,e.hasOwnProperty(J.ONREADY)&&Array.isArray(e[J.ONREADY])&&(e[J.ONREADY].forEach(t=>{t.length>1?t[0](e,t[1]):t[0](e)}),e[J.ONREADY]=[])}(t,e),typeof doneFn===FUNCTION&&doneFn.call(this,t)}).fail(function(e,r,n){D('Error: Objects could not be loaded for "'+o+'": '+r+", "+n),typeof doneFn===FUNCTION&&doneFn.call(this,t)})),r&&t.hasOwnProperty(J.FOLDERS)&&t[J.FOLDERS].forEach(e=>z(e,!0))}},Z=function(){n&&(n[J.LOADCOUNTER]={},n[J.LOADCOUNTER][J.TOTAL]=0,l.possibleTypes.forEach(e=>{n[J.LOADCOUNTER][e]=0}))},K=function(){return null!==(o=C(l.relPath))||(typeof l.fatalError===FUNCTION&&l.fatalError.call(this,"noSuchFolder",l.relPath),!1)},$=function(){f=[],z(l.lazy?o:n,!l.lazy),e.when.apply(e,f).done(function(){let e=new Date;typeof DEBUG!==UNDEF&&DEBUG&&D(f.length+" folder(s) loaded: "+(e-a)+"ms"),p=!0,f=null,typeof l.ready===FUNCTION?(l.ready.call(this),l.ready=null):n.hasOwnProperty(J.FOLDERS)||typeof l.deepReady===FUNCTION&&(l.deepReady.call(this),l.deepReady=null)}).fail(function(e,t,r){typeof l.fatalError===FUNCTION&&l.fatalError.call(this,"cantLoadDataForFolder",o[J.PATH])})},q=function(e){e.hasOwnProperty(J.READY)||(e[J.READY]=!1),e.hasOwnProperty(J.ONREADY)||(e[J.ONREADY]=[]),l.loadDeep?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"===e[J.CATEGORY]&&q(e)}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>q(e))},Q=function(t,r){if(T)return void t.call(n);let o=new Date,a=y(s||l.rootPath,l.deepDataFile)+i;return e.getJSON(a).done(function(e){typeof DEBUG!==UNDEF&&DEBUG&&(D("Deep data loaded: "+(new Date-o)+"ms"),o=new Date),function(e){if(l.loadDeep=!0,typeof n===UNDEF)(n=e)[J.DEEP]=!0,Z(),X();else{let t=n,r=function(e,t){for(let r in e)r===J.FOLDERS||r===J.ALBUM||r===J.OBJECTS||r===J.READY||r===J.ONREADY||t.hasOwnProperty(r)||(t[r]=e[r]);if(e.hasOwnProperty(J.ONREADY)&&e[J.ONREADY].forEach(e=>e.length>1?e[0](t,e[1]):e[0](t)),t.hasOwnProperty(J.OBJECTS)){let n=e[J.PATHREF],o=e[J.RELPATH]||null,a=0;t[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]?(e[J.PATHREF]=n,o&&(e[J.RELPATH]=o)):(a||(t[J.FOLDERS]=[]),t[J.FOLDERS].push(a++))}),e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{r(e,t[J.OBJECTS].find(t=>"folder"===t[J.CATEGORY]&&t[J.PATH]===e[J.PATH]))})}};(n=e)[J.DEEP]=!0,r(t,n)}}(e),K()&&(T=!0,typeof t===FUNCTION?t.call(this):(typeof l.ready===FUNCTION&&(l.ready.call(this),l.ready=null),typeof l.deepReady===FUNCTION&&(l.deepReady.call(this),l.deepReady=null)))}).fail(function(e,t,n){typeof l.fatalError===FUNCTION&&l.fatalError.call(this,"databaseAccessDenied",a),typeof r===FUNCTION&&r.call(this)})};return t&&(typeof DEBUG!==UNDEF&&DEBUG&&D("new Album("+JSON.stringify(t)+");"),(t=>{if(a)return a;a=new Date,typeof t!==UNDEF&&e.extend(l,t),p=T=!1,l.hasOwnProperty("albumPath")&&"/"!==(s=l.albumPath).slice(-1)&&(s+="/"),r=(e=>{if(typeof e===UNDEF)return window.location.href.substring(0,window.location.href.lastIndexOf("/"));if(e.match(/^https?\:\/\//i))return e;if("/"===e[0])return window.location.origin+e;{let t=window.location.href;for(t=t.substring(0,t.lastIndexOf("/")),e.endsWith("..")&&(e+="/");e.startsWith("../");)t=t.substring(0,t.lastIndexOf("/",t.length-2)),e=e.slice(3);return t+e}})(s||l.rootPath),l.hasOwnProperty("makeDate")&&(i="?"+l.makeDate),l.loadDeep||l.hasOwnProperty("deepReady")?Q():function(t){let r=new Date,o=y(s||l.rootPath,l.treeFile)+i;l.loadDeep=!1,e.getJSON(o).done(function(e){n=e,Z(),q(n),typeof DEBUG!==UNDEF&&DEBUG&&(D("Tree loaded: "+(new Date-r)+"ms"),r=new Date),K()&&(X(),typeof t===FUNCTION&&t.call(this))}).fail(function(e,t,r){typeof l.fatalError===FUNCTION&&l.fatalError.call(this,"databaseAccessDenied",o)})}($)})(t)),{isImage:e=>e.hasOwnProperty(J.CATEGORY)&&"image"===e[J.CATEGORY],isAudio:e=>e.hasOwnProperty(J.CATEGORY)&&"audio"===e[J.CATEGORY],isVideo:e=>e.hasOwnProperty(J.CATEGORY)&&"video"===e[J.CATEGORY],isLightboxable:c,isCurrentFolder:e=>e===o,getAlbumPath:()=>{if(null!==s)return s;let e=window.location.pathname,t=o[J.LEVEL];do{e=e.substring(0,e.lastIndexOf("/")),t-=1}while(t>=0);return e},getAlbumRootPath:()=>r,getPath:N,getAbsolutePath:e=>e.hasOwnProperty(J.LEVEL)?y(s||r,R(e)):y(s||r,R(e),l.indexName+"#img="+e[J.PATH]),getItemPath:F,getAudioClipPath:e=>typeof e!==UNDEF&&e.hasOwnProperty(J.AUDIOCLIP)?y(N(e),e[J.AUDIOCLIP][J.PATH]):null,getDimensions:e=>{if(typeof e===UNDEF||"other"===e[J.CATEGORY]&&"pdf"===I(e).toLowerCase())return null;if(e.hasOwnProperty(J.EXTERNAL)){let t=e[J.EXTERNAL][J.SIZE];return t?(t=t.split("x"),[t[0],t[1]||Math.round(.75*t[0])]):(t=guessDimensions(e[J.EXTERNAL][J.CONT]))||(e[J.EXTERNAL][J.CONT].includes("vimeo.com")||e[J.EXTERNAL][J.CONT].includes("youtube.com")?(w=1280,(t=e[J.EXTERNAL][J.CONT].match(/.*style="padding(-bottom)?:\s?([\d\.]+)%/))&&t&&t.length>1?[1280,Math.round(w*parseFloat(t[2])/100)]:[1280,720]):[e[J.IMAGE][J.WIDTH],e[J.IMAGE][J.HEIGHT]])}return"audio"===e[J.CATEGORY]&&e[J.IMAGE][J.PATH].endsWith("res/audio.png")?[l.defaultAudioPosterSize[0],l.defaultAudioPosterSize[1]]:"video"===e[J.CATEGORY]?[e[J.VIDEO][J.WIDTH],e[J.VIDEO][J.HEIGHT]]:l.linkOriginals&&l.hiDpiImages?[e[J.IMAGE][J.WIDTH]/2,e[J.IMAGE][J.HEIGHT]/2]:[e[J.IMAGE][J.WIDTH],e[J.IMAGE][J.HEIGHT]]},getOriginalDimensions:m,getMaxDimensions:e=>{if(typeof e!==UNDEF){let t=m(e);if(t)return t;if(e.hasOwnProperty(J.IMAGE)){let r=e[J.IMAGE];if(r.hasOwnProperty(J.RENDITIONS)){t=[r[J.RENDITIONS][0][J.WIDTH],r[J.RENDITIONS][0][J.HEIGHT]];for(let e=1;e<r[J.RENDITIONS].length;e++)r[J.RENDITIONS][e][J.WIDTH]>t[0]&&(t=[r[J.RENDITIONS][e][J.WIDTH],r[J.RENDITIONS][e][J.HEIGHT]]);return t}return l.hiDpiImages?[2*r[J.WIDTH],2*r[J.HEIGHT]]:[r[J.WIDTH],r[J.HEIGHT]]}}return null},getLink:function(e){if(typeof e!==UNDEF)switch(e[J.CATEGORY]){case"folder":return N(e);case"webLocation":return e[J.PATH];case"webPage":return y(N(e),e[J.PATH]);default:return y(N(e),"#img="+e[J.PATH])}return null},getRootPath:e=>typeof e!==UNDEF?y(N(e),e[J.PATH]):null,getFolderPath:R,getRelativeFolderPath:e=>typeof e!==UNDEF?(t=>{let r,n,o=l.rootPath+P(e)+"";for(;(r=o.indexOf("../"))>0;){if(1===r||-1===(n=o.lastIndexOf("/",r-2)))return o.substring(r+3);o=o.substring(0,n)+o.substring(r+2)}return o})():null,getFolder:C,getCurrentFolder:()=>o,getParent:S,getItem:H,getObjects:e=>{let t=typeof e===UNDEF?o:e,r=[];return t.hasOwnProperty(J.OBJECTS)&&t[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]&&r.push(e)}),r},getImages:e=>{let t=typeof e===UNDEF?o:e,r=[];return t.hasOwnProperty(J.OBJECTS)&&t[J.OBJECTS].forEach(e=>{c(e)&&r.push(e)}),r},getFolders:e=>{let t=typeof e===UNDEF?o:e,r=[],n=e=>{let t={};for(let r in e)r!==J.OBJECTS&&r!==J.ALBUM&&r!==J.OBJECTS&&(t[r]=e[r]);return t};return t&&(u()?t.hasOwnProperty(J.OBJECTS)&&t[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e.hidden||r.push(n(e))}):t.hasOwnProperty(J.FOLDERS)&&t[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e.hidden||r.push(n(e))})),r},getMakeDate:()=>new Date(n[J.FILEDATE]),getAlbumTitle:()=>n[J.TITLE]||n[J.NAME],getItemName:G,getExtension:I,getLevel:U,getTitle:M,getName:e=>(e||o)[J.NAME]||"",getLabel:B,getAlt:e=>M(e)||B(e),getComment:e=>(e||o)[J.COMMENT]||"",getThumbPath:e=>y(N(e),e.hasOwnProperty(J.LEVEL)?e[J.THUMB][J.PATH].replace(e[J.PATH]+"/",""):e[J.THUMB][J.PATH]),getIconPath:e=>e[J.THUMB][J.PATH].match(/res\/\w+\.png$/)?e[J.THUMB][J.PATH]:"",getImagePath:e=>y(N(e),e.hasOwnProperty(J.LEVEL)?e[J.THUMB][J.PATH].replace(l.thumbsDir+"/",l.slidesDir+"/"):e.hasOwnProperty(J.ORIGINALFILE)?e[J.ORIGINALFILE]:e.hasOwnProperty(J.IMAGE)?e[J.IMAGE][J.PATH]:e[J.THUMB][J.PATH]),getAbsoluteImagePath:e=>y(r,(e=>y(P(e),e.hasOwnProperty(J.ORIGINALFILE)?e[J.ORIGINALFILE]:e.hasOwnProperty(J.IMAGE)?e[J.IMAGE][J.PATH]:e[J.THUMB][J.PATH]))(e)),getThemeImagePath:e=>y(N(e),l.folderImageFile),getOriginalPath:e=>e.hasOwnProperty(J.ORIGINALFILE)?y(N(e),e[J.ORIGINALFILE]):e.hasOwnProperty(J.ORIGINAL)?y(N(e),e[J.ORIGINAL][J.PATH]):null,getPosterPath:e=>{let t=e[J.CATEGORY],r=e[J.IMAGE][J.PATH];return"audio"!==t&&"video"!==t||r.startsWith(l.slidesDir+"/")?y(N(e),e[J.IMAGE][J.PATH]):y(l.rootPath,"res",l[t+"Poster"])},getOptimalImage:(e,t)=>y(N(e),e.hasOwnProperty(J.LEVEL)?t[0]>l.folderThumbDims[0]||t[1]>l.folderThumbDims[1]?l.folderImageFile:l.folderThumbFile:e.hasOwnProperty(J.ORIGINALFILE)?e[J.ORIGINALFILE]:e.hasOwnProperty(J.IMAGE)&&(t[0]>l.thumbDims[0]||t[1]>l.thumbDims[1])?e[J.IMAGE][J.PATH]:e[J.THUMB][J.PATH]),getOptimalImagePath:(e,t,r)=>{if(e.hasOwnProperty(J.LEVEL))return l.folderImageFile;if(e.hasOwnProperty(J.ORIGINALFILE))return y(N(e),e[J.ORIGINALFILE]);let n=e[J.IMAGE].hasOwnProperty(J.RENDITIONS)?x(e[J.IMAGE][J.RENDITIONS],t||[window.outerWidth,window.outerHeight],!1):l.hiDpiImages?{width:2*e[J.IMAGE][J.WIDTH],height:2*e[J.IMAGE][J.HEIGHT]}:{width:e[J.IMAGE][J.WIDTH],height:e[J.IMAGE][J.HEIGHT]};return typeof r!==UNDEF&&r&&e.hasOwnProperty(J.ORIGINAL)&&t[0]>n[J.WIDTH]?y(N(e),e[J.ORIGINAL][J.PATH]):y(N(e),n.hasOwnProperty(J.NAME)?l.slidesDir+"/"+n[J.NAME]:e[J.IMAGE][J.PATH])},getOptimalThumbPath:(e,t,r)=>{if(e[J.THUMB].hasOwnProperty(J.RENDITIONS)){let n=x(e[J.THUMB][J.RENDITIONS],t,l.thumbsFillFrame);if("folder"===e[J.CATEGORY])return y(N(e),((e,t)=>e.slice(0,e.lastIndexOf("/")+1)+t)(e[J.THUMB][J.PATH],n[J.NAME]));if("video"===e[J.CATEGORY]||t[0]<=1.05*n[J.WIDTH]&&t[1]<=1.05*n[J.HEIGHT])return y(N(e),l.thumbsDir,n[J.NAME]);if(typeof r!==UNDEF&&r&&e[J.IMAGE].hasOwnProperty(J.RENDITIONS))return n=x(e[J.IMAGE][J.RENDITIONS],t,l.thumbsFillFrame),y(N(e),l.slidesDir,n[J.NAME])}let n=e[J.THUMB][J.WIDTH],o=e[J.THUMB][J.HEIGHT];return l.hiDpiTHumbs&&(n*=2,o*=2),"video"!==e[J.CATEGORY]&&e.hasOwnProperty(J.IMAGE)&&(t[0]>1.15*n||t[1]>1.15*o)?y(N(e),e[J.IMAGE][J.PATH]):y(N(e),e[J.THUMB][J.PATH])},getSourcePath:e=>y(N(e),e.hasOwnProperty(J.ORIGINAL)?e[J.ORIGINAL][J.PATH]:e.hasOwnProperty(J.IMAGE)?e[J.IMAGE][J.PATH]:e[J.THUMB][J.PATH]),getAbsoluteItemPath:e=>y(r,F(e)),getVideoDuration:e=>{let t,r=e[J.VIDEO];return r&&r.hasOwnProperty(J.DURATION)&&(t=r[J.DURATION].match(/(\d{2})\:(\d{2})\:(\d{2})\.(\d+)/))?parseInt(t[4])+1e3*parseInt(t[3])+6e4*parseInt(t[2])+36e5*parseInt(t[1]):null},hasShop:e=>{let t=v(e||n,J.SHOP);return t&&(t.usePrice||"-"!==t.options)},hasLocation:e=>e.hasOwnProperty(J.LOCATION)||e.hasOwnProperty(J.CAMERA)&&e[J.CAMERA].hasOwnProperty(J.LOCATION),getLocation:e=>e.hasOwnProperty(J.LOCATION)?e[J.LOCATION]:e.hasOwnProperty(J.CAMERA)&&e[J.CAMERA].hasOwnProperty(J.LOCATION)?e[J.CAMERA][J.LOCATION].lat+","+e[J.CAMERA][J.LOCATION].long:null,hideFotomoto:e=>e.hasOwnProperty(J.HIDEFOTOMOTO)?e[J.HIDEFOTOMOTO]:W(e,J.HIDEFOTOMOTO)||!1,getPriceRange:e=>{let t=v(e||n,J.SHOP);if(t&&"-"!==t.options&&t.showPriceRange){let e=t.options.split("::"),r=Number.MAX_VALUE,n=Number.MIN_VALUE;if(e.length>1){for(let t=0;t<e.length;t++)r=Math.min(parseFloat(e[t].split("=")[1].split("+")[0]),r);if("minmax"===t.showPriceRange){for(let t=0;t<e.length;t++)n=Math.max(parseFloat(e[t].split("=")[1].split("+")[0]),n);return toCurrency(r,t.currency)+"&ndash;"+toCurrency(n,t.currency)}return E.from.template(toCurrency(r,t.currency))}return toCurrency(e[0].split("=")[1].split("+")[0],t.currency)}return""},getCurrency:()=>Y(J.SHOP).currency||"EUR",getDeepFolderCount:b,getRootProperty:Y,getInheritedPropertyObject:v,getInheritedProperty:W,getProperty:(t,r,n)=>{let o;return n?o=W(t,r):r.indexOf(".")>0?(r=r.split("."),o=t.hasOwnProperty(r[0])?t[r[0]][r[1]]:null):t.hasOwnProperty(r)&&(o=t[r]),e.extend(!0,{},o)},getPropertyObject:(t,r,n)=>n?v(t,r):t.hasOwnProperty(r)?e.etxend(!0,{},t[r]):null,getNextFoldersFirstImage:function(e){let t=function(e){let t=o||o,r=S(t),n=V(r,t[J.PATH]);if(n>=0)if(l.loadDeep){if(r.hasOwnProperty(J.OBJECTS))for(let e=n+1;e<r[J.OBJECTS].length;e++)if(!("folder"!==r[J.OBJECTS][e][J.CATEGORY]||r[J.OBJECTS][e].hasOwnProperty(J.HIDDEN)&&r[J.OBJECTS][e][J.HIDDEN]))return r[J.OBJECTS][e]}else if(r.hasOwnProperty(J.FOLDERS))for(let e=n+1;e<r[J.FOLDERS].length;e++)if(!r[J.FOLDERS][e].hasOwnProperty(J.HIDDEN)||!r[J.OBJECTS][e][J.HIDDEN])return r[J.FOLDERS][e];return null}(),r=function(e){e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{if(c(e))return e})};t&&(t.hasOwnProperty(J.READY)&&t.ready?e.call(r(t)):_(t,function(e){e.call(r(this))},e))},getPreviousFoldersLastImage:function(e){let t=function(e){let t=o||o,r=S(t),n=V(r,t[J.PATH]);if(n>=0)if(l.loadDeep){if(r.hasOwnProperty(J.OBJECTS))for(let e=n-1;e>=0;e--)if(!("folder"!==r[J.OBJECTS][e][J.CATEGORY]||r[J.OBJECTS][e].hasOwnProperty(J.HIDDEN)&&r[J.OBJECTS][e][J.HIDDEN]))return r[J.OBJECTS][e]}else if(r.hasOwnProperty(J.FOLDERS))for(let e=n-1;e>=0;e--)if(!r[J.FOLDERS][e].hasOwnProperty(J.HIDDEN)||!r[J.OBJECTS][e][J.HIDDEN])return r[J.FOLDERS][e];return null}(),r=function(e){if(e.hasOwnProperty(J.OBJECTS))for(let t=e[J.OBJECTS],r=t.length-1;r>=0;r--)if(c(t[r]))return t[r]};return t&&(t.hasOwnProperty(J.READY)&&t.ready?e.call(r(t)):_(t,function(e){e.call(r(this))},e)),null},sortItems:j,collectByPath:function(t){if(typeof t===UNDEF||!t.hasOwnProperty("paths")||!Array.isArray(t.paths)||typeof t.ready!==FUNCTION)return[];let r,n=[],o=e.extend({folder:"",levels:0,sortBy:"original",reference:"dateTaken",reverse:!1},t),a=o.paths.length,l=0,E=(C(o.folder),function(){clearTimeout(r),l<a&&(D("Error: Timeout collecting "+a+" items. Image set is incomplete!"),n=function(e){let t=[];for(let r of e)r&&t.push(r);return t}(n)),n=j(n,{sortBy:o.sortBy,reference:o.reference,reverse:o.reverse}),o.ready.call(n,o)});r=setTimeout(E,25*a);for(let e=0;e<a;e++)H(o.paths[e],function(e){this&&typeof e!==UNDEF&&this!==window&&(n[e]=this,++l===a&&(clearTimeout(r),E()))},e)},collectNItem:function(t){if(typeof t===UNDEF||typeof t.ready!==FUNCTION)return;let r=e.extend({folder:"",levels:0,include:"images",max:0,sortBy:"original",sortOrder:0},t),a=[],E=[],s=C(r.folder),i=r.levels?((e,t)=>{let r=typeof e===UNDEF?o:e,n=r[J.LEVEL]+(typeof t===UNDEF?0:t),a=e=>{let t=1;return e[J.LEVEL]<=n&&(u()?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||(t+=a(e))}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||(t+=a(e))})),t};return a(r)})(s,r.levels):1,O=0,h=!1,p=!s&&r.levels>1&&n.hasOwnProperty(J.FOLDERS),D=-1!==r.include.indexOf("images"),d=-1!==r.include.indexOf("folders"),A=function(e){e[J.OBJECTS].forEach(e=>{c(e)&&a.push(e)})},I=function(e){d&&E.push(e),D&&e.hasOwnProperty(J.OBJECTS)&&_(e,A),e[J.LEVEL]<=maxLevel&&(u()?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||I(e)}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||I(e)})),O++},y=function(){I(s),setTimeout(N,20)},P=function(){I(s),setTimeout(function(){f.length?e.when.apply(e,f).done(N):N()},20)},N=function(){h||(r.max&&r.quick&&a.length+E.length>=r.max||!f.length||O>=i?(a=j(a,E,{sortBy:-1===r.sortOrder?"random":r.sortBy||"original",reference:r.reference||J.FILEDATE,reverse:0===r.sortOrder,foldersFirst:r.include.startsWith("folders")}),r.max&&r.max<a.length&&(a=a.slice(0,r.max)),h=!0,r.ready.call(a,r)):setTimeout(N,50))};f=[],h=!1,r.hasOwnProperty("quick")||(r.quick=r.max&&"original"!==r.sortBy),maxLevel=s[J.LEVEL]+r.levels,random=-1===r.sortOrder,random&&(l.sortBy="original"),p&&!T?onDeepReady(y,P):P()},collectByDate:function(t){if(typeof t===UNDEF||typeof t.ready!==FUNCTION)return;let r,a,l=e.extend({sort:!0,reverse:!1,reference:J.DATETAKEN,depth:"current"},t),E=[],s="current"===l.depth?1:b("tree"===l.depth?n:o),i=0,O=!1,h="tree"===l.depth&&n.hasOwnProperty(J.FOLDERS)||"subfolders"===l.depth&&o.hasOwnProperty(J.FOLDERS)&&o[J.LEVEL]<3,p=function(e){e&&e.hasOwnProperty(J.OBJECTS)&&(e[J.OBJECTS].forEach(e=>{c(e)&&(d=e[J.DATES])&&(d=d[l.reference])&&d>=r&&d<=a&&E.push(e)}),i++)},D=function(e){!e||e.hasOwnProperty(J.HIDDEN)&&e.hidden||(_(e,p),u()?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||D(e)}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||D(e)}))},A=function(){D("tree"===l.depth?n:o),setTimeout(y,20)},I=function(){D("tree"===l.depth?n:o),setTimeout(function(){f.length?e.when.apply(e,f).done(y):y()},20)},y=function(){O||(f.length&&s>i?setTimeout(y,20):(l.sort&&(E=j(E,{sortBy:l.sortBy||"date",reference:l.reference||J.DATETAKEN,reverse:l.reverse||!1})),l.max&&l.max<E.length&&(E=E.slice(0,l.max)),O=!0,l.ready.call(E,l)))};f=[],O=!1,l.hasOwnProperty("end")&&(a=l.end*ONEDAY_S),l.hasOwnProperty("start")&&(r=l.start*ONEDAY_S),l.hasOwnProperty("range")&&(null!==r?a=r+l.range*ONEDAY_S:null!==a?r=a-l.range*ONEDAY_S:(a=Math.round(new Date/1e3),r=a-l.range*ONEDAY_S)),typeof r===UNDEF&&(r=0),typeof a===UNDEF&&(a=Math.round(new Date/1e3)),h&&!T?Q(A,I):I()},collectItems:function(t){if(typeof t===UNDEF||!t.hasOwnProperty("terms")||typeof t.ready!==FUNCTION)return;let r,a,s=e.extend({fields:"creator,keywords,title,comment,name,regions",types:"all",depth:"current",exact:!1,caseSensitive:!1},t),i=[],O=s.fields.split(/,\s?/),h=O.length,p=new Array(h),D=!1,d="all"===s.types,A={},I="current"===s.depth?1:b("tree"===s.depth?n:o),c=0,y=!1,P="tree"===s.depth&&n.hasOwnProperty(J.FOLDERS)||"subfolders"===s.depth&&o.hasOwnProperty(J.FOLDERS)&&o[J.LEVEL]<3,N=function(e,t){let n=0;for(let o,a,l=0;l<h;l++){if(O[l].length>1){if(O[l][0]!==t)continue;o=O[l][1]}else o=O[l][0];if(JCAMERAFIELDS.indexOf(o)>=0&&e.hasOwnProperty(J.CAMERA)?typeof(a=e[J.CAMERA][o])===UNDEF&&(a=e[o]):a=o===J.NAME?(a=e.hasOwnProperty(J.ORIGINAL)?decodeURIComponent(e[J.ORIGINAL][J.PATH].getFile()):e[J.NAME])+" "+a.replace(/[\.\-_]/g," "):o===J.REGIONS?e.hasOwnProperty(J.REGIONS)?JSON.parse(e[J.REGIONS]):null:e[o],typeof a!==UNDEF&&null!==a)if(p[o]&&o===J.KEYWORDS){if(s.caseSensitive)-1!==a.indexOf(r[0])&&n++;else for(let e=0,t=r[0].toLowerCase();e<a.length;e++)if(a[e].toLowerCase()===t){n++;break}}else{if(o===J.COMMENT||o.endsWith("Caption"))a=a.stripHTML();else if(o===J.REGIONS){let e=[];for(let t,r=0;r<a.length;r++)(t=a[r].split(";")[0]+"")&&e.push(t);a=e.filter(Boolean).join(" ")}else Array.isArray(a)?a=a.join(" "):a+="";a.searchTerm(r,p[o],D,s.caseSensitive)&&n++}}(D&&n===a||n)&&i.push(e)},R=function(e){e&&(e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(t=>{t.hasOwnProperty(J.FOLDERINDEX)?(d||A.folder)&&N(e[J.FOLDERS][t[J.FOLDERINDEX]],"folder"):t.hasOwnProperty(J.CATEGORY)&&(d||A[t[J.CATEGORY]])&&N(t,t[J.CATEGORY])}),c++)},F=function(e){!e||e.hasOwnProperty(J.HIDDEN)&&e.hidden||(_(e,R),u()?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||F(e)}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||F(e)}))},g=function(){F("tree"===s.depth?n:o),setTimeout(m,20)},w=function(){F("tree"===s.depth?n:o),setTimeout(function(){f.length?e.when.apply(e,f).done(m):m()},20)},m=function(){y||(f.length&&I>c?setTimeout(m,20):(s.max&&s.max<i.length&&(i=i.slice(0,s.max)),y=!0,s.ready.call(i,s)))};f=[],y=!1,'"'===s.terms[0]&&'"'===s.terms[s.terms.length-1]?(r=s.terms.substring(1,s.terms.length-1).trim(),t.hasOwnProperty("exact")||(s.exact=!0)):!1===s.exact?~(r=s.terms.replace(/\s+/g,",")).indexOf(","+E.and+",")&&(r=r.replace(new RegExp(","+E.and+",","gi"),","),D=!0):r=s.terms.trim(),r=s.exact?[r]:removeEmpty(r.split(/,\s?/)),a=r.length;for(let e,t=0;t<h;t++)O[t]=O[t].split(":"),e=O[t][1]||O[t][0],p[e]="string"==typeof s.exact?s.exact.indexOf(e)>=0:s.exact;d||("-"===s.types.charAt(0)?l.possibleTypes.forEach(e=>{-1===s.types.indexOf(e)&&(A[e]=!0)}):s.types.split(/,\s?/).forEach(e=>{A[e]=!0})),P?T?g():Q(g,w):w()},collectTags:function(t){if(typeof t===UNDEF||typeof t.ready!==FUNCTION)return;let r=e.extend({fields:"creator,keywords,folder:title,webLocation:title",types:"all",depth:"current",exact:"creator,keywords,name"},t),a=[],E=Array.isArray(r.fields)?r.fields:r.fields.split(/,\s?/),s=E.length,i="name"===r.sort,O="all"===r.types,h={},p={},T=function(e,t){let r="^",n="^",o=function(e,t){if(!e)return;let o,a;p[t]?a=[e.toString()]:(("comment"===t||t.endsWith("Caption"))&&(e=e.stripHTML()),a=e.split(/[\s,_\.\?\!\-\(\)\[\]]/),a=removeEmpty(a));for(let e=0,t=a.length;e<t;e++)(o=a[e].trim()).length<=2||-1===n.indexOf("^"+o.toUpperCase()+"^")&&(r+=o+"^",n+=o.toUpperCase()+"^")};for(let r,n,a=0;a<s;a++){if(E[a].length>1){if(E[a][0]!==t)continue;r=E[a][1]}else r=E[a][0];if(JCAMERAFIELDS.indexOf(r)>=0&&e.hasOwnProperty(J.CAMERA)?typeof(n=e[J.CAMERA][r])===UNDEF&&(n=e[r]):n=r===J.REGIONS?e.hasOwnProperty(J.REGIONS)?JSON.parse(e[J.REGIONS]):null:e[r],typeof n!==UNDEF&&null!=n)if(r===J.REGIONS)for(let e=0;e<n.length;e++)o(n[e].split(";")[0],r);else if(Array.isArray(n))for(let e=0;e<n.length;e++)o(n[e],r);else o(n,r)}r.length>1&&function(e,t){let n=r.split("^").filter(e=>e.length>2);for(let t,r,o,l=0;l<n.length;l++)r=n[l].toUpperCase(),null!==(o=g(e))&&(a&&a.length?(t=a.findIndex(e=>e[2]===r))>=0?-1===a[t][1].indexOf(o)&&a[t][1].push(o):a.push([n[l],[o],r]):a=[[n[l],[o],r]])}(e)},D=function(e){if(e&&(e!==n&&(O||h.folder)&&T(e,"folder"),e.hasOwnProperty(J.OBJECTS)))for(let t,r=0,n=e[J.OBJECTS];r<n.length;r++)n[r].hasOwnProperty(J.CATEGORY)&&(t=n[r][J.CATEGORY],(O||h[t])&&T(n[r],t))},d=function(e){!e||e.hasOwnProperty(J.HIDDEN)&&e.hidden||(_(e,D),u()?e.hasOwnProperty(J.OBJECTS)&&e[J.OBJECTS].forEach(e=>{"folder"!==e[J.CATEGORY]||e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||d(e)}):e.hasOwnProperty(J.FOLDERS)&&e[J.FOLDERS].forEach(e=>{e.hasOwnProperty(J.HIDDEN)&&e[J.HIDDEN]||d(e)}))},A=function(){r.sort&&a.sort(function(e,t){return i?(""+e[2]).localeCompare(""+t[2]):t[1]-e[1]}),r.max&&r.max<a.length&&(a=a.slice(0,r.max))};f=[];for(let e,t=0;t<s;t++)E[t]=E[t].split(":"),e=E[t][1]||E[t][0],p[e]="string"==typeof r.exact?r.exact.indexOf(e)>=0:r.exact;O||l.types.split(/,\s?/).forEach(e=>{h[e]=!0}),d("tree"===r.depth?n:o),f.length?e.when.apply(e,f).done(function(){A(),r.ready.call(a,r)}):(A(),r.ready.call(a,r))},processTemplate:function(e,t,r){let n,a,l,E,J=typeof r!==UNDEF&&r,s=t||o,i=e=>"label"===e?B(s):stringVal(s[e]);if(e&&e.indexOf("${")>0)for(;l=e.match(/\$\{([\w\.|]+)\}/);){if(l[1].indexOf("|")>0)for(let e=0,t=l[1].split("|");e<t.length&&!(E=i(t[e]));e++);else E=i(l[1]);e=null===E&&J&&(n=l.index-1,a=n+l[0].length,n>0&&">"===e[n]&&a<sb.length-1&&"<"===e[a]&&(n=e.lastIndexOf("<",n),a=e.indexOf(">",a),n>=0&&a>=0))?e.slice(0,n)+e.slice(a):e.slice(0,l.index)+(E||"")+e.slice(l.index+l[0].length)}return e}}};
!function(e){"use strict";var t=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}(),r=DIR_PATH||"/";e.cookie=function(e,n,o){var i=function(e){return!!/^(true|yes)$/.test(e)||!/^(false|no)$/.test(e)&&(/^([\d.]+)$/.test(e)?parseFloat(e):e)},a=function(e){if("string"!=typeof e)return e;if("["===e[0]||"{"===e[0]){e=JSON.parse(e);for(var t in e)"string"==typeof t[e]&&(t[e]=i(t[e]));return e}return i(e)};if(arguments.length>1){l=new Date;return null===n?t?localStorage.removeItem(r+e):document.cookie=encodeURIComponent(e)+"=; expires="+l.toGMTString()+"; path="+r+" SameSite=Strict":(n="object"==typeof n?JSON.stringify(n):String(n),l.setTime(l.getTime()+1e3*("number"!=typeof o?3600:o)),t?localStorage.setItem(r+e,n+"; @"+String(l.getTime())):document.cookie=encodeURIComponent(e)+"="+n+"; expires="+l.toGMTString()+"; path="+r+" SameSite=Strict"),n}if(e)if(t){if(s=localStorage.getItem(r+e)){if(1===(s=s.split("; @")).length&&(s=s[0].split("; ")),!(s.length>1))return a(s);var l;if((l=new Date).getTime()<parseInt(s[1],10))return a(s[0]);localStorage.removeItem(r+e)}}else{var s,u=document.cookie.split(/;\s*/);e+="=";for(var c=0;c<u.length;c++)if(u[c].substring(0,e.length)===e)return a(u[c].substring(e.length))}return null}}(jQuery);
!function(t,e,o){"use strict";t.fn.thumbScroll=function(s){return s=t.extend({},t.fn.thumbScroll.defaults,s),this.each(function(){var i,n,l,a,r,c,u,h,d,f,p=t(this),g="_lts_"+Math.floor(1e4*Math.random()),m=t.extend({},s,JSON.parse(p.data("thumbscroll")||"{}")),C=p.find("."+m.clipClass),w=C.find("."+m.thumbContClass),b=p.closest(".cont").hasClass("thumbs-left")||p.closest(".cont").hasClass("thumbs-right"),v=new Date,T=!1,M=function(t){return t.preventDefault(),!1},y=function(t){t=typeof t!==UNDEF?t:b?w.position().top:w.position().left,i.toggleClass("disabled",t>-1),n.toggleClass("disabled",t<(b?C.height()-w.height()+1:C.width()-w.width()+1))},x=function(){w.css(b?{top:w.position().top,transition:"top 0ms linear"}:{left:w.position().left,transition:"left 0ms linear"})},k=function(t){var e,o;b?(e=C.height(),o=w.height()):(e=C.width(),o=w.width()),!e||!o||e>=o||"number"!=typeof t||(t=Math.minMax(e-o,t,0),p.addClass(m.scrollingClass),w.css(b?{top:t,transition:"top "+m.speed+"ms ease-out"}:{left:t,transition:"left "+m.speed+"ms ease-out"}).one("transitionend",function(){p.removeClass(m.scrollingClass),p.trigger("lazyloadThumbs",t)}),y(t))},D=function(t){return S(),k(b?w.position().left+C.width():w.position().top+C.height()),!1},E=function(t){return S(),k(b?w.position().top-C.height():w.position().left-C.width()),!1},S=function(t){"number"==typeof d&&clearTimeout(d),d=void 0!==t?t:setTimeout(function(){d=!1},m.seekStay)},O=function(e,o){if(!p.hasClass(m.scrollingClass)&&!d){if((e=o?t(o):w.find("."+m.activeClass)).length){var s,i,n,l,a,r;if(b?(s=e.position().top,i=e.outerHeight(!0),n=Math.round(i*m.headRoom),l=w.position().top,a=w.height(),r=C.height()):(s=e.position().left,i=e.outerWidth(!0),n=Math.round(i*m.headRoom),l=w.position().left,a=w.width(),r=C.width()),r>=a)return;if(s>r-i-n-l)l=Math.max(r-i-n-s,r-a);else{if(!(s<-l+n))return;l=-s+n}k(l)}}},H=function(t,e){return t.preventDefault(),e&&(x(),S(),k(b?w.position().top+C.height()*(e<0?-1:1):w.position().left+C.width()*(e<0?-1:1))),!1},U=function(t){if(a){var e=getCoords(t.originalEvent)[b?"y":"x"]-a;e&&w.css(b?"top":"left",Math.minMax(h,l+e,0))}else a=getCoords(t.originalEvent)[b?"y":"x"],p.addClass(m.scrollingClass);return!1},z=function(o){o.preventDefault(),c=w.position()[b?"top":"left"];var s=getCoords(o.originalEvent)[b?"y":"x"]-a,i=(new Date).getTime()-r;if("mouseup"===o.type?e.off("mousemove."+g+" mouseup."+g):w.off(TOUCH.MOVE+"."+g+" "+TOUCH.END+"."+g),S(),Math.abs(s)<10){var n=new Date;p.removeClass(m.scrollingClass),t(o.target).off("click."+g),n-v>200&&(t(o.target).closest("a").trigger("click",o),v=n)}else!function(t){t=Math.minMax(h,c+t,0),y(t),w.css(b?{top:t,transition:"top "+m.extraSpeed+"ms ease-out"}:{left:t,transition:"left "+m.extraSpeed+"ms ease-out"}).one("transitionend",function(){p.removeClass(m.scrollingClass)}),p.trigger("lazyloadThumbs",t)}(1e3*s/i),setTimeout(function(){p.removeClass(m.scrollingClass),t(o.target).off("click."+g)},30);return!1},N=function(o){return"mousedown"===o.type&&1!==o.which||(o.preventDefault(),!("touchstart"!==o.type||!(!o.originalEvent.touches||o.originalEvent.touches.length>1||p.hasClass(m.scrollingClass)))||(p.addClass(m.scrollingClass),x(),l=w.position()[b?"top":"left"],a=getCoords(o.originalEvent)[b?"y":"x"],r=(new Date).getTime(),u=0,(h=b?C.height()-w.height():C.width()-w.width())>=0||("mousedown"===o.type?(e.on("mousemove."+g,U).on("mouseup."+g,z),t(o.target).on("click."+g,M)):(t(o.target).closest("a").focus(),w.on(TOUCH.MOVE+"."+g,U).on(TOUCH.END+"."+g,z)),!1)))},R=function(){p.addClass(m.fillClass);var t,e,o;b?(t=w.position().top,e=w.height(),o=C.height()):(t=w.position().left,e=w.width(),o=C.width()),e>o?(T||(i.on("click."+g,D),n.on("click."+g,E),w.on(TOUCH.START+"."+g+" mousedown."+g,N),w.add(i).add(n).on("selectstart."+g,M),m.enableMouseWheel&&C.on("mousewheel."+g+" DOMMouseScroll."+g,H),T=!0),o-e>t&&(x(),w.css(b?{top:o-e,transition:"top 0ms linear"}:{left:o-e,transition:"left 0ms linear"})),y()):(p.removeClass(m.fillClass),i.add(n).add(w).add(C).off("."+g),T=!1,k(0))};C.length&&w.length&&((i=p.find("."+m.backClass)).length||(i=t("<button>",{class:m.backClass+" icon-arrow-"+(b?"up":"left")+" "+m.disabledClass}).appendTo(p)),(n=p.find("."+m.forwardClass)).length||(n=t("<button>",{class:m.forwardClass+" icon-arrow-"+(b?"down":"right")+" "+m.disabledClass}).appendTo(p)),o.on("resize."+g,function(){clearTimeout(f),f=setTimeout(R,100)}),p.on("scrollToActive",O),p.trigger("lazyloadThumbs",0),R())})},t.fn.thumbScroll.defaults={activeClass:"active",disabledClass:"disabled",backClass:"scroll-back",forwardClass:"scroll-forward",clipClass:"clip",thumbContClass:"thumb-cont",scrollingClass:"scrolling",fillClass:"fill",thumbsPosition:"top",speed:1e3,extraSpeed:600,seekStay:3e3,headRoom:1.75,enableMouseWheel:!0}}(jQuery,$(document),$(window));
!function(t,e){"use strict";var o=["left","center","right"],s=["top","middle","bottom"];t.fn.alignTo=function(n,a){if(a=t.extend({},t.fn.alignTo.defaults,a),"string"==typeof n&&(n=t(n)),n instanceof t&&n.length){var i,p,l,r=e.width(),f=e.height(),u=function(e){for(;e.length&&"BODY"!==e[0].nodeName;){if("fixed"===e.css("position"))return e;e=e.parent()}return t()}(n);if("AREA"===n[0].nodeName&&"RECT"===n[0].shape.toUpperCase()){i=n.parent().offset();var g=n[0].coords.split(",");i.left+=parseInt(g[0],10),i.top+=parseInt(g[1],10),p=parseInt(g[2],10)-parseInt(g[0],10),l=parseInt(g[3],10)-parseInt(g[1],10)}else i=n.offset(),p=n.outerWidth(),l=n.outerHeight();return i.left-=e.scrollLeft(),i.top-=e.scrollTop(),t(this).each(function(){var n=t(this),g=n.find("."+a.nubClass),d=a.pos[2],h=a.pos[3];n.css("maxHeight","none");var c=n.outerWidth(),b=n.outerHeight(),m=Math.round(i.left+a.pos[2]*p/2+(a.pos[2]-1)*a.gap),v=Math.round(i.top+a.pos[3]*l/2+(a.pos[3]-1)*a.gap),x=Math.round(m-a.pos[0]*c/2),z=Math.round(v-a.pos[1]*b/2);(z<0||z+b>f)&&(1!==a.pos[2]?z=2*z+b>f?f-b:0:0===a.pos[3]?f>2*i.top+l&&(z=i.top+l+a.gap,h=2):2===a.pos[3]&&f<2*i.top+l&&(z=Math.max(0,i.top-b-a.gap),h=0),z<0&&(z=0)),(x<0||x+c>r)&&(1!==a.pos[3]?x=2*x+c>r?r-c:0:0===a.pos[2]?r>2*i.left+p&&(x=i.left+p+a.gap,d=2):2===a.pos[2]&&r<2*i.left+p&&(x=Math.max(0,i.left-c-a.gap),d=0),x<0&&(x=0),x+c>r&&n.css({maxWidth:r-x-(parseInt(n.css("paddingLeft"),10)+parseInt(n.css("paddingRight"),10))})),a.fixNub&&g.length&&(0===h?g.css({left:i.left-x+p/2-a.nubSize,top:"auto",bottom:-2*a.nubSize}):2===h?g.css({left:i.left-x+p/2-a.nubSize,top:-2*a.nubSize,bottom:"auto"}):0===d?g.css({top:i.top-z+l/2-a.nubSize,left:"auto",right:-2*a.nubSize}):2===d&&g.css({top:i.top-z+l/2-a.nubSize,left:-2*a.nubSize,right:"auto"})),u.length?n.css({position:"fixed",left:x,top:z}):n.css({position:"absolute",left:x+e.scrollLeft(),top:z+e.scrollTop()}),n.removeClass("align-left align-center align-right valign-top valign-middle valign-bottom").addClass("align-"+o[d]).addClass("valign-"+s[h])})}},t.fn.alignTo.defaults={gap:0,pos:[1,2,1,0],fixNub:!0,nubClass:"nub",nubSize:5}}(jQuery,$(window));
!function(t,e){"use strict";t.fn.hideAllTooltips=function(){return this.each(function(){t(this).data("suppressTooltips",!0).find("[data-tooltip-id]").each(function(){if(!t(this).data("tooltip-keep")){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).hide()}}),setTimeout(function(){t(this).removeData("suppressTooltips")},200)})},t.fn.destroyAllTooltips=function(){return this.each(function(){t(this).data("suppressTooltips",!0).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).remove()})})},t(document).on("mouseleave._ltt_",function(){e.hideAllTooltips()}),t.fn.addTooltip=function(o,i){typeof o===UNDEF||"string"==typeof o||o.jquery||(i=o,o=null),i=t.extend({},t.fn.addTooltip.defaults,i);var a=function(e){if(typeof e!==UNDEF&&e&&e.length){if(e.is(":hidden")||e.css("opacity")<.25)return!1;var o=!0;return e.parents().each(function(){if(t(this).is(":hidden")||t(this).css("opacity")<.25)return o=!1,!1}),o}return!0};return this.each(function(){if(this["data-tooltip-id"])return!0;var n,s,l,u,r,p=t(this),c=!1,d=!1,f=!1,h="_ltt_"+Math.floor(1e4*Math.random()),m=function(e){a(t(this))&&(clearTimeout(l),l=null,c=!0)},T=function(t){d||(c=!1,clearTimeout(l),l=setTimeout(y,Math.min(i.stay||100)))},y=function(){c||(f=!1,clearTimeout(s),clearTimeout(l),s=l=null,n&&n.css({opacity:0}).one("transitionend",function(){t(this).css({display:"none"})}))},v=function(){var o=p.offset();p.data("suppressTooltips")||(l=clearTimeout(l),(!u||Math.abs(o.top-u.top)<1&&Math.abs(o.left-u.left)<1)&&(i.exclusive&&(p.data("tooltip-keep",!0),e.hideAllTooltips(p),p.data("tooltip-keep",null)),n.css({opacity:0,display:"block"}).alignTo(p,{gap:i.gap,pos:i.pos}).css({opacity:1}).one("transitionend",function(){t(this).css({display:"block"}),clearTimeout(l),l=setTimeout(y,i.stay)}),f=!0),u=o)},g=function(){return!!n&&n.is(":visible")&&n.css("opacity")>.99},b=function(e){p.off("."+h),s=clearTimeout(s),l=clearTimeout(l),p.data("suppressTooltips",!0),t("#"+p.attr("data-tooltip-id")).remove(),p.attr("data-tooltip-id",null)};p.attr("data-tooltip-id",h).removeData("suppressTooltips").on("destroyTooltip",b).on("removeTooltip",y).on("focus."+h+" mouseenter."+h,function(e){if(!p.data("suppressTooltips")&&a(t(e.target).closest("[data-tooltip-id]"))){if(f=g(),r=new Date,u=p.offset(),n)clearTimeout(l),l=null;else if(p.data("suppressTooltips")||!(n=function(e,o){var a;if(o)if("string"==typeof o)a=t("<div>",{html:o}).appendTo("body");else{if(!o.jquery)return null;a=t.contains(document.body,o[0])?o:o.appendTo("body")}else{if((o=e.data("tooltip"))?o.jquery?o.removeClass("hidden"):"."===o.charAt(0)?o=e.find(o).eq(0):"#"===o.charAt(0)&&(o=t(o)):(o=e.attr("title"),e.removeAttr("title")),!o||!o.length)return null;a=t("<div>",{html:o}).appendTo("body")}return a.is(":empty")?null:(a.attr("id",e.attr("data-tooltip-id")).addClass(i.className).attr("role","tooltip").attr("aria-hidden",!0).hide().append(t("<span>",{class:i.nub})),a)}(p,o))||(n.on("mouseover."+h,m).on("mouseout."+h,T),n.find("input, textarea").on("focus."+h,function(){d=!0,m(this)}).on("blur."+h,function(){d=!1}),0))return b(),!0;clearTimeout(s),s=null,"mouse"===whatInput.ask("intent")&&(s=setTimeout(v,i.delay))}return!0}).on("blur."+h+" mouseleave."+h,function(e){a(t(e.target).closest("[data-tooltip-id]"))&&(clearTimeout(l),l=null,l="mouse"===whatInput.ask("intent")?setTimeout(y,100):setTimeout(y,3e3))}).on("click."+h,function(e){if(a(t(e.target).closest("[data-tooltip-id]"))){if(clearTimeout(s),s=null,i.touchToggle||"mouse"!==whatInput.ask("intent")){var o=new Date;if(i.touchToggle||o-r>1e3)return!(!function(o){var i=t(e.target).closest("a");return i.length&&i.attr("href")&&!i.attr("href").startsWith("javascript")}()||!g())||(function(t){t.preventDefault(),clearTimeout(s),clearTimeout(l),s=l=null}(e),f?y():v(),!1)}f&&(clearTimeout(l),l=null,y()),c=!1}return!0})})},t.fn.addTooltip.defaults={delay:50,className:"tooltip",nub:"nub",stay:2e3,exclusive:!0,touchToggle:!1,pos:[1,2,1,0],gap:6}}(jQuery,$("body"));
!function(e,t,o){"use strict";e.fn.modal=function(n,a,l){if("string"==typeof n&&(n=e(document.createTextNode(n))),n instanceof e&&n.length){Array.isArray(a)||(l=a,a=null),l=e.extend({},e.fn.modal.defaults,l);var d,s,i,c,r=e(this),f=getTranslations(e.fn.modal.text),u=!1,p="lmo_"+Math.floor(1e4*Math.random()),h=null,m=function(){return h=clearTimeout(h),d.destroyAllTooltips(),d.fadeOut(l.speed,function(){u?d.hide().css("opacity",1):d.remove(),t.off("."+p)}),o.removeClass("has-modal"),typeof l.onClose===FUNCTION&&l.onClose.call(this),!1};return function(){if(e.contains(document.documentElement,n[0]))s=(d=n).children().eq(0),i=s.find(".close").eq(0),c=s.find(".content").eq(0),u=!0;else if(d=e("<div>",{class:"modal"}).appendTo(r),s=e("<div>",{class:"window "+(l.class||""),role:"dialog"}).appendTo(d),(i=e("<a>",{class:"btn close",title:f.closeWindow}).appendTo(s)).addTooltip(),c=e("<div>",{class:"content scrollable"}).appendTo(s),l.title&&s.addClass("has-header").prepend(e("<header>",{text:l.title})),c.append(n.show()),a){var t,p,h=e("<div>",{class:"buttons"}).appendTo(c),y=function(e){e.preventDefault();var t=e.target;return typeof t.handler===FUNCTION&&!1!==t.handler.call(this)&&m(),!1};for(t=0;t<a.length;t++)p=e("<button>",{class:"button "+(a[t].c||""),html:" "+a[t].t}).on("click",y).appendTo(h),typeof a[t].h===FUNCTION&&(p[0].handler=a[t].h)}d.hide().css("opacity",1).fadeIn(l.speed),o.addClass("has-modal"),d.on("destroy",m),d.on("close",m),i.add(d).on("click",function(e){e.target===this&&m()})}(),l.autoFade&&(h=setTimeout(m,l.autoFade)),this}},e.fn.modal.defaults={speed:300,autoFade:0,width:400,type:"normal"},e.fn.modal.text={closeWindow:"Close window"}}(jQuery,jQuery(window),jQuery("body"));
!function(e){"use strict";e.fn.renderShares=function(t){t=e.extend({},e.fn.renderShares.defaults,t);var a,i,n,s,r=e(this),o=getTranslations({share:"Share",shareOn:"Share on",checkThisOut:"Found this page",email:"Email",slideshow:"Slideshow",copy:"Copy",copied:"Copied",localWarning:"Can't share local albums. Please upload your album first!"}),l=encodeURIComponent(t.callAction||o.checkThisOut),c=(t.label||o.share,t.indexName.getExt(),function(e){var t,a=this.querySelector("input[name=url]"),i=a.value;if(a){a.focus(),a.setSelectionRange(0,i.length);try{t=document.execCommand("copy")}catch(e){t=!1}t&&(a.value=o.copied+"...",a.classList.add("copied"),setTimeout(function(){a.value=i,a.classList.remove("copied")},500))}return!1}),d=function(e){var t=this.checked,a=this.name,i=this.parentNode.querySelector("input[name=url]");t?i.value.indexOf("#")>=0?-1===i.value.indexOf(new RegExp("[#&]"+a))&&(i.value+="&"+a):i.value+="#"+a:i.value=i.value.replace(new RegExp("[#&]"+a,"g"),"")},p=function(a,s){typeof s===UNDEF&&(s={}),s.hasOwnProperty("href")||(s.href=window.location.href),s=e.extend({},t,s);var p=e(s.currCardHook);if(s.hasOwnProperty("pageExt")||(s.pageExt=s.indexName.getExt()),s.hasOwnProperty("title"))s.title=s.title.stripHTML();else if(p.length){if(s.title=p.find(".caption .title").text(),!s.title){var h=p.find("img, video");s.title=h.length?h.attr("title")||h.attr("alt")||(h.attr("src")?h.attr("src").getFile().replace(/\.(jpg|gif|png|mp4)$/i,"").replace(/_/g," "):""):""}}else s.title=e("meta[name=title]").attr("content")||e("title").text()||"";if(s.hasOwnProperty("description")?s.description=s.description.stripHTML():p.length?s.description=p.find(".caption .comment").text():s.description=e("meta[name=description]").attr("content")||"",!s.hasOwnProperty("image")){var u=e(s.currCardHook+" img");u.length?s.image=u.attr("src"):(u=e(s.currCardHook+" video")).length?s.image=u.attr("src").replaceExt("jpg"):(u=e("link[rel=image_src]"),s.image=u.length?u.attr("href"):window.location.href.getDir()+"folderthumb.jpg")}s.image.startsWith("http")||(s.image=window.location.href.getDir()+s.image),s.usePreview&&(s.image&&i.attr("src",s.image),n.empty(),s.title&&n.append("<h3>"+s.title+"</h3>"),s.description&&n.append('<div class="description">'+s.description+"</div>"));var m,f=encodeURIComponent(s.href),g=s.href.indexOf("#img=")>0?s.href.replace(t.indexName,"").replace("#img=","slides/").replaceExt(s.pageExt):s.href,b=encodeURIComponent(s.title),w=encodeURIComponent(s.description),k=encodeURIComponent(s.image);r.find("."+t.sharesClass+" a").each(function(){var a=e(this);switch(a.data("share")){case"facebook":if(typeof FB!==UNDEF)return void a.off(".share").on("click.share",function(){return FB.ui({method:"share",href:g,caption:s.title,description:s.description,picture:s.image}),!1});m="https://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+s.href+"&p%5Bimages%5D%5B0%5D="+s.image+"&p%5Btitle%5D="+b;break;case"twitter":m="https://twitter.com/intent/tweet?url="+b+":%20"+f;break;case"tumblr":m="https://www.tumblr.com/share/link?url="+f+"&name="+b;break;case"pinterest":m="https://pinterest.com/pin/create/button/?url="+f+"&media="+k+"&description="+b;break;case"linkedin":m="https://www.linkedin.com/shareArticle?mini=true&url="+f+"&title="+b+"&summary="+w;break;case"digg":m="https://digg.com/submit?url="+s.href;break;case"reddit":m="https://www.reddit.com/submit?url="+s.href;break;case"email":m="mailto:?subject="+l+"&body="+b+"%0D%0A"+w+"%0D%0A"+encodeURI(s.href);break;case"link":var i=e('<form class="copy-url"><input name="url" type="text" readonly value="'+s.href+'"><input name="slideshow" id="slideshowcb" type="checkbox"><label for="slideshowcb">'+o.slideshow+'</label> <button type="submit" class="button icon-copy"> '+o.copy+"</button></form>");return i.on("submit",c),i.find("[name=slideshow]").on("change",d),void a.trigger("destroyTooltip").addTooltip(i,{stay:3e3,pos:t.pos});default:return}a.attr({href:m,target:"_blank"})})};return t.usePreview?((a=r.find("."+t.contClass)).length||(a=e("<div>",{class:t.contClass}).appendTo(r)),(i=a.find("img")).length||(i=e("<img>").appendTo(a)),(n=r.find("."+t.captionClass)).length||(n=e("<div>",{class:t.captionClass}).appendTo(a)),(s=r.find("."+t.socialLinksClass)).length||(s=e("<div>",{class:t.socialLinksClass}).appendTo(r))):s=r,function(a){for(var i,n,s=e("<div>",{class:t.sharesClass}).appendTo(a||r),l=t.sites.split(","),c=0;c<l.length;c++)i=l[c],"facebook,twitter,tumblr,pinterest,linkedin,digg,reddit,email,link".indexOf(i)>=0&&(n=e("<a>",{class:t.btnClass+" icon-"+i.unCamelCase(),rel:"noopener",text:" "+(t.buttonLabels?i.capitalize():"")}).data("share",i).appendTo(s),"email"===i?n.data("tooltip",o.email):"link"!==i&&n.data("tooltip",o.shareOn+" "+i.capitalize()));p(),s.children("a").not(".icon-link").addTooltip({pos:t.pos})}(s),t.hasOwnProperty("buttons")&&!LOCAL&&function(a){for(var i=t.buttons.split(","),n=encodeURIComponent(window.location.href.split("#")[0]),s=encodeURIComponent(t.title||e("meta[name=title]").attr("content")||e("title").text()),o=t.image?window.location.href.getDir()+encodeURIComponent(t.image):e("link[rel=image_src]").attr("href"),l=e("<div>",{class:t.buttonsClass}).appendTo(a||r),c=0;c<i.length;c++)switch(i[c]){case"facebook":l.append('<div class="likebtn fb-like" data-href="'+n+'" data-layout="button_count" data-action="like" data-size="large" data-show-faces="false" data-share="false"></div>');break;case"twitter":l.append('<a class="likebtn twitter-share-button icon-twitter" href="https://twitter.com/intent/tweet?text='+s+"&url="+n+'" data-size="large" target="_blank"> Tweet</a>');break;case"pinterest":l.append('<div class="likebtn"><a data-pin-do="buttonPin" data-pin-count="beside" data-pin-tall="true" data-pin-save="true" href="https://www.pinterest.com/pin/create/button/?url='+n+"&media="+o+"&description="+s+'" data-pin-do="buttonPin"></a></div>')}}(s),r.closest(".modal").length&&r.find("."+t.sharesClass+" a").on("click",function(){return e(this).closest(".modal").trigger("close"),!0}),r.on("updateLinks",p),this},e.fn.renderShares.defaults={buttonLabels:!1,usePreview:!0,contClass:"thumb",captionClass:"caption",socialLinksClass:"social-links",sharesClass:"shares",buttonsClass:"buttons",btnClass:"btn",sites:"facebook,twitter,tumblr",indexName:"index.html",currCardHook:".lightbox .curr",pos:[2,1,0,1]}}(jQuery);
!function(t,o){"use strict";var e,i,a="undefined",n="function",s=function(){var t=(document.body||document.documentElement).style;if(void 0!==t.webkitTransition)e="-webkit-",i="webkitTransitionEnd";else if(void 0!==t.MozTransition)e="-moz-",i="transitionend";else if(void 0!==t.OTransition)e="-o-",i="oTransitionEnd";else{if(void 0===t.transition)return!1;e="",i="transitionend"}return!0}(),r={left:0,top:0,center:.5,middle:.5,right:1,bottom:1};t.fn.translateX=function(o,r,p,f){var c={};if(typeof o===a){var l=t(this).eq(0);return s?l.position().left-parseFloat(l.css("left")):l.position().left-l.data("leftPos")||0}return typeof p===a?p="ease-out":typeof p===n&&(f=p,p="ease-out"),s&&(c[e+"transform"]="translateX("+o+"px)",c[e+"transition"]=e+"transform"+(r?" "+r+"ms "+p:"")),this.each(function(){var e=t(this);if(s)typeof f===n&&e.one(i,f),e.css(c);else{var a=e.data("leftPos");void 0===a&&e.data("leftPos",a=e.position().left),c.left=a+o,r?e.animate(c,{duration:r,easing:p,complete:f}):(typeof f===n&&setTimeout(function(){f.call(e[0])},50),e.css(c))}})},t.fn.translateY=function(o,r,p,f){var c={};if(typeof o===a){var l=t(this).eq(0);return s?l.position().top-parseFloat(l.css("top")):l.position().top-l.data("topPos")||0}return typeof p===a?p="ease-out":typeof p===n&&(f=p,p="ease-out"),s&&(c[e+"transform"]="translateY("+o+"px)",c[e+"transition"]=e+"transform"+(r?" "+r+"ms "+p:"")),this.each(function(){var e=t(this);if(s)typeof f===n&&e.one(i,f),e.css(c);else{var a=e.data("topPos");void 0===left&&e.data("topPos",a=e.position().top),c.top=a+o,r?e.animate(c,{duration:r,easing:p,complete:f}):(typeof f===n&&setTimeout(function(){f.call(e[0])},50),e.css(c))}})},t.fn.translate=function(o,r,p,f){var c={};if(typeof o===a){var l=t(this).eq(0);return s?[l.position().left-parseFloat(l.css("left")),l.position().top-parseFloat(l.css("top"))]:[l.position().left-l.data("leftPos")||0,l.position().top-l.data("topPos")||0]}return typeof p===a?p="ease-out":typeof p===n&&(f=p,p="ease-out"),s&&(c[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",c[e+"transition"]=e+"transform"+(r?" "+r+"ms "+p:"")),this.each(function(){var e=t(this);if(s)typeof f===n&&e.one(i,f),e.css(c);else{var a=e.data("leftPos");top=e.data("topPos"),void 0===a&&e.data("leftPos",a=e.position().left),void 0===top&&e.data("topPos",top=e.position().top),c.left=a+o[0],c.top=top+o[1],r?e.animate(c,{duration:r,easing:p,complete:f}):(typeof f===n&&setTimeout(function(){f.call(e[0])},50),e.css(c))}})},t.fn.translateXAndFade=function(o,r,p,f,c){var l={opacity:r};return typeof f===a?f="ease-out":typeof f===n&&(c=f,f="ease-out"),s&&(l[e+"transform"]="translateX("+o+"px)",l[e+"transition-property"]=e+"transform, opacity",l[e+"transition-duration"]=p+"ms",l[e+"transition-timing-function"]=f+", linear"),this.each(function(){var e=t(this);if(s)typeof c===n&&e.one(i,c),e.css(l);else{var a=e.data("leftPos");void 0===a&&e.data("leftPos",a=e.position().left),l.left=a+o,p?e.animate(l,{duration:p,specialEasing:[f,"linear"],complete:c}):(e.css(l),typeof c===n&&setTimeout(function(){c.call(e[0])},50))}})},t.fn.translateYAndFade=function(o,r,p,f,c){var l={opacity:r};return typeof f===a?f="ease-out":typeof f===n&&(c=f,f="ease-out"),s&&(l[e+"transform"]="translateY("+o+"px)",l[e+"transition-property"]=e+"transform, opacity",l[e+"transition-duration"]=p+"ms",l[e+"transition-timing-function"]=f+", linear"),this.each(function(){var e=t(this);if(s)typeof c===n&&e.one(i,c),e.css(l);else{var a=e.data("topPos");void 0===a&&e.data("topPos",a=e.position().top),l.top=a+o,p?e.animate(l,{duration:p,specialEasing:[f,"linear"],complete:c}):(e.css(l),typeof c===n&&setTimeout(function(){c.call(e[0])},50))}})},t.fn.translateAndFade=function(o,r,p,f,c){var l={opacity:r};return typeof f===a?f="ease-out":typeof f===n&&(c=f,f="ease-out"),s&&(l[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",l[e+"transition-property"]=e+"transform, opacity",l[e+"transition-duration"]=p+"ms",l[e+"transition-timing-function"]=f),this.each(function(){var e=t(this);if(s)typeof c===n&&e.one(i,c),e.css(l);else{var r=e.data("leftPos"),u=e.data("topPos");typeof r===a&&e.data("leftPos",r=e.position().left),typeof u===a&&e.data("topPos",u=e.position().top),l.left=r+o[0],l.top=u+o[1],p?e.animate(l,{duration:p,specialEasing:[f,"linear"],complete:c}):(e.css(l),typeof c===n&&setTimeout(function(){c.call(e[0])},50))}})},t.fn.opacity=function(o,r,p,f){var c=t(this);if(typeof o===a||"boolean"==typeof o)return c.css("opacity");var l=!1,u={},y=function(){l||(l=!0,typeof f===n&&f.call(c[0]))};return typeof r===n?(f=r,p="ease-out",r=0):typeof p===n&&(f=p,p="ease-out"),c.css("opacity")===o?(typeof f===n&&setTimeout(function(){f.call(c[0])},50),this):(u.opacity=o,s?r?(u[e+"transition"]="opacity "+r+"ms "+p,c.one(i,y),setTimeout(y,r+50),c.css(u)):(u[e+"transition"]="none",c.css(u),typeof f===n&&setTimeout(function(){f.call(c[0])},50)):r?c.animate(u,{duration:r,easing:p,complete:f}):(c.css(u),typeof f===n&&setTimeout(function(){f.call(c[0])},50)),this)},t.fn.transform=function(o,p,f,c,l){var u=t(this).eq(0),y=u.data("transform")||{origo:[0,0],position:[0,0],origin:[.5,.5],baseSize:[u.width(),u.height()],baseScale:[1,1],scale:[1,1],rotate:0};if("object"!=typeof o)return y;arguments.length>1?(typeof p===n?(l=p,f="ease-out",p=void 0):typeof f===n?(l=f,f="ease-out"):typeof c===n&&(l=c,c=!1),"boolean"==typeof f&&(c=f,f="ease-out"),"boolean"==typeof p&&(c=p,p=void 0)):f="ease-out";var d,m=!1,g={},h=function(){setTimeout(function(){m||(m=!0,typeof l===n&&l.call(u[0]))},20)};if(o.hasOwnProperty("opacity")&&(g.opacity=o.opacity),o.hasOwnProperty("origo")){if(!s||c){var v=u.data("originalPosition");typeof v===a&&(v=[u.position().left,u.position().top],u.data("originalPosition",v)),o.origo[0]+=v[0],o.origo[1]+=v[1]}}else o.origo=y.origo;return o.hasOwnProperty("baseScale")?"number"==typeof o.baseScale&&(o.baseScale=[o.baseScale,o.baseScale]):o.baseScale=y.baseScale,o.hasOwnProperty("baseSize")?o.scale||o.size||(o.scale=[1,1]):o.baseSize=y.baseSize,o.hasOwnProperty("position")?(typeof o.position[0]===a&&(o.position[0]=y.position[0]),typeof o.position[1]===a&&(o.position[1]=y.position[1])):o.position=y.position,o.hasOwnProperty("origin")?("string"==typeof o.origin[0]&&(o.origin[0]=r[o.origin[0]]),"string"==typeof o.origin[1]&&(o.origin[1]=r[o.origin[1]])):o.origin=y.origin,o.hasOwnProperty("scale")?"number"==typeof o.scale&&(o.scale=[o.scale,o.scale]):o.hasOwnProperty("size")?o.scale=[o.size[0]/o.baseSize[0],o.size[1]/o.baseSize[1]]:o.scale=y.scale,d=[o.scale[0]*o.baseScale[0],o.scale[1]*o.baseScale[1]],u.data("transform",o),s&&!c?(o.origin[0]===y.origin[0]&&o.origin[1]===y.origin[1]||(g[e+"transform-origin"]=100*o.origin[0]+"% "+100*o.origin[1]+"%"),g[e+"transform"]="translate("+(o.origo[0]+o.position[0])+"px,"+(o.origo[1]+o.position[1])+"px)"+(1===d[0]&&1===d[1]?"":" scale("+d[0]+","+d[1]+")")+(o.rotate?" rotate("+o.rotate+"deg)":""),p?(g[e+"transition-property"]=e+"transform"+(void 0!==o.opacity?", opacity":""),g[e+"transition-duration"]=p+"ms",f&&(g[e+"transition-timing-function"]=f),typeof l===n&&(u.one(i,h),setTimeout(h,p+50)),u.css(g)):(g[e+"transition"]="none",u.css(g),typeof l===n&&setTimeout(function(){l.call(u[0])},50))):(g.left=o.origo[0]+o.position[0],g.top=o.origo[1]+o.position[1],o.hasOwnProperty("size")?(g.width=o.size[0],g.height=o.size[1]):(g.width=o.baseSize[0]*d[0],g.height=o.baseSize[1]*d[1],g.left-=(g.width-o.baseSize[0])*o.origin[0],g.top-=(g.height-o.baseSize[1])*o.origin[1]),p?u.animate(g,{duration:p,easing:f,complete:l}):(u.css(g),typeof l===n&&setTimeout(function(){l.call(u[0])},50))),this}}(jQuery,document);
!function(e,t,o,n){"use strict";e.fn.swipe=function(n){n=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onSwipeStart:!1,onClick:!1,onDoubleClick:!1,onFinished:!1,threshold:20,clickThreshold:150,doubleClickThreshold:200,noSwipeInside:".caption",swipeoutSpeed:300,overThreshold:.25},n);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null};return this.each(function(){var r,s,u,l,c,p,h,d,f=e(this),m=f.parent(),g=f.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),w=!0,T=!0,S=!0,C=!1,y=null,v=null,N=(f.hasClass("audio")||f.hasClass("video"),function(e){typeof n.onFinished===FUNCTION&&n.onFinished.call(f[0],e)}),D=function(e){O(e),typeof n.onClick===FUNCTION&&n.onClick.call(f[0],e)},E=function(e,t){O(t),e?typeof n.onSwipedRight===FUNCTION&&n.onSwipedRight.call(f[0],t):typeof n.onSwipedLeft===FUNCTION&&n.onSwipedLeft.call(f[0],t)},O=function(e){"mouseup"===e.type||"mouseout"===e.type?(f.off("mouseup."+g+" mouseout."+g),o.off("mousemove."+g)):e.type===TOUCH.END&&f.off(TOUCH.END+"."+g)},I=function(){var e,t=window.getComputedStyle(f[0],null),o=t.getPropertyValue("transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-webkit-transform"),n=[];return o&&(e=o.match(/matrix(3d)?\(([^\)]+)\)/))?((e=e[2].split(/\s*,/)).forEach(function(e){n.push(parseFloat(e))}),n):null},M=function(e,t,o){var n,a=Array.from(d||(d=I()));a.length&&(16===a.length?(e[0]&&(a[12]+=e[0]),e[1]&&(a[13]+=e[1]),n="matrix3d("+a.join(",")+")"):(n="translateX("+(a[4]+e[0])+"px)",e[1]&&(n+=" translateY("+(a[5]+e[1])+"px)"),1===a[0]&&1===a[3]||(n+=" scale("+a[0]+","+a[3]+")")),window.requestAnimationFrame(function(){t?typeof o!==UNDEF?f.css({transition:"transform "+t+"ms ease-out, opacity "+t+"ms linear",opacity:o,transform:n}):f.css({transition:"transform "+t+"ms ease-out",transform:n}):f.css({transition:"none",transform:n})}))},U=function(e){return!!(w||S||e.originalEvent.touches&&e.originalEvent.touches.length>1)||(e.preventDefault(),T?h=[function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null}(e.originalEvent)-p[0],0]:((h=i(e.originalEvent))[0]-=p[0],h[1]-=p[1]),M(h),!1)},k=function(e){if(S)return!0;if(e.preventDefault(),y&&(clearTimeout(y),y=null),w=!0,(c=(new Date).getTime())-l>50&&function(e){return Array.isArray(e)?Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)):Math.abs(e)}(h)>n.threshold){var t=1+n.swipeoutSpeed/(c-l);if(f.data({scrolling:!0,swipeEnded:!0,taplength:c-l}),T){a=h[0]*t;s[0]>=r[0]||h[0]>0&&a-r[0]/2>s[0]*(n.overThreshold-.5)||a+r[0]/2<s[0]*(.5-n.overThreshold)?(M([a,0],n.swipeoutSpeed,0),v=setTimeout(N,n.swipeoutSpeed+20,e),E(h[0]>0,e)):M([a,0],n.swipeoutSpeed)}else{var o=parseInt(f.css("top")),a=[pos[0]+h[0]*t,h[1]>0?Math.min(-o,h[1]*t):Math.max(-o+s[1]-r[1],h[1]*t)];Math.abs(h[0])>Math.abs(h[1])&&(a[0]-r[0]/2>s[0]*(n.overThreshold-.5)||a[0]+r[0]/2<s[0]*(.5-n.overThreshold))?(M(a,n.swipeoutSpeed,0),v=setTimeout(N,n.swipeoutSpeed+20,e),E(h[0]>=0,e)):M(a,n.swipeoutSpeed)}C=!1}else h[0]||h[1]?(!function(e){O(e),typeof n.onSmallSwipe===FUNCTION&&n.onSmallSwipe.call(f[0],e)}(e),M([0,0],100),C=!1):n.onDoubleClick?C?((new Date).getTime()-c<n.doubleClickThreshold?function(e){O(e),typeof n.onDoubleClick===FUNCTION&&n.onDoubleClick.call(f[0],e)}(e):D(e),C=!1):(C=!0,y=setTimeout(function(e){D(e),C=!1},n.doubleClickThreshold+10,e)):D(e);return!1};f.add(o).off("."+g),f.data("lsw_ns",g),t.on("resize."+g,function(){clearTimeout(u),u=setTimeout(function(){s=a(m)},50)}),f.attr("draggable","false").on(TOUCH.START+"."+g+" dragstart."+g+" mousedown."+g,function(t){return!C&&("touchstart"!==t.type&&t.preventDefault(),"mousedown"===t.type&&1!==t.which?(function(e){O(e),typeof n.onRightClick===FUNCTION&&n.onRightClick.call(f[0],e)}(t),!0):pageZoomed()||t.originalEvent.touches&&t.originalEvent.touches.length>1||n.noSwipeInside&&e(t.target).closest(n.noSwipeInside).length||"A"===t.target.nodeName||"INPUT"===t.target.nodeName||"BUTTON"===t.target.nodeName||"AUDIO"===t.target.nodeName||"VIDEO"===t.target.nodeName&&t.target.controls&&(ISIOSDEVICE||t.offsetY>e(t.target).height()-60)?(S=!0,!0):(S=!1,w=!1,C=!1,f.data({scrolling:!0,swipeEnded:!1,taplength:0}),l=(new Date).getTime(),p=i(t.originalEvent),s=a(m),r=a(f),T=s[1]>=r[1],h=[0,0],(d=I())||(d=[1,0,0,1,0,0],f.css({transform:"matrix(1, 0, 0, 1, 0, 0)"})),function(e){"mousedown"===e.type?(f.on("mouseup."+g+" mouseout."+g,k),o.on("mousemove."+g,U)):e.type===TOUCH.START&&f.on(TOUCH.END+"."+g,k),C=!1}(t),"touchstart"===t.type))}).on(TOUCH.MOVE+"."+g+" drag."+g,U).on("removeSwipe."+g,function(){setTimeout(function(){f.data("scrolling",!1)},20),f.removeAttr("draggable"),f.add(o).off("."+g)}).on("selectstart."+g,function(e){return e.preventDefault(),!1})})}}(jQuery,jQuery(window),jQuery(document));
!function(e){"use strict";e.fn.audioPlayer=function(t){e(this).data("audioplayer")&&(t=e.extend({},t,e(this).data("audioplayer"))),(t=e.extend({},e.fn.audioPlayer.defaults,t)).hasOwnProperty("rootPath")&&"."!==t.rootPath||(t.rootPath="");var a="lap_ns",o=(t.rootPath?t.rootPath+"/":"")+t.folder+"/";return this.each(function(){var n,s,u,l=e(this),r=e(),i=e(),p=e(),d=e(),c=e(),f=0,m=t.volume,v=!1,y=function(a){if(typeof a!==UNDEF&&typeof a!==e.event||(a=f),c.attr("src")&&a===f){if(!d[0].paused)return}else!function(e){d[0].pause(),(e>=n.length||e<0)&&(e%=n.length),c.attr({src:o+n[e]}),d[0].load(),f=e,p.children().removeClass("active"),p.children().eq(e).addClass("active")}(a);(s=d[0].play())&&s.then(function(){l.addClass("active"),l.data("paused",!1),typeof t.onPlaying===FUNCTION&&t.onPlaying.call(l)},function(e){l.removeClass("active"),l.data("paused",!0),typeof t.onPaused===FUNCTION&&t.onPaused.call(l),console.log("Autoplay has been prevented by the browser. Interact with the page first!")})},h=function(){clearTimeout(u);var e=d[0].volume;if("number"==typeof e||"number"==typeof(e=parseFloat(e))){if((e=Math.min(e+t.step,1))>=m)return d[0].volume=m,void setTimeout(function(){v=!1},50);d[0].volume=e,u=setTimeout(h,t.stepFreq)}},P=function(){d[0].paused&&(d[0].volume=.01,y()),v=!0,u=setTimeout(h,t.stepFreq),l.data("paused",!1)},T=function(){clearTimeout(u);var e=d[0].volume;if("number"==typeof e||"number"==typeof(e=parseFloat(e))){if((e=Math.max(e-t.step,0))<.01)return d[0].volume=0,C(),void setTimeout(function(){v=!1},50);d[0].volume=e,u=setTimeout(T,t.stepFreq)}},g=function(){d[0].paused||(v=!0,u=setTimeout(T,t.stepFreq)),l.data("paused",!0)},F=function(){f>=n.length-1?t.loop&&y(0):y(f+1)},C=function(){d[0].pause(),s=null,l.removeClass("active"),l.data("paused",!0)},k=function(){e.cookie&&e.cookie("ap-status",(d[0].paused?"0":"1")+"::"+(d[0].currentTime||0)+"::"+(v||d[0].paused?m:d[0].volume)+(f?"::"+f:""))};if(r=e("#"+l.data("rel")),l.data("src"))n=l.data("src").split("::");else{if(!t.hasOwnProperty("src"))return;n="string"==typeof t.src?t.src.split("::"):t.src}t.saveStatus&&function(){if(e.cookie){var a=e.cookie("ap-status");a&&(a=a.split("::"),t.autoPlay="1"===a[0],t.startTime=parseFloat(a[1]||0,10),m=t.volume=parseFloat(a[2])||.2,((f=parseInt(a[3]||0,10))<0||f>n.length)&&(f=0))}}(),function(){if(i=e("<div>",{class:t.playerHook}),(d=e("<audio>",{preload:"auto",controls:!0,controlsList:"nofullscreen nodownload noremote"}).appendTo(i))[0].pause(),l.data("paused",!0),c=e("<source>",{src:o+n[f]}).appendTo(d),setTimeout(function(){d.on("ended."+a,function(){return F(),!0}),d.on("pause."+a,function(){l.data("paused",!0),l.removeClass("active"),typeof t.onPaused===FUNCTION&&t.onPaused.call(l)}),d.on("playing."+a,function(){l.data("paused",!1),0===d[0].volume&&(d[0].volume=m||t.volume),l.addClass("active"),typeof t.onPlaying===FUNCTION&&t.onPlaying.call(l)}),d.on("volumechange."+a,function(){v||(clearTimeout(u),m=d[0].volume)})},100),n.length){p=e("<ul>",{class:t.playListHook}).appendTo(i);for(var s=0;s<n.length;s++)p.append(e("<li>").append(e("<a>",{text:decodeURIComponent(n[s].replace(/\.[^\.]*$/,""))}).on("click."+a,function(t){var a=p.children().index(e(t.target).parent());return y(a),!1})));p.children().eq(f).addClass("active")}}(),r.length?r.append(i):l.addTooltip(i,{pos:t.pos}),l.on("click."+a,function(){return!(!r.length||r.is(":hidden"))||(l.data("paused")?P():g(),!1)}),l.on("removePlayer."+a,function(){i.trigger("removeTooltip"),i.add(l).off("."+a),i.remove()}),l.on("pausePlayer."+a,C),l.on("startPlayer."+a,y),l.on("fadeInPlayer."+a,P),l.on("fadeOutPlayer."+a,g),setTimeout(function(){d[0].volume=t.volume,t.hasOwnProperty("startTime")&&(d[0].currentTime=t.startTime),t.autoPlay&&P(),e(window).on("unload."+a,k)},50)})},e.fn.audioPlayer.defaults={autoPlay:!0,loop:!0,volume:.2,stepFreq:30,step:.02,saveStatus:!0,playerHook:"player",playListHook:"play-list",folder:"res",rootPath:".",pos:[1,2,1,0],onPlaying:null,onPaused:null}}(jQuery);
!function(t,e,n,a,o){"use strict";var i=function(t){return t*(1-2*Math.random())};t.fn.lightbox=function(o,s){if(typeof o===UNDEF)return this;s=t.extend({},t.fn.lightbox.defaults,s);var r=getTranslations(t.fn.lightbox.text),l={lightbox:"lightbox",prev:"jprev",next:"jnext",pause:"pause",jalbum:"jalbum",cards:"jcards",card:"jcard",caption:"jcaption",scrollable:"scrollable",title:"jtitle",hasCaption:"jhascaption",imageReady:"jimageready",prevPage:"jprevpg",nextPage:"jnextpg",currPage:"jcurrpg",paging:"jpaging",shade:"jshade",threedee:"threedee"};return t(this).each(function(){var c=t(this),d=c.parent(),u=c.data("lightbox-ns");if(typeof u===UNDEF){var p,h,m,f,g,w,v,y,b=[],C=-1,T=1,x=0,A=0,S=(t(),t()),k=null,F=null,P=!1,I=null,O=null,M=!1,D=t(),E=(new Date,function(){D.length&&(D.translateXAndFade(0,1,2*h.speed),D=t())}),q=function(){var t,e=!!F;if(!(x<2))if("random"===h.ordering){do{t=Math.floor(Math.random()*b.length)}while(t===C);it(t)}else N(e)},L=function(t){if(H(),T=-1,C)it(C-1);else if("base"===c.data("overlay")){switch(h.afterLast){case"donothing":break;case"nextfolder":h.previousFoldersLast&&(window.location.href=h.previousFoldersLast+(typeof t!==UNDEF&&t?"&slideshow":""));break;case"backtocover":case"startover":case"onelevelup":case"ask":return void it(b.length-1)}E()}else it(b.length-1)},N=function(e){if(H(),T=1,C<b.length-1)it(C+1);else if("base"===c.data("overlay")){switch(h.afterLast){case"donothing":break;case"startover":return void it(0);case"onelevelup":h.level?window.location.href="../"+h.indexName:h.uplink&&(window.location.href=h.uplink);break;case"nextfolder":h.nextFoldersFirst&&(window.location.href=h.nextFoldersFirst+(typeof e!==UNDEF&&e?"&slideshow":""));break;case"backtocover":h.hasOwnProperty("onQuit")&&h.onQuit.call(null,C);break;case"ask":var n=new Array;return E(),b.length>1&&n.push({t:r.startOver,c:"icon-loop",h:function(t){it(0)}}),h.level&&n.push({t:r.upOneLevel,c:"icon-one-level-up",h:function(){window.location.href="../"+h.indexName}}),h.uplink&&n.push({t:h.uplinkText,c:"icon-home",h:function(){window.location.href=h.uplink}}),n.push({t:r.backToCover,c:"icon-arrow-down",h:function(){h.hasOwnProperty("onQuit")&&h.onQuit.call(null,C)}}),h.nextFoldersFirst&&n.push({t:r.nextFolder,c:"icon-arrow-right",h:function(){window.location.href=h.nextFoldersFirst}}),void c.modal(t("<p>",{class:"text-center",text:r.atLastPageQuestion}),n,{onClose:function(){j(),it(b.length-1)},class:"secondary",title:r.atLastPage})}E()}else it(0)},H=function(){F?(clearTimeout(F),F=null,P=!0):P=!1},U=function(t){t=t||0;clearTimeout(F),Q()?Z(q):F=setTimeout(q,h.slideshowDelay+t),h.auto=!0,P=!1},R=function(t){SMALLSCREEN&&h.useFullScreen&&!document.fullscreenElement&&(document.documentElement.requestFullscreen().catch(function(t){console.log("Error going full-screen: ${err.message} (${err.name})")}),I=setTimeout(st,100)),requestWakeLock(),U(t),h.hasOwnProperty("onSlideshowStart")&&h.onSlideshowStart.call(null,C),h.hideSidebar&&st()},V=function(){clearTimeout(F),F=null,h.auto=!1,P=!1},j=function(){h.auto&&(V(),h.hasOwnProperty("onSlideshowPause")&&h.onSlideshowPause.call(null,C),releaseWakeLock(),h.hideSidebar&&st())},z=function(){F?(P=!0,clearTimeout(F),F=null):P=!1},B=function(){P&&(P=!1,h.auto&&(F=setTimeout(q,h.slideshowDelay/4)))},Y=function(t){S.length&&t.length&&t.css("width",100*S[0].currentTime/S[0].duration+"%")},W=function(){if(S.length){var e,n=S.siblings(".audioclip-btn"),a=n.children(".progress");(e=S[0].play())&&e.then(function(){n.removeClass("icon-volume-up").addClass("icon-pause"),S.parent().removeClass("paused").addClass("playing"),z(),a.length||(a=t("<div>",{class:"progress"}).appendTo(n)),Y(a),k=setInterval(Y,100,a),S.on("ended",function(){n.removeClass("icon-pause").addClass("icon-volume-up"),S.parent().removeClass("playing").addClass("paused"),B(),a.remove(),clearInterval(k)})},function(t){n.removeClass("icon-pause").addClass("icon-volume-up"),console.log(t)})}},G=function(){if(S.length){var t=S.siblings(".audioclip-btn");S.data("wasPlaying",!S[0].paused),S[0].pause(),clearInterval(k),t.removeClass("icon-pause").addClass("icon-volume-up"),S.parent().removeClass("playing").addClass("paused"),B()}},Q=function(){var t=g.children("#c"+C).children("audio,video");return!!t.length&&!t[0].paused},Z=function(t){typeof t===FUNCTION&&g.children("#c"+C).children("audio,video").eq(0).on("ended",t)},X=function(){h.auto&&B(),G()},K=function(e){var n=0;clearTimeout(O),O=null,g.find("."+l.card).each(function(a){var i=t(this);if(typeof e!==UNDEF&&!e&&i.data("fitted"))return n++,!0;var s=i.children("img");if(!s.length)return!0;var r,l=b[t(this).data("idx")],c=Math.min(i.outerWidth(),g.outerWidth()),d=Math.min(i.outerHeight(),g.outerHeight()),u=s[0].naturalWidth||s.width(),p=s[0].naturalHeight||s.height(),m=o.getDimensions(l),f=o.getMaxDimensions(l);if(!(u&&p&&c&&d))return!0;A?(r=Math.min(f[0]/m[0],f[1]/m[1]),i.removeClass(h.containClass)):(r="both"===h.fit?Math.min(c/u,d/p):"cover"===h.fit?Math.max(c/u,d/p):"vertically"===h.fit||c/u>d/p?d/p:"horizontally"===h.fit?c/u:1,r=Math.min(r,h.scaleUp?h.maxZoom:1),i.addClass(h.containClass)),u*=r,p*=r,i.css({width:"auto"}),s.add(i.find("."+h.regionsClass)).css({transition:"all 300ms ease-out",left:(c-u)/2,top:(d-p)/2,width:u,height:p}),i.data("fitted",!0),n++}),g.find("."+l.card).length>n&&(O=setTimeout(K,100,e))},$=function(e){var n=e.find("img").eq(0),a=b[e.data("idx")],i=a[J.CATEGORY],s=t("<"+i+">",{preload:"auto",controls:"true",controlsList:"nodownload"}).insertAfter(n);if("video"===i&&s.attr({width:a[i][J.WIDTH],height:a[i][J.HEIGHT]}),s.attr("autoplay",h.videoAuto).on("volumechange."+u,function(){h.volume=this.volume}).one("ended",X).attr("src",o.getSourcePath(a)),s[0].volume=h.volume,"video"===i){var r=Math.min(e.width()/a[i][J.WIDTH],e.height()/a[i][J.HEIGHT]);s.css({width:r*a[i][J.WIDTH],height:r*a[i][J.HEIGHT]})}return s},_=function(e){z();var n;e instanceof t?n=e:e&&(e.preventDefault(),n=t(e.target).closest("."+l.card));var a=n.children("video,audio");return a.length||(a=$(n)),a.one("loadedmetadata",function(){this.paused&&("VIDEO"===this.nodeName?(playVideo(this),W()):this.play().then(function(){addClass(this,"playing")}).catch(function(t){console.log("Autoplay rejected. Try starting the audio manually!")}))}),n.addClass("media-playing"),!1},tt=function(e){var n="touch"===t("html").data("whatinput")||"touchend"===e.type,a=t(e.target).closest("."+l.card);if("video"===a.data("type")||"audio"==a.data("type")){var o=media[0];return o.paused?(o.play(),"ms"!==VEND&&(o.controls=!1)):(o.pause(),"ms"!==VEND&&(o.controls=!0)),n&&nt(),!1}"nextimage"===h.clickAction?(e.pageX||e.originalEvent.pageX)-c.position().left>c.width()/2?N():L():"donothing"!==h.clickAction&&nt()},et=function(t){return A=A<50?100:0,K(),!1},nt=function(t){return d.hasClass(h.thumbsHiddenClass)?d.removeClass(h.thumbsHiddenClass).addClass(h.thumbsVisibleClass):d.removeClass(h.thumbsVisibleClass).addClass(h.thumbsHiddenClass),!1},at=function(e){var n=e?(e instanceof jQuery?e:t(e.target)).closest("."+l.card):g.find("#c"+C),a=function(){return[n.outerWidth()||g.width(),n.outerHeight()||g.height()]};t(".map-root").trigger("resetMarkers"),n.addClass(l.imageReady);var o=n.prevAll(),s=null,r=function(e){clearTimeout(s),s=null;new Date;var a=e?t(this).closest("."+l.card):n.prevAll();a.data("ts")||a.children("."+l.card).data("ts");a.length&&(a.parent().hasClass(l.prevPage)?a.parent().remove():"coverflow"===h.transitionType?a.not(n.prev()).remove():a.remove())};if((T=function(t,e){return 1===b.length?0:!e&&t>1&&t===b.length-1?1:!t&&e>1&&e===b.length-1?-1:e>t?1:-1}(n.prev().data("idx"),n.data("idx")))>0?g.removeClass("bwd").addClass("fwd"):T<0&&g.removeClass("fwd").addClass("bwd"),"carousel"!==h.transitionType&&("coverflow"===h.transitionType?n.prev().prev().prevAll().remove():n.prev().prevAll().remove(),o=n.prevAll()),o.data("ts",new Date),o.destroyAllTooltips(),function(t){if(t&&t.length){var e=t.children("img");window.getComputedStyle(t[0],null),e.length&&window.getComputedStyle(e[0],null)}}(n),K(),h.hasOwnProperty("onLoadEnd")&&h.onLoadEnd.call(this,C),n.swipe({noSwipeInside:"."+l.caption,onSwipedLeft:function(e){D=t(this),N()},onSwipedRight:function(){D=t(this),L()},onSwipeStart:function(){V()},onClick:tt,onDoubleClick:h.doubleClickZoom?et:null}),(n.hasClass("video")||n.hasClass("audio"))&&h.videoAuto&&_(n),(o.hasClass("video")||o.hasClass("audio"))&&o.find("audio,video").each(function(){this.pause()}),D.length){var c=function(){n.css({opacity:0,transform:"scale(.95) translateX("+100*T+"px)"}),o.one("transitionend",r),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transform:"scale(1) translateX(0)"+(y?" translateZ("+-1*function(t){var e,n=window.getComputedStyle(t[0],null),a=n.getPropertyValue("transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-webkit-transform");return a&&(e=a.match(/matrix(3d)?\(([^\)]+)\)/))&&16===(e=e[2].split(/\s*,/)).length?parseFloat(e[14]):0}(g)+"px)":""),transition:"opacity "+h.transitionSpeed+"ms ease-in-out, transform "+h.transitionSpeed+"ms ease-out"}),s=setTimeout(r,h.transitionSpeed)};window.requestAnimationFrame(c),D=t()}else{switch(h.transitionType){case"crossfade":if(o.length){var c=function(){n.css({opacity:0,transition:"none"}),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transition:"opacity "+h.transitionSpeed+"ms ease-in-out"}),o.one("transitionend",r).css({opacity:0}),s=setTimeout(r,h.transitionSpeed+20)};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+h.transitionSpeed+"ms ease-in-out"})});break;case"zoom":if(o.length){var c=function(){n.show().css({opacity:0,transform:"scale("+(T>0?.9:1.11)+")",transition:"none"}),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+h.transitionSpeed+"ms ease-out, opacity "+h.transitionSpeed+"ms ease-in-out"}),o.one("transitionend",r).css({opacity:0,transform:"scale("+(T>0?1.11:.9)+")",transition:"transform "+h.transitionSpeed+"ms ease-out, opacity "+h.transitionSpeed+"ms ease-in-out"}),s=setTimeout(r,h.transitionSpeed+20)};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.show().css({transform:"scale(1)",opacity:1})});break;case"stack":if(o.length){var u=a(),p=((v=i(60))+90)/180*Math.PI,m=Math.min(u[0],u[1])/4,c=function(){n.css({opacity:0,transform:"scale(0.92)",transition:"none"}),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+h.transitionSpeed+"ms ease-out, opacity "+h.transitionSpeed/2+"ms linear"}),o.one("transitionend",r).css({opacity:0,transform:"rotate("+(0-v/10)+"deg) translate("+Math.round(m*Math.cos(p))+"px,"+T*Math.round(0-m*Math.sin(p))+"px)",transition:"transform "+h.transitionSpeed+"ms ease-out, opacity "+h.transitionSpeed/2+"ms linear"}),s=setTimeout(r,h.transitionSpeed+20)};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transform:"scale(1)",transition:"opacity "+Math.min(h.transitionSpeed/2,500)+"ms linear"})});break;case"kenburns":var u=a(),f=n.children("img").eq(0),w=1.14+i(.2),v=i(1)*Math.PI,m=(Math.random()+.2)*Math.min(u[0],u[1])*.08,A=Math.round(m*Math.cos(v)),S=Math.round(m*Math.sin(v)),c=function(){n.data({sc:w>1.14?w-.2:w+.2,dx:-A,dy:-S}),f.css({transform:"translate("+A+"px,"+S+"px) scale("+w+")",transition:"none"}).show(),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transition:"opacity "+h.transitionSpeed+"ms linear"}),f.css({transform:"scale("+(w>1.14?w-.1:w+.1)+") translate(0,0)",transition:"transform "+h.transitionSpeed+"ms linear"}),o.length&&(f=o.children("img").eq(0),o.css({opacity:0,transition:"opacity "+h.transitionSpeed/2+"ms linear"}),f.one("transitionend",r).css({transition:"transform "+h.transitionSpeed/2+"ms linear",transform:"scale("+o.data("sc")+") translate("+o.data("dx")+"px,"+o.data("dy")+"px)"}),s=setTimeout(r,h.transitionSpeed+20))};window.requestAnimationFrame(c);break;case"slide":if(o.length){var k=h.direction.length>1?function(){if(h.direction.length>0){for(var t=[],e=0;e<h.direction.length;e++)switch(h.direction[e].toLowerCase()){case"e":t.push([1,0]);break;case"s":t.push([0,1]);break;case"w":t.push([-1,0]);break;case"n":t.push([0,-1])}return 1===t.length?t[0]:t.length>1?t[Math.floor(Math.random()*t.length)]||[1,0]:[1,0]}return Math.random()>=.5?[Math.random()>=.5?1:-1,0]:[0,Math.random()>=.5?1:-1]}():T<0?function(t){switch(h.direction[0].toLowerCase()){case"s":return[0,-1];case"w":return[1,0];case"n":return[0,1];default:return[-1,0]}}():function(){switch(h.direction[0].toLowerCase()){case"s":return[0,1];case"w":return[-1,0];case"n":return[0,-1];default:return[1,0]}}(),u=a(),c=function(){n.show().css({opacity:.7,transform:"translate("+k[0]*u[0]+"px,"+k[1]*u[1]+"px)",transition:"none"}),o.css({transition:"none"}),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transform:"translate(0,0)",transition:"transform "+h.transitionSpeed+"ms ease-in-out, opacity "+h.transitionSpeed+"ms ease-out"}),o.one("transitionend",r).css({opacity:.7,transform:"translate("+(0-k[0]*u[0])+"px,"+(0-k[1]*u[1])+"px)",transition:"transform "+h.transitionSpeed+"ms ease-in-out, opacity "+h.transitionSpeed+"ms ease-out"}),s=setTimeout(r,h.transitionSpeed+20)};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(h.transitionSpeed,1e3)+"ms ease-out"})});break;case"swap":if(o.length){var u=a(),c=function(){n.css({zIndex:0,opacity:0,transform:"scale(0.7) translate(0,-40px)",transition:"none"}).show(),o.css({zIndex:1,opacity:1,transition:"none"}),window.requestAnimationFrame(d)},d=function(){n.css({opacity:1,transform:"scale(0.85) translate("+u[0]/2+"px,-40px)",transition:"transform "+h.transitionSpeed/2+"ms ease-in-out, opacity "+h.transitionSpeed/2+"ms linear"}).one("transitionend",function(){window.requestAnimationFrame(P)}),o.css({transform:"scale(0.7) translate("+(0-.55*u[0])+"px,20px)",transition:"transform "+h.transitionSpeed/2+"ms ease-in-out, opacity "+h.transitionSpeed/2+"ms linear"}),s=setTimeout(r,h.transitionSpeed+30)},P=function(){n.css({zIndex:1,transform:"scale(1) translate(0,0)"}),o.css({zIndex:0,opacity:0,transform:"scale(0.49) translate(0,40px)"}).one("transitionend",r)};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.css({zIndex:1,opacity:0,transform:"scale(0.85)",transition:"none"}).show(),window.requestAnimationFrame(function(){n.css({opacity:1,transform:"scale(1)",transition:"transform "+Math.min(h.transitionSpeed/2,500)+"ms ease-in-out, opacity "+Math.min(h.transitionSpeed/2,500)+"ms linear"})})});break;case"carousel":var u=a(),I=g.children().index(n),m=Math.round(u[0]/(2*Math.tan(Math.PI/x))),p=Math.round(u[0]/(2*Math.sin(Math.PI/x))),v=360/x;if(g.data("initialized")){d=function(){I=Math.floor((g.data("num")||0)/x)*x+(I||x),g.data("num",I).css({transform:"translateZ(-"+p+"px) rotateY(-"+I*v+"deg)",transition:"transform "+h.transitionSpeed+"ms"}).children().css({opacity:BACKFACEBUG?.9:.6}),n.css({opacity:1})};window.requestAnimationFrame(d)}else{c=function(){g.css({transform:"translateZ(-"+p+"px) rotateY(0)",transition:"none"}),g.children().each(function(e){t(this).css({backfaceVisibility:"visible",opacity:e===I?1:BACKFACEBUG?.9:.6,transform:"rotateY("+e*v+"deg) translateZ("+m+"px)",transition:"none"}).show()}),g.data({num:0,initialized:!0}),window.requestAnimationFrame(function(){g.css({transition:"transform "+h.transitionSpeed+"ms"}),g.children().css({backfaceVisibility:"hidden",transition:"opacity "+h.transitionSpeed+"ms ease-out"})})};window.requestAnimationFrame(c)}break;case"flip":if(o.length){var c=function(){n.css({opacity:0}).show().css({transition:"opacity "+h.transitionSpeed+"ms"}),window.requestAnimationFrame(d)},d=function(){o.css({opacity:0}),n.css({opacity:1}),g.css({transform:"rotateY("+(T<0?"180":"-180")+"deg)",transition:"transform "+h.transitionSpeed+"ms"}).on("transitionend",function(t){window.requestAnimationFrame(O)}),s=setTimeout(O,h.transitionSpeed+20)},O=function(){r(),g.css({transition:"none",transform:"rotateY(0)"})};window.requestAnimationFrame(c)}else window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(h.transitionSpeed,1e3)+"ms"})});break;case"book":g.children("."+l.paging).remove();var M,E,J,H,U,R,j,z=h.fitPadding,B=g.width()-2*z,Y=B/2,c=function(){g.children("."+l.prevPage).length&&g.find("."+l.prevPage+" ."+l.card).unwrap(),o.css({width:B,left:T>0?0:-Y}).wrap(M=t("<div>",{class:l.prevPage})),n.css({opacity:1,width:B,left:T>0?-Y:0,zIndex:0}).wrap(E=t("<div>",{class:l.nextPage})).show(),J=t("<div>",{class:l.paging}).appendTo(g),H=o.clone().css({left:T>0?"-100%":0}).appendTo(J),U=n.show().clone().css({opacity:1}).appendTo(J),H.add(U).find("audio,video").each(function(){this.pause()}),R=t("<div>",{class:l.shade}).appendTo(H),j=t("<div>",{class:l.shade}).hide().appendTo(U),J.show().css({zIndex:2,transition:"transform "+h.transitionSpeed/2+"ms linear"}).data("ts",new Date),window.requestAnimationFrame(d)},d=function(){R.css({transition:"opacity "+h.transitionSpeed/2+"ms cubic-bezier(0.32, 0, 0.67, 0)",opacity:.75}),J.one("transitionend",function(){window.requestAnimationFrame(P)}).css({transform:"rotateY("+(T>0?"-90":"90")+"deg)"}),s=setTimeout(O,h.transitionSpeed+30)},P=function(){H.hide(),U.css("backface-visibility","visible").show(),J.one("transitionend",function(t){window.requestAnimationFrame(O)}).css({transform:"rotateY("+(T>0?"-180":"180")+"deg)"}),j.show().css({transition:"opacity "+h.transitionSpeed/2+"ms cubic-bezier(0.33, 1, 0.68, 1)",opacity:0})},O=function(){J&&J.remove(),n.parent().hasClass(l.nextPage)&&n.unwrap("."+l.nextPage).css("left",z),r()};o.length?window.requestAnimationFrame(c):window.requestAnimationFrame(function(){n.show().css({opacity:1,transition:"opacity "+Math.min(h.transitionSpeed,500)+"ms"})});break;case"cube":var u=a(),m=Math.round(u[1]/2),c=function(){n.css({opacity:.01,backfaceVisibility:"visible"}).show(),window.requestAnimationFrame(d)},d=function(){n.css({transform:"rotateX("+(T<0?"90":"270")+"deg) translateZ("+m+"px)"}),n.css({opacity:1,transition:"opacity "+h.transitionSpeed+"ms"}),o.css({opacity:0,transition:"opacity "+h.transitionSpeed+"ms"}),g.css({transform:"translateZ("+m+"px) rotateX(0)"}).on("transitionend",function(t){window.requestAnimationFrame(O)}).css({transition:"transform "+h.transitionSpeed+"ms",transform:"translateZ(-"+m+"px) rotateX("+90*T+"deg)"})},O=function(){g.css({transition:"none",transform:"translateZ(-"+m+"px) rotateX(0)"}),n.css({zIndex:0,transform:"rotateX(0) translateZ("+m+"px)"}),r()};window.requestAnimationFrame(c);break;case"coverflow":var W=n.next(),G=n.prev(),Q=G.prev(),m=a()[0]/8,Z=null;c=function(){Q.css({zIndex:0}),n.css({zIndex:2}),G.length||n.css({opacity:1,transform:"scale(0.5) translate3d("+m*h.coverflowFactor[0]+"px,0,-"+2*m+"px) rotateY(-86deg)"}).show(),W.css({zIndex:1,opacity:0,transform:"scale(0.4) translate3d("+m*h.coverflowFactor[1]+"px,0,-"+3*m+"px) rotateY(-120deg)"}).show().css({willChange:"transform, opacity"}),n.add(G).css({opacity:1,transition:"transform "+h.transitionSpeed+"ms ease-in-out"}),W.add(Q).css({transition:"transform "+h.transitionSpeed+"ms ease-in-out, opacity "+h.transitionSpeed+"ms linear"}),window.requestAnimationFrame(d)},d=function(){G.on("transitionend",function(){Q.remove()}).css({transform:"scale(0.5) translate3d(-"+m*h.coverflowFactor[0]+"px,0,-"+2*m+"px) rotateY(86deg)"}),W.css({opacity:1,transform:"scale(0.5) translate3d("+m*h.coverflowFactor[0]+"px,0,-"+2*m+"px) rotateY(-86deg)"}),n.css({opacity:1,transform:"scale(0.75) translate3d(0,0,0) rotateY(0)"}),Q.css({opacity:0,transform:"scale(0.4) translate3d(-"+m*h.coverflowFactor[1]+"px,0,-"+3*m+"px) rotateY(120deg)"}),Z=setTimeout(function(){clearTimeout(Z),window.requestAnimationFrame(P)},.5*h.transitionSpeed)},P=function(){n.css({zIndex:3}),G.css({zIndex:1})},window.requestAnimationFrame(c)}h.auto&&(n.hasClass("video")||n.hasClass("audio")&&h.videoAuto?n.children("audio,video").on("ended",function(){F=setTimeout(q,200)}):F=setTimeout(q,h.slideshowDelay+h.transitionSpeed))}},ot=function(){var t=p.find("."+h.regionsClass);return t.length&&(h.regionsVisible=!h.regionsVisible,t.is(":visible")?t.fadeOut():t.fadeIn()),!1},it=function(e,n){H(),"random"===h.ordering?C=e:(C=e%x,n=n?Math.min(n,x-C):0);var i=[g.outerWidth(),g.outerHeight()],s=function(e){if(e>=b.length)return t();var n,a=t("<div>",{id:"c"+e,class:l.card+" "+(b[e][J.CATEGORY]||"folder")+" "+h.transitionType}).data("idx",e).appendTo(g),s=b[e];if(a.css("opacity",0).addClass(b[e][J.CATEGORY]),a.outerWidth()||g.outerWidth(),a.outerHeight()||g.outerHeight(),a.data("type",s[J.CATEGORY]),"folder"===s[J.CATEGORY]){var c=o.getThemeImagePath(s);n=t("<img>").attr("src",c),a.append(t("<div>",{class:"hero",content:""}).append(n)).append(t("<div>",{class:"album-title",html:s[J.FOLDERTITLE]||s[J.THUMBCAPTION]}))}else{n=t("<img>").appendTo(a);var u=o.getOptimalImagePath(s,i),p=s[J.CATEGORY],m=t("<div>",{class:[l.caption,h.captionplacement,h.captionstyle].join(" ")}),f=t("<div>",{class:"buttons"});if(h.printImage&&"image"===p&&!h.rightClickProtect&&(C=t("<a>",{class:h.buttonClass+" icon-printer"}).attr("data-tooltip",r.print).on("click",function(t){return printImage(s[J.ORIGINAL]&&h.showDownload?s[J.ORIGINAL][J.PATH]:s[J.IMAGE][J.PATH],s[J.TITLE]||"",s[J.THUMBCAPTION]||""),!1}).appendTo(f)),h.showDownload&&("image"===p||h.allowDownloadOthers)){var w=o.getOriginalPath(s);!w&&h.allowDownloadScaled&&(w=o.getImagePath(s)),w&&(C=t("<a>",{class:h.buttonClass+" icon-download",download:"",href:w}).attr("data-tooltip",r.download).appendTo(f))}if(!LOCAL&&typeof FOTOMOTO!==UNDEF&&h.fotomoto&&(C=t("<a>",{class:h.buttonClass+" icon-fotomoto fotomoto-btn"}).attr("data-tooltip",r.fotomotoBtn).on("click",function(t){FOTOMOTO.API.showWindow(10,o.getOriginalPath(s)||o.getItemPath(s))}).appendTo(f)),s[J.PHOTODATA]&&(C=t("<a>",{class:h.buttonClass+" icon-camera meta"}).attr("data-tooltip",'<div class="photodata">'+s[J.PHOTODATA]+"</div>").appendTo(f)),h.showRegions&&"image"===p&&s[J.REGIONS]&&(C=t("<a>",{class:h.buttonClass+" icon-user regions-btn"}).attr("data-tooltip",h.regionsBtn||r.regionsLabel).appendTo(f),function(e,n,a){var o=t("<div>",{class:h.regionsClass}).appendTo(e),i=e.find("img").eq(0);o.css({left:i.position().left,top:i.position().top,width:i.width(),height:i.height()});for(var s,r=0;r<n.length;r++)s=n[r].split(";"),o.append(t("<div>").css({left:100*parseFloat(s[1])+"%",top:100*parseFloat(s[2])+"%",width:100*parseFloat(s[3])+"%",height:100*parseFloat(s[4])+"%"}).append("<span>"+s[0]+"</span>"));o.toggle(typeof a!==UNDEF&&a)}(a,JSON.parse(s[J.REGIONS]),h.regionsVisible),C.on("click",ot)),h.showMap&&s[J.LOCATION]){var v=function(){t("#map").addClass("on"),t(".map-root").trigger("setActive",s[J.NAME])};C=t("<a>",{class:h.buttonClass+" icon-location map-btn"}).attr("data-tooltip",r.mapBtn).on("click",function(){return t(".map-root").data("rendered")?v():t(".map-root").trigger("render",v),!1}).appendTo(f)}if(s[J.AUDIOCLIP]){var y=t("<div>",{class:"audio-clip paused"}).appendTo(f),C=t("<a>",{class:h.buttonClass+" icon-volume-up audioclip-btn"}).attr("data-tooltip",r.audioClipLabel).on("click",function(){C.hasClass("icon-pause")?G():W()}).appendTo(y);S=t("<audio>",{class:"audioclip",src:s[J.AUDIOCLIP][J.PATH],controlsList:"nofullscreen nodownload noremote noplaybackrate"}).appendTo(y),s[J.AUDIOCLIP].hasOwnProperty(J.TYPE)&&(S[0].type=s[J.AUDIOCLIP][J.TYPE],s[J.AUDIOCLIP].hasOwnProperty(J.DURATION)&&S.data("duration",s[J.AUDIOCLIP][J.DURATION]));var T=t('<input class="volume" type="range" name="volume" min="0" max="100" value="'+100*h.audioClipVolume+'">');y.append(T),T.on("change",function(e){var n=t(this).val();typeof n!==UNDEF&&(h.audioClipVolume=n/100),S[0].volume=h.audioClipVolume,savePrefs(h,["audioClipVolume"],"lb_pref"),typeof h.onVolumeChange===FUNCTION&&h.onVolumeChange(h.audioClipVolume)}),S[0].volume=h.audioClipVolume,h.autoplayAudioClips&&(d.hasClass("cover-up")?W():S.data("wasPlaying",!0))}else S=t();h.showNumbers&&m.append(t("<span>",{class:"nr",html:e+1+" <em>"+b.length+"</em>"})),s[J.IMAGECAPTION]&&m.append(t("<div>",{class:"text",html:s[J.IMAGECAPTION]})),f.is(":empty")||(m.append(f),"mouse"===whatInput.ask("intent")?f.find("[data-tooltip]").addTooltip():f.children(".meta").addTooltip({touchToggle:!0})),m.is(":empty")||(a.append(m).addClass(h.hasCaptionClass),m.show()),h.rightClickProtect&&n.on("contextmenu",function(t){return t.preventDefault(),!1}),n.attr("src",u),"video"===p||"audio"===p?u.endsWith("res/"+p+".png")?(n.addClass("icon"),$(a)):(n.addClass("poster"),a.append(t("<a>",{class:"icon-play play-btn"}).on("click",_))):"other"===p&&a.append(t("<a>",{class:"icon-external button",html:" "+r.clickToOpen,href:s[J.ORIGINALPATH],download:"download"}))}return n},c=function(e){if(b&&b.length>e){t("<img>").appendTo(a).hide().attr("src",o.getOptimalImagePath(b[e],i)).one("load",function(){t(this).remove()})}};if(clearTimeout(F),F=null,G(),h.hasOwnProperty("onLoadStart")&&h.onLoadStart.call(this,e),n){for(var u=0;u<=n;u++)g.children("#c"+(e+u)).length||s((e+u)%x);g.waitAllImg(null,at),c((e+u)%x)}else{var p=g.children("#c"+e),m=p.length?p.find("img"):s(e);m.length&&m[0].naturalWidth?at(m):m.one("load",at),c((e+1)%x)}},st=function(){m=p.outerWidth(),f=p.outerHeight(),p.removeClass("landscape portrait").addClass(m>=f?"landscape":"portrait"),K(!0)};if((p=c.children("."+l.lightbox)).length&&p.data("lightbox")?h=t.extend({},s,p.data("lightbox")):(p.length||(p=t("<section>",{class:l.lightbox}).appendTo(c)),h=s),c.find(h.selector).each(function(e){typeof t(this).data("lbnr")===UNDEF&&t(this).data("lbnr",e),b.push(t(this).data(J.OBJ))}),b.length){if(h.hasOwnProperty("transitionType")||(h.transitionType=t.fn.lightbox.defaults.transitionTypes[Math.floor(Math.random()*t.fn.lightbox.defaults.transitionTypes.length)]),h.hasOwnProperty("slideshowDelay")||(h.slideshowDelay=t.fn.lightbox.defaults.timings[h.transitionType||"slide"][0]),h.hasOwnProperty("transitionSpeed")||(h.transitionSpeed=t.fn.lightbox.defaults.timings[h.transitionType||"slide"][1]),"slide"!==h.transitionType||h.hasOwnProperty("direction")||(h.direction="e"),y="carousel.flip.book.cube.coverflow".indexOf(h.transitionType)>=0,c.data("lightbox-ns",u="lightbox-"+Math.floor(1e4*Math.random())).attr("id",u),x=b.length,C=h.startWith||0,(g=p.find("."+l.cards)).length||(g=t("<div>",{class:l.cards}).appendTo(p)),g.addClass(h.transitionType),(w=p.find("."+l.prev)).length||(w=t("<button>",{class:l.prev+" btn"}).appendTo(p)),w.on("click",function(){L()}),(v=p.find("."+l.next)).length||(v=t("<button>",{class:l.next+" btn"}).appendTo(p)),v.on("click",function(){N()}),p.addClass(h.transitionType+" "+(m>f?"landscape":"portrait")+(y?" "+l.threedee:"")),b.length<x&&(x=b.length),st(),e.on("resize."+u+" orientationchange."+u,function(){clearTimeout(I),I=setTimeout(st,100)}),h.enableKeyboard&&n.on("keyup."+u,function(t){if(!p.length||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName))return!0;switch(t.preventDefault(),t.keyCode){case 33:case 37:L();break;case 34:case 39:N();break;case 97:case 35:it(b.length-1);break;case 103:case 36:it(0);break;case 106:case 179:F?V():U();break;case 107:et();break;case 109:togglePanels();break;case 32:F?V():U();break;default:return!0}return!1}),h.enableMouseWheel){var rt=null;p.on("mousewheel."+u+" DOMMouseScroll."+u,function(e){return rt=clearTimeout(rt),!!t(e.target).closest("."+l.caption).length||(rt=setTimeout(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?L:N,200),!1)})}h.autoplay&&(F=setTimeout(q,h.slideshowDelay+h.transitionSpeed)),c.on("lightboxLoad."+u,function(e,n,a){j(!0),typeof n===NUMBER?n=Math.minMax(0,n,b.length):typeof n===UNDEF?n=0:n.jQuery&&(n=n.data("lbnr")||0),function(e){e=typeof e===UNDEF?C:function(e){if("number"==typeof e)return e<0?0:e>=b.length?b.length-1:e;if("string"!=typeof e){if(e instanceof t||(e=t(e)),!(e=e.find("img").eq(0)).length)return 0;e=e.attr("src").getFile()}if(!e)return 0;for(var n=0,a=b.length;n<a;n++)if(b[n][J.PATH]===e)return n;return 0}(e),"carousel"===h.transitionType?it(e,3):"coverflow"===h.transitionType?it(e,1):it(e),M=!0}(n),F&&j(!0),a&&(typeof a===NUMBER?setTimeout(R,a):R())}).on("lightboxCurrent."+u,function(){return C}).on("lightboxQuit."+u,function(){return quitLightbox(),!1}).on("lightboxRemove."+u,function(){return e.off("."+u),p.remove(),!1}).on("lightboxContainer."+u,function(){return p}).on("startAuto."+u,function(){return R(0),!1}).on("stopAuto."+u,function(){return j(0),!1}).on("startAudioClip."+u,function(){return W(),!1}).on("resumeAudioClip."+u,function(){return S.length&&S.data("wasPlaying")&&W(),!1}).on("pauseAudioClip."+u,function(){return G(),!1}).on("pauseMedia."+u,function(){return g.children("#c"+C).children("audio,video").each(function(){this.pause()}),!1}).on("resumeMedia."+u,function(){return function(){var t=g.children("#c"+C).children("audio,video");t.length&&t[0].play()}(),!1}).on("refresh."+u,function(){return st(),!1}),h.hasOwnProperty("onReady")&&h.onReady.call(this)}}})},t.fn.lightbox.defaults={selector:".thumbnails .thumb.lbable",lightboxClass:"lightbox",thumbsVisibleClass:"thumbs-visible",thumbsHiddenClass:"thumbs-hidden",containClass:"contain",ordering:"original",transitionTypes:["crossfade","zoom","kenburns","stack","slide","swap","carousel","flip","book","cube","coverflow"],timings:{crossfade:[1e3,2e3],zoom:[1e3,2e3],kenburns:[0,4e3],stack:[1500,1500],slide:[1500,1500],swap:[2e3,1e3],carousel:[2e3,1e3],flip:[2e3,1e3],book:[2e3,1e3],cube:[2e3,1e3],coverflow:[2e3,1e3]},coverflowFactor:[6.4,12.4],fit:"both",fitPadding:0,scaleUp:!1,maxzoom:2,autoplay:!1,backgroundAudioSlideshowControl:!1,muteBackgroundAudio:!0,hideSidebar:!1,videoAuto:!1,useFullScreen:!0,loop:!0,enableKeyboard:!0,enableMouseWheel:!0,clickAction:"donothing",afterLast:"donothing",doubleClickZoom:!0,mapHeight:.8,volume:.5,audioClipVolume:.75,autoplayAudioClips:!0,rightClickProtect:!1,captionplacement:"center bottom",captionstyle:"dark",showNumbers:!1,showDownload:!1,allowDownloadOthers:!1,allowDownloadScaled:!1,showMap:!1,showRegions:!0,regionsVisible:!1,printImage:!1,regionsClass:"regions",buttonClass:"btn",hasCaptionClass:"has-caption"},t.fn.lightbox.text={startOver:"Start over",upOneLevel:"Up one level",backToHome:"Back to home",backToCover:"Back to cover page",nextFolder:"Next folder",atLastPageQuestion:"Where to go next?",atLastPage:"At last page",atFirstPage:"At first page",download:"Download",print:"Print",printLabel:"Print out this photo on your printer",mapBtn:"Map",mapLabel:"Show the photo location on map",fotomotoBtn:"Buy / Share",fotomotoTooltip:"Buy prints or digital files, share, send free eCards",regionsBtn:"People",regionsLabel:"Show tagged people",metaBtn:"Photo data",metaLabel:"Display photographic (Exif/Iptc) data",clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
!function(e,s,n,l,r){"use strict";e.fn.selectable=function(a){a=e.extend({cardClass:"card",thumbClass:"thumb",checkboxClass:"checkbox",selectedClass:"checked",checkmarkClass:"icon-checkmark",hasSelectedClass:"has-selected",allSelectedClass:"all-selected",selectionChange:null},a);var t,s=e(this).eq(0),n=function(e){typeof a.selectionChange===FUNCTION&&a.selectionChange.call(e),l.toggleClass(a.hasSelectedClass,e>0).toggleClass(a.allSelectedClass,e===t.length)},r=function(){return t.filter("."+a.selectedClass).length},o=function(e){e.addClass(a.selectedClass).find("."+a.checkboxClass).addClass(a.checkmarkClass)},i=function(e){e.removeClass(a.selectedClass).find("."+a.checkboxClass).removeClass(a.checkmarkClass)},c=function(t){var s=e(t.target).closest("."+a.cardClass),l=r();return s.hasClass(a.selectedClass)?(i(s),l-=1,typeof a.selectionChange===FUNCTION&&a.selectionChange.call(l)):(o(s),l+=1,typeof a.selectionChange===FUNCTION&&a.selectionChange.call(l)),n(l),!1},d=function(){var n,l;(t=a.selector?s.find(a.selector):s.find("."+a.cardClass)).each(function(){e(this).find("span."+a.checkboxClass).length||(n=e(this).children("."+a.thumbClass).eq(0),(l=n.length?e("<span>",{class:a.checkboxClass}).appendTo(n):e("<span>",{class:a.checkboxClass}).prependTo(e(this))).on({click:c}))}),typeof a.selectionChange===FUNCTION&&a.selectionChange.call(r())};return d(),s.on({selectAll:function(){if(s.is(":visible")){var l=r();l<t.length&&(l=t.length,t.not("."+a.selectedClass).each(function(){o(e(this))}),typeof a.selectionChange===FUNCTION&&a.selectionChange.call(l)),n(l)}},selectNone:function(){if(s.is(":visible")){var l=r();l>0&&(l=0,t.filter("."+a.selectedClass).each(function(){i(e(this))}),typeof a.selectionChange===FUNCTION&&a.selectionChange.call(l)),n(l)}},selectInverse:function(){if(s.is(":visible")){var l=t.length-r();0===l?(t.each(function(){i(e(this))}),typeof a.selectionChange===FUNCTION&&a.selectionChange.call(0)):(t.each(function(){!function(e){e.hasClass(a.selectedClass)?i(e):o(e)}(e(this))}),typeof a.selectionChange===FUNCTION&&a.selectionChange.call(l)),n(l)}},selectRefresh:d}),this},e.fn.skin=function(n){n=e.extend({},e.fn.skin.defaults,n);var r,o=e(this),i=o.children("."+n.contClass),c=getTranslations({foundNTimes:"found {0} time(s)",notFound:"not found",search:"Search",searchPlaceholder:"Search...",newImages:"New images",results:"Results",reset:"Reset",label:"Label",selectedItems:"Selection",addCart:"Add to cart",return:"return",select:"Select",sortBy:"Sort by",sortedBy:"Sorted by",ascending:"ascending",descending:"descending",multipleSelectHint:"Use SHIFT to select range, CTRL for multiple entries",noRating:"No rating",inTheLastDay:"in the last day",inThePastNDays:"in the past {0} days",sinceMyLastVisit:"since my last visit",betweenDays:"between {0} and {1}",onDay:"on {0}",beforeDay:"before {0}",afterDay:"after {0}",imagesAdded:"Images added",imagesModified:"Images modified",imagesTaken:"Images taken",new:"New",more:"more",less:"less",image:"image",images:"images",audio:"audio",audio:"audios",video:"video",videos:"videos",other:"other",others:"others"}),d=(e(),""),h=n.indexName.split(".")[1]||"html",u=""!==window.location.hash,f=new Date/1e3,m=function(){var e=g();if(e.length){var a=e.data("overlay");return a||(a=e.hasClass(n.baseOverlayClass)?"base":p(),e.attr("data-overlay",a),a)}return""},p=function(){return"oly_"+Math.floor(1e4*Math.random())},g=function(e){var a=i.find("."+n.overlayClass+":visible").last();return!a.length&&typeof e!==UNDEF&&e&&(a=y()),a},C=function(){return i.find("."+n.baseOverlayClass)},v=function(){g().length&&le()&&se()},y=function(){var a=p(),t=e("<section>",{class:[n.overlayClass,n.subOverlayClass].join(" ")}).attr({id:a,"data-overlay":a}),s=C();return s.length?s.after(t):i.prepend(t),E(t),o.addClass(n.hasOverlayClass),t},b=function(){return g().children("header").eq(0)},T=function(a){var t=b().find("h"+n.overlayHeadLevel).eq(0);return t.length?a.appendTo(t):e()},w=function(){return e("<div>",{class:n.progressbarClass}).insertAfter(b())},N=function(e){g().find("."+n.progressbarClass).remove()},P=function(e){(e=e||m())&&o.find("[data-rel="+e+"]").remove()},E=function(a){var t=a.children("."+n.thumbnailsClass);t.length||(t=e("<div>",{class:n.thumbnailsClass}).appendTo(a));var s=t.children("."+n.clipClass);s.length||(s=e("<div>",{class:n.clipClass}).appendTo(t));var l=s.children("."+n.thumbContClass);return l.length||(l=e("<div>",{class:n.thumbContClass}).appendTo(s)),t},O=function(e){var a=g().find("."+n.thumbnailsClass);return!a.length&&e&&(a=E(g(!0))),a},x=function(e){return C().find("."+n.thumbClass+(e||""))},k=function(e){return g().find("."+n.thumbClass+(e||""))},D=function(e){return k("."+n.activeClass).eq(0)},I=function(e,a){var t=D();if(t!==e){t.removeClass(n.activeClass),e.addClass(n.activeClass);var s=e.data("lbnr");typeof s!==UNDEF&&g().trigger("lightboxCurrent")!==s&&g().trigger("lightboxLoad",typeof a===UNDEF?s:[s,a])}return e},S=function(e){return g().find("."+n.thumbClass+"."+n.lbableClass).eq(e)},A=function(){var a=g();if(a.length&&a.hasClass(n.overlayClass)){var t=a.data("oly-ns");s.off("."+t),a.trigger("lightboxRemove"),P(t),a.trigger("overlayRemoved"),a.remove(),o.removeClass(n.hasOverlayClass),function(){var a=C();a.length?(e("[data-rel="+a.data("overlay")+"]").show(),C().find("."+n.thumbnailsClass).trigger("refresh")):i.removeClass(n.coverUpClass).addClass(n.coverDownClass)}(),removeParam(n.indexName),oe(),i.hideAllTooltips()}},U=function(a){i.find("section."+n.subOverlayClass).length>0&&A(),i.hideAllTooltips();var t=y();return function(a,t){var s=e("<header>").prependTo(t||g()),l=e("<div>",{class:[n.overlayTitleClass,a&&a.hasOwnProperty("icon")?a.icon:""].filter(Boolean).join(" ")}).appendTo(s);a&&a.hasOwnProperty("title")&&l.append(e("<h"+n.overlayHeadLevel+">",{html:a.title})),l.append(e("<a>",{class:"close",href:"","aria-label":c.return}).addTooltip(c.return,{pos:[0,1,2,1]}).on("click",function(){return e(this).trigger("removeTooltip"),A(),!1}))}(a,t),i.trigger("overlayReady",t),t},M=function(a,t){var s,n=e();return s=typeof t!==UNDEF&&t?x():k(),a=decodeURIComponent(a),s.each(function(){var t=e(this).data("name")||function(e){var a=e.data("href")||e.attr("href");return a?a.substring(a.lastIndexOf("/")+1).replace("#img=",""):""}(e(this));if(t===a||function(e,a){return e.slice(-h.length)===h&&e.substring(0,e.lastIndexOf("."))===a.substring(0,a.lastIndexOf("."))}(t,a))return n=e(this),!1}),n},F=function(e){return i.find("."+n.foldersClass+(e||""))},H=function(){return g().trigger("lightboxContainer")},L=function(){var e=D();return e.length?e.data(J.OBJ):null},R=function(e){var a=S(e);return a.length?a.data(J.OBJ):null};e.fn.renderImages=function(a,t,s,l){if(typeof a===UNDEF||!a.length)return this;Array.isArray(a)||(a=[a]);var o=e(this),c=m(),d=(H(),O(!0)),h=d.find("."+n.thumbContClass),u=null,p=!1,g=function(a,t,s){var l,o,i,c,t=typeof t===UNDEF?h.position()[p?"top":"left"]:t,d=h.width(),f=h.height();e();l=p?[d,n.fixedShapeThumbs?d:1.5*d]:[n.fixedShapeThumbs?f:1.5*f,f],h.children("."+n.lazyloadClass).filter(function(){var a;return p?(a=e(this).position().top+t)+f/2>=0&&a-2*f<=0:(a=e(this).position().left+t)+d/2>=0&&a-2*d<=0}).each(function(){o=e(this),i=o.data(J.OBJ),(c=o.children("img")).length||(c=e("<img>",{class:n.hideImageClass}).appendTo(o)),c[0].hasAttribute("src")||c.one("load",function(){e(this).addClass(n.showImageClass).removeClass(n.hideImageClass).parent().removeClass(n.lazyloadClass)}).attr({src:r.getOptimalThumbPath(i,l),alt:i[J.TITLE]||i[J.NAME].stripExt()})}),typeof s===FUNCTION&&s.call(),h.children("."+n.lazyloadClass).length&&(u=setTimeout(g,n.scrollCheckInterval/2))},C=function(a){return I(e(this)),!1};return c||(c="base"),p=i.hasClass("thumbs-left")||i.hasClass("thumbs-right"),i.hasClass("thumbs-right")?[2,1,0,1]:i.hasClass("thumbs-left")?[0,1,2,1]:i.hasClass("thumbs-top")&&[1,0,1,2],function(){for(var t,s,l,o,i,d,m,p,v=k(),y=n.hasOwnProperty("markNew")?f-n.markNew.days*ONEDAY_S:null,b=0,T=0;T<a.length;T++)o=!(l="folder"===(p=a[T])[J.CATEGORY])&&r.isLightboxable(p),"video"===p[J.CATEGORY]||p[J.CATEGORY],i=!!p.hasOwnProperty(J.THUMB)&&/res\/\w+\.png$/.test(p[J.THUMB][J.PATH]),d=p[J.THUMBCAPTION],(t=T<v.length?v.eq(T):e("<a>",{class:[n.thumbClass,n.lazyloadClass,p[J.CATEGORY],p[J.THUMB][J.WIDTH]<n.maxThumbWidth&&p[J.THUMB][J.HEIGHT]<n.maxThumbHeight?"tiny":"",i?"icon":""].filter(Boolean).join(" ")}).css("width",p[J.THUMB][J.WIDTH]).appendTo(h)).data(J.OBJ,p),o&&(t.addClass(n.lbableClass),t.data("lbnr",b++)),(s=t.find("img").eq(0)).length||(s=e("<img>",{alt:r.getAlt(p)}).appendTo(t)),p[J.THUMB].hasOwnProperty(J.RENDITIONS)?s.data("hasrenditions",!0):s.one("load."+c,function(){e(this).addClass(n.showImageClass).removeClass(n.hideImageClass).parent().removeClass(n.preloadClass)}),s[0].complete&&s.trigger("load"),i?t.addClass("iconthumb"):(s.attr({width:p[J.THUMB][J.WIDTH],height:p[J.THUMB][J.HEIGHT]}),p[J.THUMB][J.HEIGHT]/p[J.THUMB][J.WIDTH]<.5&&t.addClass(n.panoClass),l&&t.append(e("<span>",{class:"icon-folder"}))),t.data("name")||t.attr("data-name",r.getItemName(p)),d&&t.attr("data-tooltip",d),o?(o&&t.on("click."+c,C),t.data("href")||t.attr("data-href",s.attr("src")||r.getOptimalImagePath(p,[s.outerWidth(),s.outerHeight()])),t[0].hasAttribute("href")&&t.attr("href","")):(t.addClass(p[J.CATEGORY]),t.attr("href",r.getItemPath(p))),null!=y&&(m=p[J.DATES])&&(m=m[n.markNew.reference])&&m>=y&&(d=n.markNew.text?e("<span>",{class:"new-image",text:n.markNew.text}):e("<span>",{class:"icon-new-fill new-image"}),t.append(d),TOUCHENABLED||d.data("tooltip",new Date(1e3*m).toLocaleDateString(LOCALE)).addTooltip()),n.rightClickProtect&&t.on("contextmenu",function(e){return e.preventDefault(),!1});u=setTimeout(g,n.scrollCheckInterval/2)}(),d.thumbScroll(),o.on({refresh:g}),typeof t===FUNCTION&&(typeof s!==UNDEF?typeof l!==UNDEF?t.call(void 0,o,s,l):t.call(void 0,o,s):t.call(void 0,o)),o};var B=function(a,t){if(r){k();a.lightbox(r,{onLoadStart:function(e){if(le())removeParam(n.indexName,"img");else{var a=R(e);a&&addParam(n.indexName,{img:r.getItemName(a)},a[J.TITLE])}},onLoadEnd:function(a){if(function(e){var a=D(),t=S(e);a!==t&&(a.length&&a.removeClass(n.activeClass),t.length&&t.addClass(n.activeClass),O().trigger("scrollToActive"))}(a),n.hasOwnProperty("share")){var t=R(a);t&&e(n.share.hook).trigger("updateLinks",{href:"slides/"+t[J.PATH].replaceExt(h),image:t[J.IMAGE][J.PATH],title:t[J.TITLE]||t[J.NAME].stripExt(),description:(t[J.COMMENT]||"").stripHTML()})}},onVolumeChange:function(e){n.audioClipVolume=e},onReady:function(){if(i.find("section."+n.overlayClass).length>0||!n.autoStart?ae():(se(),ee()),u&&window.location.hash){u=!1;var a=readParam();if(i.removeClass(n.coverDownClass).addClass(n.coverUpClass),a.hasOwnProperty("label")&&null!==a.label)_(a.label,function(){addParam(n.indexName,{label:a.label+"",search:null,newimages:null,date:null},c.label+": "+a.label)});else if(a.hasOwnProperty("search")&&null!==a.search)Y(a.search,function(){addParam(n.indexName,{search:a.search+"",label:null,newimages:null,date:null},c.search+": "+a.search)});else if(a.hasOwnProperty("newimages"))Q(V(a.newimages),function(){addParam(n.indexName,{newimages:a.newimages,search:null,label:null,date:null},c.searchNew+": "+a.newimages)});else if(a.hasOwnProperty("date")){var t=W(a.date);Q(t,function(){addParam(n.indexName,{date:a.date,newimages:null,search:null,label:null},$(t.reference)+": "+a.date)})}else if(a.hasOwnProperty("img")&&null!==a.img){var s=M(a.img);s.length?a.hasOwnProperty("slideshow")?I(s,2e3):I(s):removeParam(n.pageName||n.indexName,"img")}else a.hasOwnProperty("slideshow")&&I(0,2e3)}else!function(e,a){var t=D().data("lbnr");typeof e!==NUMBER&&(e=typeof e===UNDEF?typeof t===UNDEF?0:t:e.jQuery?e.data("lbnr")||0:0),e!==t&&g().trigger("lightboxLoad",typeof a===UNDEF?e:[e,a])}(0);e("."+n.startshowClass).fadeIn().children(".button").on("click",z)},onQuit:function(){ne(),ae()},onSlideshowStart:function(){o.add(g()).removeClass(n.pausedClass).addClass(n.playingClass),n.hasOwnProperty("backgroundMusic")&&n.backgroundMusic.slideshowControl&&e(n.backgroundMusic.hook).trigger("startPlayer")},onSlideshowPause:function(){o.add(g()).removeClass(n.playingClass).addClass(n.pausedClass),n.hasOwnProperty("backgroundMusic")&&n.backgroundMusic.slideshowControl&&e(n.backgroundMusic.hook).trigger("pausePlayer")}})}},q=function(){if(window.location.hash!==d){d=window.location.hash;var e=readParam();if(e.hasOwnProperty("label"))_(e.label,function(){setParam(n.indexName,{label:e.label},c.label+": "+e.label),oe()});else if(e.hasOwnProperty("search"))Y(e.search,function(){setParam(n.indexName,{search:e.search},c.search+": "+e.search),oe()});else if(e.hasOwnProperty("newimages"))Q(V(e.newimages),function(){setParam(n.indexName,{newimages:e.newimages},c.newImages+": "+e.newimages),oe()});else if(e.hasOwnProperty("date")){var a=W(e.date);Q(a,function(){setParam(n.indexName,{date:e.date},$(a.reference)+": "+e.date),oe()})}else if(e.hasOwnProperty("img")){var t=M(e.img);t.length?g().trigger("loadImage",t):removeParam(n.indexName,"img")}else ne(),A(),oe()}},z=function(e){var a=k("."+n.activeClass+":first-child");return a.length||(a=k("."+n.thumbClass+":first-child")),a.length&&g().trigger("loadImage",[a,!0]),!1},Y=function(a,t){var s=U({className:"search-results",icon:"icon-search",title:"&ldquo;"+a+"&rdquo;"});w(),v(),r.collectItems(e.extend(n.search,{exact:!1,terms:a,depth:"tree",ready:function(){T(e("<small>",{text:this.length?c.foundNTimes.replace("{0}",this.length):c.notFound})),s.renderImages(this,B),N(),typeof t===FUNCTION&&t.call()}}))},j=function(a){if(a.length&&r){n.search=e.extend({depth:"tree",fields:"creator,keywords,title,comment"},n.search);var t=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&(e.closest(".panel").add("aside .btn").removeClass("on"),Y(a,function(){setParam(n.indexName,{search:a},c.search+": "+a),oe()})),!1};a.find(".search-btn, button").on("click",function(){return a.hasClass(n.activeClass)?(t(a),a.removeClass(n.activeClass)):(a.find("input").eq(0).focus(),a.addClass(n.activeClass)),!1}),a.on("submit",function(e){return e.preventDefault(),t(a),a.removeClass(n.activeClass),!1}),a.find("input").on("focus",function(){a.addClass(n.activeClass)})}},_=function(a,t,l){var o=U({className:"tags-found",icon:"icon-tag",title:"&ldquo;"+a+"&rdquo;"});w(),typeof t===UNDEF?t=!1:typeof t===FUNCTION&&(l=t,t=!1),(o.offset().top<s.scrollTop()||o.offset().top>s.scrollTop()+s.height()-100)&&s.scrollTop(o.offset().top),r.collectItems(e.extend(n.tagCloud,{exact:n.exactFields,caseSensitive:t,terms:a,ready:function(){T(e("<small>",{text:this.length?c.foundNTimes.replace("{0}",this.length):c.notFound})),o.renderImages(this,B),N(),typeof l===FUNCTION&&l.call()}}))},G=function(a){var t=e(n.tagCloud.hook||".tag-cloud-cont");if(t.length)if(a.length){var s=t.children("."+n.tagCloudClass),l=function(){var a=e(this).children("span").eq(0).text();return e(this).closest(".panel").add("aside .btn").removeClass("on"),a&&a.length>1&&function(a,t,s){var n=U({className:"tags-found",icon:"icon-tag",title:"&ldquo;"+a+"&rdquo;"});w(),v(),r.collectByPath({paths:t,ready:function(){T(e("<small>",{text:this.length?c.foundNTimes.replace("{0}",this.length):c.notFound})),n.renderImages(this,B),N(),typeof s===FUNCTION&&s.call()}})}(a,e(this).data("paths"),function(){setParam(n.indexName,{label:a},c.label+": "+a),oe()}),!1};s.length||(s=e("<div>",{class:n.tagCloudClass}).appendTo(t));for(var o,i,d,h=0,u=a.length;h<u;h++){if(o=e("<a>",{class:"tag"}).on("click",l).data("paths",a[h][1]).append(e("<span>",{html:a[h][0]})),a[h][1].length>1){if(n.tagCloud.fontVaries){for(i=0,d=Math.min(64,a[h][1].length);d>1;)i++,d>>=1;o.addClass("size-"+i)}o.append("&nbsp;").append(e("<sup>",{text:a[h][1].length}))}s.append(o)}n.tagCloud.useSearch&&function(a){var t=e(n.tagCloud.searchHook);startSearch=function(e){var a=e.find("input").eq(0).val();return a&&a.length>1&&(e.closest(".panel").add("aside .btn").removeClass("on"),_(a,function(){setParam(n.indexName,{label:a},c.label+": "+a),oe()})),!1},t.length||((t=e("<form>",{class:n.tagCloud.searchHook}).appendTo(a)).append(e("<div>",{class:"search-input"}).append(e("<input>",{type:"text",placeholder:c.searchPlaceholder,ariaLabel:c.search}))),t.append(e("<a>",{class:"search-btn icon-search"}))),t.find(".search-btn").on("click",function(){var a=e(this).closest("form");return a.find("input").eq(0).focus(),startSearch(a),!1}),t.on("submit",function(a){return a.preventDefault(),startSearch(e(this)),!1})}(t.parent())}else t.remove()},V=function(e){return n.hasOwnProperty("searchNew")?{reference:n.searchNew.reference||"dateTaken",depth:n.searchNew.depth||"subfolders",start:f/ONEDAY_S-e}:{reference:"dateTaken",depth:"subfolders",start:f/ONEDAY_S-e}},W=function(e){var a=e.match(/^([amt])?([cts])?\:?(\d+)\-?(\d+)?/i),t={range:0,reference:"dateTaken",depth:"current"};return a&&(a[1]&&("a"===a[1]?t.added="added":"m"===a[1]?t.added="fileModified":"t"===a[1]&&(t.added="dateTaken")),a[2]&&("c"===a[2]?t.depth="current":"t"===a[2]?t.depth="tree":"s"===a[2]&&(t.depth="subfolders")),a[4]?(t.start=parseInt(a[3])||0,t.end=parseInt(a[4])):a[3]&&(t.start=parseInt(a[3]),t.range=1)),t},$=function(e){return"dateTaken"===e?c.imagesTaken:"fileModified"===e?c.imagesModified:c.imagesAdded},K=function(e){var a,t=$(e.reference),s=(Math.floor(new Date/ONEDAY_MS),function(e){return new Date(e*ONEDAY_MS).toLocaleDateString(LOCALE)});return e.hasOwnProperty("end")||e.hasOwnProperty("start")?e.hasOwnProperty("end")?a=c.beforeDay.template(s(e.end)):e.hasOwnProperty("start")&&(a=e.hasOwnProperty("range")?e.range>1?c.betweenDays.template(s(e.start),s(e.start+e.range)):c.onDay.template(s(e.start)):getTimespan(f/ONEDAY_S-e.start)):a=getTimespan(e.range),t+" "+a},Q=function(a,t){var s=U({className:"search-results",icon:"icon-calendar",title:K(a)});w(),r.collectByDate(e.extend(a,{ready:function(){T(e("<small>",{text:this.length?c.foundNTimes.replace("{0}",this.length):c.notFound})),s.renderImages(this,B),N(),typeof t===FUNCTION&&t.call()}}))},X=function(a){return a&&Q(e.extend(n.searchNew,{start:f/ONEDAY_S-a}),function(){setParam(n.indexName,{newimages:a},$(n.searchNew.reference)),oe()}),!1},Z=function(){e(this).trigger("removeTooltip"),l.removeClass(n.fullscreenClass),e("html").fullScreen(!1)},ee=function(){if(!te()){var e=g();e.add(o).removeClass(n.pausedClass).addClass(n.playingClass),D()[0]===k().last()[0]?e.trigger("lightboxLoad",[0,!0]):e.trigger("startAuto")}},ae=function(){if(te()){var e=g();e.add(o).removeClass(n.playingClass).addClass(n.pausedClass),e.trigger("stopAuto")}},te=function(){return g().hasClass("playing")},se=function(){e(".autoplay").trigger("removeTooltip");var a=L();a&&addParam(n.indexName,{img:r.getItemName(a)},a[J.TITLE]),H().trigger("resumeAudioClip").trigger("resumeMedia"),i.removeClass(n.coverDownClass).addClass(n.coverUpClass)},ne=function(){removeParam(n.indexName,"img"),H().trigger("pauseMedia").trigger("pauseAudioClip"),i.removeClass(n.coverUpClass).addClass(n.coverDownClass)},le=function(){return!i.hasClass(n.coverUpClass)},re=function(a){if(a&&a.length&&"static"!==a.css("position")){var t=e("aside .sidebtn[data-rel="+a[0].id+"]");e("aside").hideAllTooltips(),window.requestAnimationFrame(function(){a.one("transitionend",function(){a.removeClass("on").css({transition:"none",display:"none"}),t.removeClass("on")}).css({transition:"opacity 500ms, transform 500ms ease-in",opacity:0,transform:"translateX(-16px)"})})}},oe=function(){if(n.hasOwnProperty("share"))if(H().is(":visible")){var a=L();a&&e(n.share.hook).trigger("updateLinks",{sites:n.share,title:a[J.TITLE]||a[J.NAME].stripExt().replace(/[-_]/g," ").capitalize(),description:a[J.COMMENT]||"",image:r.getOptimalImagePath(a,[1200,800]),href:r.getAbsolutePath(a)})}else e(n.share.hook).trigger("updateLinks")},ie=function(){n.hasOwnProperty("tagCloud")&&"current"!==n.tagCloud.depth&&r.collectTags(e.extend(n.tagCloud,{exact:n.exactFields,ready:function(){G(this)}}))},ce=function(){if(r){var a,t,s=r.getFolders(),l=n.markNew.days*ONEDAY_S;F(":not(.webloc)").each(function(r){r<s.length&&(t=s[r][J.DATES])&&(t=t[n.markNew.reference]||t[J.DATERANGE][1]||t[J.DATERANGE][0])&&f-t<l&&(a=n.markNew.text?e("<span>",{class:"new-image",text:n.markNew.text}):e("<span>",{class:"icon-new-fill new-image"}),TOUCHENABLED||a.data("tooltip",new Date(1e3*t).toLocaleDateString(LOCALE)).addTooltip(),e(this).find("."+n.thumbClass).eq(0).append(a))})}},de=function(){var a=F();a.length&&(n.hasOwnProperty("markNew")&&setTimeout(ce,300),setTimeout(function(){lazyloadFolders(),n.hasOwnProperty("weblocationCounts")&&n.weblocationCounts&&a.filter(".webloc.has-count").each(function(){var a=e(this).children(".caption");loadExternal(e(this).children(".thumb").attr("href"),function(){if(typeof this===OBJECT&&this.hasOwnProperty(J.DEEPCOUNTERS)){var e="";this[J.DEEPCOUNTERS].images&&(e+="<span>"+this[J.DEEPCOUNTERS].images+"&nbsp;"+translate(this[J.DEEPCOUNTERS].images>1?"images":"image")+"</span>"),this[J.DEEPCOUNTERS].audios&&(e+="<span>"+this[J.DEEPCOUNTERS].audios+"&nbsp;"+translate(this[J.DEEPCOUNTERS].audios>1?"audios":"audio")+"</span>"),this[J.DEEPCOUNTERS].videos&&(e+="<span>"+this[J.DEEPCOUNTERS].videos+"&nbsp;"+translate(this[J.DEEPCOUNTERS].videos>1?"videos":"video")+"</span>"),this[J.DEEPCOUNTERS].others&&(e+="<span>"+this[J.DEEPCOUNTERS].others+"&nbsp;"+translate(this[J.DEEPCOUNTERS].others>1?"others":"other")+"</span>"),e&&a.find(".counts").empty().append(e)}})})},500))};return window.location.search&&removeSearch(),loadPrefs(n,["audioClipVolume"],"lb_pref"),passDefaults(n,e.fn.lightbox.defaults,"indexName,level,uplink,uplinkText,autoStart,previousFoldersLast,nextFoldersFirst,rightClickProtect,useFullScreen,audioClipVolume,enableKeyboard,enableMouseWheel,extraSizes"),passDefaults(n.lightbox,e.fn.lightbox.defaults),passDefaults(n,e.fn.thumbScroll.defaults,"activeClass,disabledClass,thumbContClass,thumbsPosition,enableMouseWheel"),function(s){typeof Album===UNDEF&&console.log("Critical Error: Missing jalbum.album.js library!");var l=n.hasOwnProperty("tagCloud")&&"current"!==n.tagCloud.depth||"page"===n.pageType&&"newimages"===n.pageName,o={makeDate:n.makeDate,rootPath:n.rootPath,relPath:n.relPath,hiDpiImages:n.hiDpiImages||!1,hiDpiThumbs:n.hiDpiThumbs||!1,ready:"index"===n.pageType?function(){if(r){var a=r.getImages();k().each(function(){e(this).data("href",e(this).attr("href")).attr("href","")}),de(),a.length?C().renderImages(a,B,!0):window.location.hash&&window.location.hash&&q(),n.hasOwnProperty("map")&&(n.map.hasOwnProperty("apiKey")&&(e.fn.lightbox.defaults.mapApiKey=n.map.apiKey),n.map.hasOwnProperty("type")&&(e.fn.lightbox.defaults.mapType=n.map.type),n.map.hasOwnProperty("zoom")&&(e.fn.lightbox.defaults.mapZoom=n.map.zoom),function(a,t){var s;(s=function(e){for(var a,t=[],s=0;s<e.length;s++)(a=r.getLocation(e[s]))&&t.push({title:[s+1+".",e[s].title,e[s].comment].filter(Boolean).join(" "),pos:a,link:e[s].path});return t}(a)).length&&e("[data-map-root]").addMap({apiKey:t.apiKey,type:t.type||"hybrid",zoom:t.zoom||15,markers:s,autoLoad:!0,fullscreenControl:!0,onMarkerClick:function(){if(this.hasOwnProperty("link")){var e=M(this.link);e.length&&(isFullscreen()&&Z(),H().is(":visible")||g().trigger("setactivecard",e),I(e))}}})}(a,n.map)),n.hasOwnProperty("tagCloud")&&"current"===n.tagCloud.depth&&r.collectTags(e.extend(n.tagCloud,{exact:n.exactFields,ready:function(){G(this)}})),n.hasOwnProperty("search")&&j(e(n.search.hook)),n.hasOwnProperty("searchNew")&&function(a){if(a.length&&r){n.searchNew=e.extend({days:"3,30,90",depth:"folder",reference:"dateTaken",sinceLastVisit:!0},n.searchNew);var t=n.searchNew.days.split(",");a.append(e("<label>",{text:$(n.searchNew.reference)}));for(var s=0;s<t.length;s++)a.append(e("<a>",{class:"smallbtn",text:getTimespan(t[s])}).data("days",parseInt(t[s],10)).on("click",function(){X(e(this).data("days"))}));if(n.searchNew.sinceLastVisit){var l=e.cookie("lastVisit"),o=Math.round(new Date/1e3);l&&l<o-ONEDAY_S&&a.append(e("<a>",{class:"smallbtn",text:c.sinceMyLastVisit}).on("click",function(){X((o-l)/ONEDAY_S)})),e.cookie("lastVisit",o,31536e4)}}}(e(n.searchNew.hook));var t=e("[data-jalbum-query]");if(t.length){var s=t.data("jalbum-query");s.hasOwnProperty("fn")&&r[s.fn](e.extend(s,{ready:function(a){for(var l,o=0,i=Math.min(this.length,10);o<i;o++)l=this[o],e("<a>",{href:r.getLink(l)}).appendTo(t).append(e("<img>",{src:r.getThumbPath(l),width:l[J.THUMB][J.WIDTH],height:l[J.THUMB][J.HEIGHT],alt:l[J.TITLE]||l[J.NAME]}));this.length>10&&t.append(e("<a>",{class:"more",href:s.linkMore,text:"+"+(this.length-10)})),n.rightClickProtect&&t.on("contextmenu","img",function(e){return e.preventDefault(),!1})}}))}}}:function(){n.hasOwnProperty("search")&&j(e(n.search.hook));var s=[];k().each(function(){e(this).data("href",a.attr("href")).attr("href",""),s.push(e(this).data(J.PATH))}),s.length&&r.collectByPath({paths:s,ready:function(){this.length&&this.children("a."+n.lazyloadClass).each(function(){t=e(this),item=t.data(J.OBJ),t.children("img").length||(img=e("<img>",{class:n.hideImageClass}).one("load",function(){e(this).addClass(n.showImageClass).removeClass(n.hideImageClass),e(this).parent().removeClass(n.lazyloadClass)}).attr({src:r.getThumbPath(item),width:item[J.THUMB][J.WIDTH],height:item[J.THUMB][J.HEIGHT],alt:item[J.TITLE]||item[J.NAME].stripExt()}).appendTo(t),t.append(img))})}})},loadDeep:l};n.indexName!==e.fn.skin.defaults.indexName&&(o.indexName=n.indexName),n.audioPoster!==e.fn.skin.defaults.audioPoster&&(o.audioPoster=n.audioPoster),n.videoPoster!==e.fn.skin.defaults.videoPoster&&(o.videoPoster=n.videoPoster),l&&(o.deepReady=ie),r=new Album(e,o)}(),n.rightClickProtect&&k().add(F()).on("contextmenu","img",function(e){return e.preventDefault(),!1}),e("#fullscreen-btn").on("click",function(){document.fullscreenElement||(o.addClass("fullscreen"),document.documentElement.requestFullscreen().catch(function(e){console.log("Error going full-screen: ${err.message} (${err.name})")}))}),e("#fullscreen-exit-btn").on("click",function(){document.fullscreenElement&&(o.removeClass("fullscreen"),document.exitFullscreen().catch(function(e){console.log("Error exiting full-screen: ${err.message} (${err.name})")}))}),function(){var e=g().find("."+n.thumbContClass);return e.length&&!e.is(":empty")}()&&(e(".btn.play,.btn.autoplay").on("click",function(){SMALLSCREEN&&n.useFullScreen&&!document.fullscreenElement&&document.documentElement.requestFullscreen().catch(function(e){console.log("Error going full-screen: ${err.message} (${err.name})")}),se(),ee()}),e(".btn.pause").on("click",function(){ae()}),e(".album-title .folder-image>.image").on("click",se),e(".topnav ."+n.actualClass).on("click",function(a){if(e(a.target).closest("li").hasClass(n.actualClass))return le()?(SMALLSCREEN&&n.useFullScreen&&!document.fullscreenElement&&document.documentElement.requestFullscreen().catch(function(e){console.log("Error going full-screen: ${err.message} (${err.name})")}),se(),ee()):(ae(),ne()),!1}),e(".hero-handle").on("click",function(){le()?(SMALLSCREEN&&n.useFullScreen&&!document.fullscreenElement&&document.documentElement.requestFullscreen().catch(function(e){console.log("Error going full-screen: ${err.message} (${err.name})")}),se()):(ae(),ne())})),e(".panel>.close").on("click",function(){re(e(this).closest(".panel"))}),e("aside .top .sidebtn").on("click",function(){if(this.id.startsWith("fullscreen"))return!0;e(this).hasClass("on")?(e(this).removeClass("on"),re(e("#"+e(this).data("rel")))):(e(".panel:visible").each(function(){re(e(this))}),e("aside .sidebtn").removeClass("on"),e(this).addClass("on"),function(a){if(a&&a.length){var t=e("aside .sidebtn[data-rel="+a[0].id+"]"),s=t.data("autohide");window.requestAnimationFrame(function(){t.length&&t.parent().position().top;var e=t.length?t.position().top:0;a.addClass("on").css({transition:"none",display:"flex",opacity:0,transform:"translateX(-16px)"}),window.requestAnimationFrame(function(){a.css({top:Math.max(0,Math.min(e,o.outerHeight()-a.outerHeight()))}),a.one("transitionend",function(){a.css({display:"flex",opacity:1}),s&&setTimeout(function(){re(a)},s||2e3)}).css({transition:"opacity 500ms, transform 500ms ease-out",opacity:1,transform:"translateX(0)"})})})}}(e("#"+e(this).data("rel"))))}),e("[data-tooltip]").addTooltip(),n.hasOwnProperty("share")&&function(a){e.fn.renderShares.defaults.buttonTheme=a.buttonTheme||"dark",e.fn.renderShares.defaults.indexName=n.indexName,e.fn.renderShares.defaults.facebookAppId=a.facebookAppId||"",a.hasOwnProperty("callAction")&&(e.fn.renderShares.defaults.callAction=a.callAction),a.buttonLabels=!0,e(a.hook).renderShares(a),e.fn.lightbox.defaults.share=n.share.sites}(n.share),function(e){e.length&&e.audioPlayer({rootPath:n.rootPath,pos:[2,1,0,1],onPaused:function(){o.removeClass(n.bgaudioPlayingClass).addClass(n.bgaudioPausedClass)},onPlaying:function(){o.removeClass(n.bgaudioPausedClass).addClass(n.bgaudioPlayingClass)}})}(e("[data-audioPlayer]")),s.on("hashchange.projector_skin",q),this.getAlbum=function(){return r},this},e.fn.skin.defaults={contentHook:"article.cont",startSlideshowHook:"#start-slideshow",hasOverlayClass:"has-overlay",baseOverlayClass:"base-overlay",hideOnOverlayClass:"hide-on-overlay",overlayClass:"overlay",subOverlayClass:"sub-overlay",overlayTitleClass:"title",overlayHeadLevel:3,progressbarClass:"progressbar",lightboxClass:"lightbox",contClass:"cont",coverUpClass:"cover-up",coverDownClass:"cover-down",playingClass:"playing",pausedClass:"paused",bgaudioPlayingClass:"bgaudio-playing",bgaudioPausedClass:"bgaudio-paused",folderClass:"folder",thumbnailsClass:"thumbnails",clipClass:"clip",thumbContClass:"thumb-cont",thumbClass:"thumb",actualClass:"actual",cardClass:"card",lbableClass:"lbable",captionClass:"caption",commentClass:"comment",selectableClass:"selectable",hascaptionClass:"hascaption",checkedClass:"checked",activeClass:"active",preloadClass:"preload",lazyloadClass:"lazyload",hideImageClass:"hide-image",showImageClass:"show-image",startshowClass:"startshow",selectAllClass:"select-all",selectNoneClass:"select-none",addSelectedClass:"add-selected",scrollCheckInterval:100,indexName:"index.html",audioPoster:"audio.poster.png",videoPoster:"video.poster.png",exactFields:"creator,keywords",dateFormat:"M/d/yyyy",audioClipVolume:.75,thumbsPosition:"top",fixedShapeThumbs:!0,autoStart:!1,rightClickProtect:!1,useFullScreen:!0,enableKeyboard:!0}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));
